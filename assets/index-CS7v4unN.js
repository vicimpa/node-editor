(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const{abs:xo,acos:tR,acosh:nR,asin:sR,asinh:rR,atan:iR,atan2:oR,atanh:aR,cbrt:lR,ceil:cw,clz32:uR,cos:hw,cosh:cR,E:hR,exp:dR,expm1:fR,floor:pR,fround:mR,hypot:dw,imul:gR,log:vR,log10:_R,log1p:yR,log2:wR,LN10:xR,LN2:SR,LOG10E:CR,LOG2E:TR,max:Yr,min:Vs,pow:kR,PI:NR,random:ER,round:AR,sign:Bm,sin:fw,sinh:OR,sqrt:DR,SQRT1_2:MR,SQRT2:RR,tan:IR,tanh:PR,trunc:bR}=Math,zd=(t,e)=>t%=e,$m=(t,e)=>(t<0&&(t+=cw(t/-e)*e),zd(t,e)),zo=(t,e,n)=>Vs(n,Yr(e,t)),vc=(t,e,n)=>(n=zo(n??.5,0,1),e=xo(e),zo(t,-e*(1-n),e*n)),Qr=(t,e,n)=>t+(e-t)*n;var pw=Symbol.for("preact-signals");function _h(){if(ls>1)ls--;else{for(var t,e=!1;Eo!==void 0;){var n=Eo;for(Eo=void 0,Wd++;n!==void 0;){var s=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Uv(n))try{n.c()}catch(r){e||(t=r,e=!0)}n=s}}if(Wd=0,ls--,e)throw t}}function Ns(t){if(ls>0)return t();ls++;try{return t()}finally{_h()}}var he=void 0,Eo=void 0,ls=0,Wd=0,_c=0;function $v(t){if(he!==void 0){var e=t.n;if(e===void 0||e.t!==he)return e={i:0,S:t,p:he.s,n:void 0,t:he,e:void 0,x:void 0,r:e},he.s!==void 0&&(he.s.n=e),he.s=e,t.n=e,32&he.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=he.s,e.n=void 0,he.s.n=e,he.s=e),e}}function xe(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}xe.prototype.brand=pw;xe.prototype.h=function(){return!0};xe.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};xe.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};xe.prototype.subscribe=function(t){var e=this;return de(function(){var n=e.value,s=he;he=void 0;try{t(n)}finally{he=s}})};xe.prototype.valueOf=function(){return this.value};xe.prototype.toString=function(){return this.value+""};xe.prototype.toJSON=function(){return this.value};xe.prototype.peek=function(){var t=he;he=void 0;try{return this.value}finally{he=t}};Object.defineProperty(xe.prototype,"value",{get:function(){var t=$v(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(Wd>100)throw new Error("Cycle detected");this.v=t,this.i++,_c++,ls++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{_h()}}}});function te(t){return new xe(t)}function Uv(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function qv(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function Hv(t){for(var e=t.s,n=void 0;e!==void 0;){var s=e.p;e.i===-1?(e.S.U(e),s!==void 0&&(s.n=e.n),e.n!==void 0&&(e.n.p=s)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=s}t.s=n}function Ui(t){xe.call(this,void 0),this.x=t,this.s=void 0,this.g=_c-1,this.f=4}(Ui.prototype=new xe).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===_c))return!0;if(this.g=_c,this.f|=1,this.i>0&&!Uv(this))return this.f&=-2,!0;var t=he;try{qv(this),he=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return he=t,Hv(this),this.f&=-2,!0};Ui.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}xe.prototype.S.call(this,t)};Ui.prototype.U=function(t){if(this.t!==void 0&&(xe.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};Ui.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(Ui.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=$v(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function Ft(t){return new Ui(t)}function Gv(t){var e=t.u;if(t.u=void 0,typeof e=="function"){ls++;var n=he;he=void 0;try{e()}catch(s){throw t.f&=-2,t.f|=8,op(t),s}finally{he=n,_h()}}}function op(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Gv(t)}function mw(t){if(he!==this)throw new Error("Out-of-order effect");Hv(this),he=t,this.f&=-2,8&this.f&&op(this),_h()}function Na(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Na.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};Na.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Gv(this),qv(this),ls++;var t=he;return he=this,mw.bind(this,t)};Na.prototype.N=function(){2&this.f||(this.f|=2,this.o=Eo,Eo=this)};Na.prototype.d=function(){this.f|=8,1&this.f||op(this)};function de(t){var e=new Na(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}function gw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kv={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ea=Symbol.for("react.element"),vw=Symbol.for("react.portal"),_w=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),xw=Symbol.for("react.provider"),Sw=Symbol.for("react.context"),Cw=Symbol.for("react.forward_ref"),Tw=Symbol.for("react.suspense"),kw=Symbol.for("react.memo"),Nw=Symbol.for("react.lazy"),Um=Symbol.iterator;function Ew(t){return t===null||typeof t!="object"?null:(t=Um&&t[Um]||t["@@iterator"],typeof t=="function"?t:null)}var Yv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xv=Object.assign,Qv={};function qi(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Yv}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zv(){}Zv.prototype=qi.prototype;function ap(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Yv}var lp=ap.prototype=new Zv;lp.constructor=ap;Xv(lp,qi.prototype);lp.isPureReactComponent=!0;var qm=Array.isArray,Jv=Object.prototype.hasOwnProperty,up={current:null},e_={key:!0,ref:!0,__self:!0,__source:!0};function t_(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Jv.call(e,s)&&!e_.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Ea,type:t,key:i,ref:o,props:r,_owner:up.current}}function Aw(t,e){return{$$typeof:Ea,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ea}function Ow(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hm=/\/+/g;function ed(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ow(""+t.key):e.toString(36)}function tc(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ea:case vw:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+ed(o,0):s,qm(r)?(n="",t!=null&&(n=t.replace(Hm,"$&/")+"/"),tc(r,e,n,"",function(u){return u})):r!=null&&(cp(r)&&(r=Aw(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Hm,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",qm(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+ed(i,a);o+=tc(i,e,n,l,r)}else if(l=Ew(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+ed(i,a++),o+=tc(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mu(t,e,n){if(t==null)return t;var s=[],r=0;return tc(t,s,"","",function(i){return e.call(n,i,r++)}),s}function Dw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},nc={transition:null},Mw={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:nc,ReactCurrentOwner:up};function n_(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Mu,forEach:function(t,e,n){Mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mu(t,function(){e++}),e},toArray:function(t){return Mu(t,function(e){return e})||[]},only:function(t){if(!cp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=qi;Z.Fragment=_w;Z.Profiler=ww;Z.PureComponent=ap;Z.StrictMode=yw;Z.Suspense=Tw;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mw;Z.act=n_;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Xv({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=up.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Jv.call(e,l)&&!e_.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:Ea,type:t.type,key:r,ref:i,props:s,_owner:o}};Z.createContext=function(t){return t={$$typeof:Sw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xw,_context:t},t.Consumer=t};Z.createElement=t_;Z.createFactory=function(t){var e=t_.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:Cw,render:t}};Z.isValidElement=cp;Z.lazy=function(t){return{$$typeof:Nw,_payload:{_status:-1,_result:t},_init:Dw}};Z.memo=function(t,e){return{$$typeof:kw,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=nc.transition;nc.transition={};try{t()}finally{nc.transition=e}};Z.unstable_act=n_;Z.useCallback=function(t,e){return ht.current.useCallback(t,e)};Z.useContext=function(t){return ht.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};Z.useEffect=function(t,e){return ht.current.useEffect(t,e)};Z.useId=function(){return ht.current.useId()};Z.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return ht.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};Z.useRef=function(t){return ht.current.useRef(t)};Z.useState=function(t){return ht.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return ht.current.useTransition()};Z.version="18.3.1";Kv.exports=Z;var b=Kv.exports,s_={exports:{}},r_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=b;function Rw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Iw=typeof Object.is=="function"?Object.is:Rw,Pw=xi.useState,bw=xi.useEffect,Fw=xi.useLayoutEffect,Lw=xi.useDebugValue;function jw(t,e){var n=e(),s=Pw({inst:{value:n,getSnapshot:e}}),r=s[0].inst,i=s[1];return Fw(function(){r.value=n,r.getSnapshot=e,td(r)&&i({inst:r})},[t,n,e]),bw(function(){return td(r)&&i({inst:r}),t(function(){td(r)&&i({inst:r})})},[t]),Lw(n),n}function td(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Iw(t,n)}catch{return!0}}function Vw(t,e){return e()}var zw=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vw:jw;r_.useSyncExternalStore=xi.useSyncExternalStore!==void 0?xi.useSyncExternalStore:zw;s_.exports=r_;var Ww=s_.exports,i_={exports:{}},yh={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw=b,$w=Symbol.for("react.element"),Uw=Symbol.for("react.fragment"),qw=Object.prototype.hasOwnProperty,Hw=Bw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gw={key:!0,ref:!0,__self:!0,__source:!0};function o_(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)qw.call(e,s)&&!Gw.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:$w,type:t,key:i,ref:o,props:r,_owner:Hw.current}}yh.Fragment=Uw;yh.jsx=o_;yh.jsxs=o_;i_.exports=yh;var y=i_.exports,a_={};/**
 * @license React
 * react-jsx-dev-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw=Symbol.for("react.fragment");a_.Fragment=Kw;a_.jsxDEV=void 0;var hp=[],Yw=Symbol.for("react.element"),Gm=function(){},Ws,l_=Symbol.dispose||Symbol.for("Symbol.dispose");function nd(t,e){var n=e.effect.S();return Ws=e,Xw.bind(e,t,n)}function Xw(t,e){e(),Ws=t}var Km,sd;(Km={u:0,effect:{s:void 0,c:function(){},S:function(){return Gm},d:function(){}},subscribe:function(){return Gm},getSnapshot:function(){return 0},S:function(){},f:function(){}})[l_]=function(){};var Qw=Promise.prototype.then.bind(Promise.resolve());function Zw(){sd||(sd=Qw(function(){var t;sd=void 0,(t=Ws)==null||t.f()}))}function u_(t){t===void 0&&(t=0),Zw();var e=b.useRef();e.current==null&&(e.current=function(s){var r,i,o,a,l=0,u=de(function(){i=this});return i.c=function(){l=l+1|0,a&&a()},(r={u:s,effect:i,subscribe:function(c){return a=c,function(){l=l+1|0,a=void 0,u()}},getSnapshot:function(){return l},S:function(){if(Ws!=null){var c=Ws.u,h=this.u;c==0&&h==0||c==0&&h==1?(Ws.f(),o=nd(void 0,this)):c==1&&h==0||c==2&&h==0||(o=nd(Ws,this))}else o=nd(void 0,this)},f:function(){o?.(),o=void 0}})[l_]=function(){this.f()},r}(t));var n=e.current;return Ww.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot),n.S(),n}Object.defineProperties(xe.prototype,{$$typeof:{configurable:!0,value:Yw},type:{configurable:!0,value:function(t){var e=t.data,n=u_(1);try{return e.value}finally{n.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function dp(t){return u_(t)}function At(t){return b.useMemo(function(){return te(t)},hp)}function _s(t){var e=b.useRef(t);return e.current=t,b.useMemo(function(){return Ft(function(){return e.current()})},hp)}function Si(t){var e=b.useRef(t);e.current=t,b.useEffect(function(){return de(function(){return e.current()})},hp)}function qt(t,e){var n=t[0]??0;if(typeof n=="number")return typeof t[1]=="number"?e.call(null,n,t[1]):e.call(null,n,n);if(n instanceof xe)return t[1]instanceof xe?e.call(null,n.peek(),t[1].peek()):e.call(null,n.peek(),n.peek());if(n&&"x"in n&&"y"in n)return e.call(null,n.x,n.y);throw new Error("Unknown format")}class ${read=!1;x=0;y=0;*[Symbol.iterator](){yield this.x,yield this.y}[Symbol.toStringTag](){return this.toString()}toString(){return`${this.x} ${this.y}`}get tuple(){return[this.x,this.y]}get size(){return{width:this.x,height:this.y}}get point(){return{x:this.x,y:this.y}}constructor(...e){this.set(...e)}equal(...e){return qt(e,(n,s)=>n===this.x&&s===this.y)}inRect(...e){const[n,s,r,i]=e.reduce((o,a)=>a instanceof $?o.concat(a.x,a.y):o.concat(a),[]);return this.x>=n&&this.y>=s&&this.x<=r+n&&this.y<=i+s}cropMin(...e){return qt(e,(n,s)=>{this.x=Yr(this.x,n),this.y=Yr(this.y,s)}),this}cropMax(...e){return qt(e,(n,s)=>{this.x=Vs(this.x,n),this.y=Vs(this.y,s)}),this}set(...e){return qt(e,(n,s)=>{this.x=n,this.y=s}),this}plus(...e){return qt(e,(n,s)=>{this.x+=n,this.y+=s}),this}minus(...e){return qt(e,(n,s)=>{this.x-=n,this.y-=s}),this}times(...e){return qt(e,(n,s)=>{this.x*=n,this.y*=s}),this}div(...e){return qt(e,(n,s)=>{this.x/=n,this.y/=s}),this}rem(...e){return qt(e,(n,s)=>{this.x=zd(this.x,n),this.y=zd(this.y,s)}),this}rems(...e){return qt(e,(n,s)=>{this.x=$m(this.x,n),this.y=$m(this.y,s)}),this}inverse(){return[this.x,this.y]=[this.y,this.x],this}iters(e,n){return this.x=Qr(this.x,e.x,n),this.y=Qr(this.y,e.y,n),this}sign(){return this.x=Bm(this.x),this.y=Bm(this.y),this}abs(){return this.x=xo(this.x),this.y=xo(this.y),this}clone(){return new $(this)}cplus(...e){return this.clone().plus(...e)}cminus(...e){return this.clone().minus(...e)}ctimes(...e){return this.clone().times(...e)}cdiv(...e){return this.clone().div(...e)}crem(...e){return this.clone().rem(...e)}crems(...e){return this.clone().rems(...e)}cinverse(){return this.clone().inverse()}cnormalize(){return this.clone().normalize()}citers(e,n){return this.clone().iters(e,n)}csign(){return this.clone().sign()}cabs(){return this.clone().abs()}length(){return dw(...this)}distance(...e){return this.cminus(...e).length()}normalize(){return this.div(this.length())}min(){return Vs(...this)}max(){return Yr(...this)}toSignals(e,n){return Ns(()=>(e.value=this.x,n.value=this.y,this))}toRect(...e){return qt(e,(n,s)=>{const r=Vs(this.x,n),i=Vs(this.y,s),o=xo(Yr(this.x,n)-r),a=xo(Yr(this.y,s)-i);return new DOMRect(r,i,o,a)})}static fromAngle(e,n=new this){return n.set(fw(e),hw(e))}static fromPoint(e,n=new this){return n.set(e.x,e.y)}static fromSize(e,n=new this){return n.set(e.width,e.height)}static fromDeltaXY(e,n=new this){return n.set(e.deltaX,e.deltaY)}static fromPageXY(e,n=new this){return n.set(e.pageX,e.pageY)}static fromSignals(e,n,s=new this){return s.set(e.value,n.value)}static fromOffsetXY(e,n=new this){return n.set(e.offsetX,e.offsetY)}static fromOffsetSize(e,n=new this){return n.set(e.offsetWidth,e.offsetHeight)}static fromSvgLength(e,n,s=new this){return s.set(e.baseVal.value,n.baseVal.value)}}const c_=["clearRect","fillRect","strokeRect","arc","arcTo","bezierCurveTo","ellipse","lineTo","moveTo","quadraticCurveTo","rect","roundRect","drawImage","createImageData","getImageData","putImageData","isPointInPath","isPointInStroke","createConicGradient","createLinearGradient","createRadialGradient","fillText","strokeText","scale","setTransform","transform","translate"],Jw=t=>{for(let e=0;e<t.length;e++){const n=t[e];n instanceof $&&(t.splice(e,1,...n),e+=1)}return t},h_=t=>function(...e){return t.apply(this,Jw(e))};{const{prototype:t}=CanvasRenderingContext2D;for(const e of c_)e in t&&Object.assign(t,{[e]:h_(t[e])})}{const{prototype:t}=Path2D;for(const e of c_)e in t&&Object.assign(t,{[e]:h_(t[e])})}(function(t){let e,n,s={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},r=s.w3;for(n in s)if(s[n].enabled in t){e=s[n];break}function i(u,c){let h=new Event(u,{bubbles:!0,cancelable:!1});c.dispatchEvent(h)}function o(u){u.stopPropagation(),u.stopImmediatePropagation(),t[r.enabled]=t[e.enabled],t[r.element]=t[e.element],i(r.events.change,u.target)}function a(u){i(r.events.error,u.target)}function l(u){return function(h,d){if(u===r.exit&&!t[e.element]){setTimeout(()=>{d(new TypeError)},1);return}function p(){h(),t.removeEventListener(e.events.change,p,!1)}function m(){d(new TypeError),t.removeEventListener(e.events.error,m,!1)}t.addEventListener(e.events.change,p,!1),t.addEventListener(e.events.error,m,!1)}}return!(r.enabled in t)&&e&&(t.addEventListener(e.events.change,o,!1),t.addEventListener(e.events.error,a,!1),t[r.enabled]=t[e.enabled],t[r.element]=t[e.element],t[r.exit]=function(){let u=t[e.exit]();return u===void 0&&window.Promise?new Promise(l(r.exit)):u},Element.prototype[r.request]=function(){let u=this[e.request].apply(this,arguments);return u===void 0&&window.Promise?new Promise(l(r.request)):u}),e})(document);var d_={exports:{}},Mt={},f_={exports:{}},p_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,I){var P=D.length;D.push(I);e:for(;0<P;){var V=P-1>>>1,H=D[V];if(0<r(H,I))D[V]=I,D[P]=H,P=V;else break e}}function n(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var I=D[0],P=D.pop();if(P!==I){D[0]=P;e:for(var V=0,H=D.length,Ue=H>>>1;V<Ue;){var Re=2*(V+1)-1,X=D[Re],se=Re+1,je=D[se];if(0>r(X,P))se<H&&0>r(je,X)?(D[V]=je,D[se]=P,V=se):(D[V]=X,D[Re]=P,V=Re);else if(se<H&&0>r(je,P))D[V]=je,D[se]=P,V=se;else break e}}return I}function r(D,I){var P=D.sortIndex-I.sortIndex;return P!==0?P:D.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,p=!1,m=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(D){for(var I=n(u);I!==null;){if(I.callback===null)s(u);else if(I.startTime<=D)s(u),I.sortIndex=I.expirationTime,e(l,I);else break;I=n(u)}}function C(D){if(v=!1,_(D),!m)if(n(l)!==null)m=!0,W(w);else{var I=n(u);I!==null&&B(C,I.startTime-D)}}function w(D,I){m=!1,v&&(v=!1,f(S),S=-1),p=!0;var P=d;try{for(_(I),h=n(l);h!==null&&(!(h.expirationTime>I)||D&&!O());){var V=h.callback;if(typeof V=="function"){h.callback=null,d=h.priorityLevel;var H=V(h.expirationTime<=I);I=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&s(l),_(I)}else s(l);h=n(l)}if(h!==null)var Ue=!0;else{var Re=n(u);Re!==null&&B(C,Re.startTime-I),Ue=!1}return Ue}finally{h=null,d=P,p=!1}}var T=!1,k=null,S=-1,E=5,N=-1;function O(){return!(t.unstable_now()-N<E)}function A(){if(k!==null){var D=t.unstable_now();N=D;var I=!0;try{I=k(!0,D)}finally{I?F():(T=!1,k=null)}}else T=!1}var F;if(typeof g=="function")F=function(){g(A)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,q=L.port2;L.port1.onmessage=A,F=function(){q.postMessage(null)}}else F=function(){x(A,0)};function W(D){k=D,T||(T=!0,F())}function B(D,I){S=x(function(){D(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,W(w))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var P=d;d=I;try{return D()}finally{d=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,I){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var P=d;d=D;try{return I()}finally{d=P}},t.unstable_scheduleCallback=function(D,I,P){var V=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?V+P:V):P=V,D){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=P+H,D={id:c++,callback:I,priorityLevel:D,startTime:P,expirationTime:H,sortIndex:-1},P>V?(D.sortIndex=P,e(u,D),n(l)===null&&D===n(u)&&(v?(f(S),S=-1):v=!0,B(C,P-V))):(D.sortIndex=H,e(l,D),m||p||(m=!0,W(w))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var I=d;return function(){var P=d;d=I;try{return D.apply(this,arguments)}finally{d=P}}}})(p_);f_.exports=p_;var ex=f_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx=b,Dt=ex;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m_=new Set,Wo={};function jr(t,e){Ci(t,e),Ci(t+"Capture",e)}function Ci(t,e){for(Wo[t]=e,t=0;t<e.length;t++)m_.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=Object.prototype.hasOwnProperty,nx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ym={},Xm={};function sx(t){return Bd.call(Xm,t)?!0:Bd.call(Ym,t)?!1:nx.test(t)?Xm[t]=!0:(Ym[t]=!0,!1)}function rx(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ix(t,e,n,s){if(e===null||typeof e>"u"||rx(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var fp=/[\-:]([a-z])/g;function pp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fp,pp);Xe[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fp,pp);Xe[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fp,pp);Xe[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function mp(t,e,n,s){var r=Xe.hasOwnProperty(e)?Xe[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ix(e,n,r,s)&&(n=null),s||r===null?sx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var zn=tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ru=Symbol.for("react.element"),Zr=Symbol.for("react.portal"),Jr=Symbol.for("react.fragment"),gp=Symbol.for("react.strict_mode"),$d=Symbol.for("react.profiler"),g_=Symbol.for("react.provider"),v_=Symbol.for("react.context"),vp=Symbol.for("react.forward_ref"),Ud=Symbol.for("react.suspense"),qd=Symbol.for("react.suspense_list"),_p=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),__=Symbol.for("react.offscreen"),Qm=Symbol.iterator;function fo(t){return t===null||typeof t!="object"?null:(t=Qm&&t[Qm]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,rd;function So(t){if(rd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rd=e&&e[1]||""}return`
`+rd+t}var id=!1;function od(t,e){if(!t||id)return"";id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{id=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?So(t):""}function ox(t){switch(t.tag){case 5:return So(t.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return t=od(t.type,!1),t;case 11:return t=od(t.type.render,!1),t;case 1:return t=od(t.type,!0),t;default:return""}}function Hd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jr:return"Fragment";case Zr:return"Portal";case $d:return"Profiler";case gp:return"StrictMode";case Ud:return"Suspense";case qd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case v_:return(t.displayName||"Context")+".Consumer";case g_:return(t._context.displayName||"Context")+".Provider";case vp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _p:return e=t.displayName||null,e!==null?e:Hd(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return Hd(t(e))}catch{}}return null}function ax(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hd(e);case 8:return e===gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lx(t){var e=y_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Iu(t){t._valueTracker||(t._valueTracker=lx(t))}function w_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=y_(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function yc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gd(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zm(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=ys(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x_(t,e){e=e.checked,e!=null&&mp(t,"checked",e,!1)}function Kd(t,e){x_(t,e);var n=ys(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yd(t,e.type,ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yd(t,e,n){(e!=="number"||yc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Co=Array.isArray;function di(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+ys(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Xd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Co(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ys(n)}}function S_(t,e){var n=ys(e.value),s=ys(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function tg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function C_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?C_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pu,T_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pu=Pu||document.createElement("div"),Pu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ux=["Webkit","ms","Moz","O"];Object.keys(Ao).forEach(function(t){ux.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ao[e]=Ao[t]})});function k_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ao.hasOwnProperty(t)&&Ao[t]?(""+e).trim():e+"px"}function N_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=k_(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var cx=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zd(t,e){if(e){if(cx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Jd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=null;function yp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tf=null,fi=null,pi=null;function ng(t){if(t=Da(t)){if(typeof tf!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Th(e),tf(t.stateNode,t.type,e))}}function E_(t){fi?pi?pi.push(t):pi=[t]:fi=t}function A_(){if(fi){var t=fi,e=pi;if(pi=fi=null,ng(t),e)for(t=0;t<e.length;t++)ng(e[t])}}function O_(t,e){return t(e)}function D_(){}var ad=!1;function M_(t,e,n){if(ad)return t(e,n);ad=!0;try{return O_(t,e,n)}finally{ad=!1,(fi!==null||pi!==null)&&(D_(),A_())}}function $o(t,e){var n=t.stateNode;if(n===null)return null;var s=Th(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var nf=!1;if(bn)try{var po={};Object.defineProperty(po,"passive",{get:function(){nf=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{nf=!1}function hx(t,e,n,s,r,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Oo=!1,wc=null,xc=!1,sf=null,dx={onError:function(t){Oo=!0,wc=t}};function fx(t,e,n,s,r,i,o,a,l){Oo=!1,wc=null,hx.apply(dx,arguments)}function px(t,e,n,s,r,i,o,a,l){if(fx.apply(this,arguments),Oo){if(Oo){var u=wc;Oo=!1,wc=null}else throw Error(M(198));xc||(xc=!0,sf=u)}}function Vr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function R_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sg(t){if(Vr(t)!==t)throw Error(M(188))}function mx(t){var e=t.alternate;if(!e){if(e=Vr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return sg(r),t;if(i===s)return sg(r),e;i=i.sibling}throw Error(M(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==s)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function I_(t){return t=mx(t),t!==null?P_(t):null}function P_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P_(t);if(e!==null)return e;t=t.sibling}return null}var b_=Dt.unstable_scheduleCallback,rg=Dt.unstable_cancelCallback,gx=Dt.unstable_shouldYield,vx=Dt.unstable_requestPaint,Pe=Dt.unstable_now,_x=Dt.unstable_getCurrentPriorityLevel,wp=Dt.unstable_ImmediatePriority,F_=Dt.unstable_UserBlockingPriority,Sc=Dt.unstable_NormalPriority,yx=Dt.unstable_LowPriority,L_=Dt.unstable_IdlePriority,wh=null,fn=null;function wx(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(wh,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Cx,xx=Math.log,Sx=Math.LN2;function Cx(t){return t>>>=0,t===0?32:31-(xx(t)/Sx|0)|0}var bu=64,Fu=4194304;function To(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cc(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=To(a):(i&=o,i!==0&&(s=To(i)))}else o=n&~r,o!==0?s=To(o):i!==0&&(s=To(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Jt(e),r=1<<n,s|=t[n],e&=~r;return s}function Tx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kx(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Jt(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=Tx(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function rf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function j_(){var t=bu;return bu<<=1,!(bu&4194240)&&(bu=64),t}function ld(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Aa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=n}function Nx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Jt(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function xp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Jt(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var ae=0;function V_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var z_,Sp,W_,B_,$_,of=!1,Lu=[],us=null,cs=null,hs=null,Uo=new Map,qo=new Map,ts=[],Ex="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ig(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":Uo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(e.pointerId)}}function mo(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Da(e),e!==null&&Sp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Ax(t,e,n,s,r){switch(e){case"focusin":return us=mo(us,t,e,n,s,r),!0;case"dragenter":return cs=mo(cs,t,e,n,s,r),!0;case"mouseover":return hs=mo(hs,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Uo.set(i,mo(Uo.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,qo.set(i,mo(qo.get(i)||null,t,e,n,s,r)),!0}return!1}function U_(t){var e=Bs(t.target);if(e!==null){var n=Vr(e);if(n!==null){if(e=n.tag,e===13){if(e=R_(n),e!==null){t.blockedOn=e,$_(t.priority,function(){W_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=af(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);ef=s,n.target.dispatchEvent(s),ef=null}else return e=Da(n),e!==null&&Sp(e),t.blockedOn=n,!1;e.shift()}return!0}function og(t,e,n){sc(t)&&n.delete(e)}function Ox(){of=!1,us!==null&&sc(us)&&(us=null),cs!==null&&sc(cs)&&(cs=null),hs!==null&&sc(hs)&&(hs=null),Uo.forEach(og),qo.forEach(og)}function go(t,e){t.blockedOn===e&&(t.blockedOn=null,of||(of=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,Ox)))}function Ho(t){function e(r){return go(r,t)}if(0<Lu.length){go(Lu[0],t);for(var n=1;n<Lu.length;n++){var s=Lu[n];s.blockedOn===t&&(s.blockedOn=null)}}for(us!==null&&go(us,t),cs!==null&&go(cs,t),hs!==null&&go(hs,t),Uo.forEach(e),qo.forEach(e),n=0;n<ts.length;n++)s=ts[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<ts.length&&(n=ts[0],n.blockedOn===null);)U_(n),n.blockedOn===null&&ts.shift()}var mi=zn.ReactCurrentBatchConfig,Tc=!0;function Dx(t,e,n,s){var r=ae,i=mi.transition;mi.transition=null;try{ae=1,Cp(t,e,n,s)}finally{ae=r,mi.transition=i}}function Mx(t,e,n,s){var r=ae,i=mi.transition;mi.transition=null;try{ae=4,Cp(t,e,n,s)}finally{ae=r,mi.transition=i}}function Cp(t,e,n,s){if(Tc){var r=af(t,e,n,s);if(r===null)_d(t,e,s,kc,n),ig(t,s);else if(Ax(r,t,e,n,s))s.stopPropagation();else if(ig(t,s),e&4&&-1<Ex.indexOf(t)){for(;r!==null;){var i=Da(r);if(i!==null&&z_(i),i=af(t,e,n,s),i===null&&_d(t,e,s,kc,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else _d(t,e,s,null,n)}}var kc=null;function af(t,e,n,s){if(kc=null,t=yp(s),t=Bs(t),t!==null)if(e=Vr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=R_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kc=t,null}function q_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_x()){case wp:return 1;case F_:return 4;case Sc:case yx:return 16;case L_:return 536870912;default:return 16}default:return 16}}var ss=null,Tp=null,rc=null;function H_(){if(rc)return rc;var t,e=Tp,n=e.length,s,r="value"in ss?ss.value:ss.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return rc=r.slice(t,1<s?1-s:void 0)}function ic(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ju(){return!0}function ag(){return!1}function Rt(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ju:ag,this.isPropagationStopped=ag,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ju)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ju)},persist:function(){},isPersistent:ju}),e}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kp=Rt(Hi),Oa=Ee({},Hi,{view:0,detail:0}),Rx=Rt(Oa),ud,cd,vo,xh=Ee({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vo&&(vo&&t.type==="mousemove"?(ud=t.screenX-vo.screenX,cd=t.screenY-vo.screenY):cd=ud=0,vo=t),ud)},movementY:function(t){return"movementY"in t?t.movementY:cd}}),lg=Rt(xh),Ix=Ee({},xh,{dataTransfer:0}),Px=Rt(Ix),bx=Ee({},Oa,{relatedTarget:0}),hd=Rt(bx),Fx=Ee({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Lx=Rt(Fx),jx=Ee({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vx=Rt(jx),zx=Ee({},Hi,{data:0}),ug=Rt(zx),Wx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ux(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$x[t])?!!e[t]:!1}function Np(){return Ux}var qx=Ee({},Oa,{key:function(t){if(t.key){var e=Wx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ic(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Np,charCode:function(t){return t.type==="keypress"?ic(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ic(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hx=Rt(qx),Gx=Ee({},xh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cg=Rt(Gx),Kx=Ee({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Np}),Yx=Rt(Kx),Xx=Ee({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qx=Rt(Xx),Zx=Ee({},xh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jx=Rt(Zx),eS=[9,13,27,32],Ep=bn&&"CompositionEvent"in window,Do=null;bn&&"documentMode"in document&&(Do=document.documentMode);var tS=bn&&"TextEvent"in window&&!Do,G_=bn&&(!Ep||Do&&8<Do&&11>=Do),hg=" ",dg=!1;function K_(t,e){switch(t){case"keyup":return eS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ei=!1;function nS(t,e){switch(t){case"compositionend":return Y_(e);case"keypress":return e.which!==32?null:(dg=!0,hg);case"textInput":return t=e.data,t===hg&&dg?null:t;default:return null}}function sS(t,e){if(ei)return t==="compositionend"||!Ep&&K_(t,e)?(t=H_(),rc=Tp=ss=null,ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G_&&e.locale!=="ko"?null:e.data;default:return null}}var rS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rS[t.type]:e==="textarea"}function X_(t,e,n,s){E_(s),e=Nc(e,"onChange"),0<e.length&&(n=new kp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Mo=null,Go=null;function iS(t){ay(t,0)}function Sh(t){var e=si(t);if(w_(e))return t}function oS(t,e){if(t==="change")return e}var Q_=!1;if(bn){var dd;if(bn){var fd="oninput"in document;if(!fd){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),fd=typeof pg.oninput=="function"}dd=fd}else dd=!1;Q_=dd&&(!document.documentMode||9<document.documentMode)}function mg(){Mo&&(Mo.detachEvent("onpropertychange",Z_),Go=Mo=null)}function Z_(t){if(t.propertyName==="value"&&Sh(Go)){var e=[];X_(e,Go,t,yp(t)),M_(iS,e)}}function aS(t,e,n){t==="focusin"?(mg(),Mo=e,Go=n,Mo.attachEvent("onpropertychange",Z_)):t==="focusout"&&mg()}function lS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sh(Go)}function uS(t,e){if(t==="click")return Sh(e)}function cS(t,e){if(t==="input"||t==="change")return Sh(e)}function hS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:hS;function Ko(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Bd.call(e,r)||!nn(t[r],e[r]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vg(t,e){var n=gg(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gg(n)}}function J_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?J_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ey(){for(var t=window,e=yc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yc(t.document)}return e}function Ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dS(t){var e=ey(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&J_(n.ownerDocument.documentElement,n)){if(s!==null&&Ap(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=vg(n,i);var o=vg(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fS=bn&&"documentMode"in document&&11>=document.documentMode,ti=null,lf=null,Ro=null,uf=!1;function _g(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uf||ti==null||ti!==yc(s)||(s=ti,"selectionStart"in s&&Ap(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ro&&Ko(Ro,s)||(Ro=s,s=Nc(lf,"onSelect"),0<s.length&&(e=new kp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=ti)))}function Vu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ni={animationend:Vu("Animation","AnimationEnd"),animationiteration:Vu("Animation","AnimationIteration"),animationstart:Vu("Animation","AnimationStart"),transitionend:Vu("Transition","TransitionEnd")},pd={},ty={};bn&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function Ch(t){if(pd[t])return pd[t];if(!ni[t])return t;var e=ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ty)return pd[t]=e[n];return t}var ny=Ch("animationend"),sy=Ch("animationiteration"),ry=Ch("animationstart"),iy=Ch("transitionend"),oy=new Map,yg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){oy.set(t,e),jr(e,[t])}for(var md=0;md<yg.length;md++){var gd=yg[md],pS=gd.toLowerCase(),mS=gd[0].toUpperCase()+gd.slice(1);Es(pS,"on"+mS)}Es(ny,"onAnimationEnd");Es(sy,"onAnimationIteration");Es(ry,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(iy,"onTransitionEnd");Ci("onMouseEnter",["mouseout","mouseover"]);Ci("onMouseLeave",["mouseout","mouseover"]);Ci("onPointerEnter",["pointerout","pointerover"]);Ci("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function wg(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,px(s,e,void 0,t),t.currentTarget=null}function ay(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;wg(r,a,u),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;wg(r,a,u),i=l}}}if(xc)throw t=sf,xc=!1,sf=null,t}function me(t,e){var n=e[pf];n===void 0&&(n=e[pf]=new Set);var s=t+"__bubble";n.has(s)||(ly(e,t,2,!1),n.add(s))}function vd(t,e,n){var s=0;e&&(s|=4),ly(n,t,s,e)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Yo(t){if(!t[zu]){t[zu]=!0,m_.forEach(function(n){n!=="selectionchange"&&(gS.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zu]||(e[zu]=!0,vd("selectionchange",!1,e))}}function ly(t,e,n,s){switch(q_(e)){case 1:var r=Dx;break;case 4:r=Mx;break;default:r=Cp}n=r.bind(null,e,n,t),r=void 0,!nf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function _d(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Bs(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}M_(function(){var u=i,c=yp(n),h=[];e:{var d=oy.get(t);if(d!==void 0){var p=kp,m=t;switch(t){case"keypress":if(ic(n)===0)break e;case"keydown":case"keyup":p=Hx;break;case"focusin":m="focus",p=hd;break;case"focusout":m="blur",p=hd;break;case"beforeblur":case"afterblur":p=hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Px;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Yx;break;case ny:case sy:case ry:p=Lx;break;case iy:p=Qx;break;case"scroll":p=Rx;break;case"wheel":p=Jx;break;case"copy":case"cut":case"paste":p=Vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=cg}var v=(e&4)!==0,x=!v&&t==="scroll",f=v?d!==null?d+"Capture":null:d;v=[];for(var g=u,_;g!==null;){_=g;var C=_.stateNode;if(_.tag===5&&C!==null&&(_=C,f!==null&&(C=$o(g,f),C!=null&&v.push(Xo(g,C,_)))),x)break;g=g.return}0<v.length&&(d=new p(d,m,null,n,c),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==ef&&(m=n.relatedTarget||n.fromElement)&&(Bs(m)||m[Fn]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?Bs(m):null,m!==null&&(x=Vr(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=lg,C="onMouseLeave",f="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=cg,C="onPointerLeave",f="onPointerEnter",g="pointer"),x=p==null?d:si(p),_=m==null?d:si(m),d=new v(C,g+"leave",p,n,c),d.target=x,d.relatedTarget=_,C=null,Bs(c)===u&&(v=new v(f,g+"enter",m,n,c),v.target=_,v.relatedTarget=x,C=v),x=C,p&&m)t:{for(v=p,f=m,g=0,_=v;_;_=Gr(_))g++;for(_=0,C=f;C;C=Gr(C))_++;for(;0<g-_;)v=Gr(v),g--;for(;0<_-g;)f=Gr(f),_--;for(;g--;){if(v===f||f!==null&&v===f.alternate)break t;v=Gr(v),f=Gr(f)}v=null}else v=null;p!==null&&xg(h,d,p,v,!1),m!==null&&x!==null&&xg(h,x,m,v,!0)}}e:{if(d=u?si(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var w=oS;else if(fg(d))if(Q_)w=cS;else{w=lS;var T=aS}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=uS);if(w&&(w=w(t,u))){X_(h,w,n,c);break e}T&&T(t,d,u),t==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&Yd(d,"number",d.value)}switch(T=u?si(u):window,t){case"focusin":(fg(T)||T.contentEditable==="true")&&(ti=T,lf=u,Ro=null);break;case"focusout":Ro=lf=ti=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,_g(h,n,c);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":_g(h,n,c)}var k;if(Ep)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ei?K_(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(G_&&n.locale!=="ko"&&(ei||S!=="onCompositionStart"?S==="onCompositionEnd"&&ei&&(k=H_()):(ss=c,Tp="value"in ss?ss.value:ss.textContent,ei=!0)),T=Nc(u,S),0<T.length&&(S=new ug(S,t,null,n,c),h.push({event:S,listeners:T}),k?S.data=k:(k=Y_(n),k!==null&&(S.data=k)))),(k=tS?nS(t,n):sS(t,n))&&(u=Nc(u,"onBeforeInput"),0<u.length&&(c=new ug("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=k))}ay(h,e)})}function Xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nc(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=$o(t,n),i!=null&&s.unshift(Xo(t,i,r)),i=$o(t,e),i!=null&&s.push(Xo(t,i,r))),t=t.return}return s}function Gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xg(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,r?(l=$o(n,i),l!=null&&o.unshift(Xo(n,l,a))):r||(l=$o(n,i),l!=null&&o.push(Xo(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vS=/\r\n?/g,_S=/\u0000|\uFFFD/g;function Sg(t){return(typeof t=="string"?t:""+t).replace(vS,`
`).replace(_S,"")}function Wu(t,e,n){if(e=Sg(e),Sg(t)!==e&&n)throw Error(M(425))}function Ec(){}var cf=null,hf=null;function df(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ff=typeof setTimeout=="function"?setTimeout:void 0,yS=typeof clearTimeout=="function"?clearTimeout:void 0,Cg=typeof Promise=="function"?Promise:void 0,wS=typeof queueMicrotask=="function"?queueMicrotask:typeof Cg<"u"?function(t){return Cg.resolve(null).then(t).catch(xS)}:ff;function xS(t){setTimeout(function(){throw t})}function yd(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Ho(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Ho(e)}function ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),dn="__reactFiber$"+Gi,Qo="__reactProps$"+Gi,Fn="__reactContainer$"+Gi,pf="__reactEvents$"+Gi,SS="__reactListeners$"+Gi,CS="__reactHandles$"+Gi;function Bs(t){var e=t[dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fn]||n[dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tg(t);t!==null;){if(n=t[dn])return n;t=Tg(t)}return e}t=n,n=t.parentNode}return null}function Da(t){return t=t[dn]||t[Fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Th(t){return t[Qo]||null}var mf=[],ri=-1;function As(t){return{current:t}}function ge(t){0>ri||(t.current=mf[ri],mf[ri]=null,ri--)}function fe(t,e){ri++,mf[ri]=t.current,t.current=e}var ws={},st=As(ws),wt=As(!1),Zs=ws;function Ti(t,e){var n=t.type.contextTypes;if(!n)return ws;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function xt(t){return t=t.childContextTypes,t!=null}function Ac(){ge(wt),ge(st)}function kg(t,e,n){if(st.current!==ws)throw Error(M(168));fe(st,e),fe(wt,n)}function uy(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(M(108,ax(t)||"Unknown",r));return Ee({},n,s)}function Oc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ws,Zs=st.current,fe(st,t),fe(wt,wt.current),!0}function Ng(t,e,n){var s=t.stateNode;if(!s)throw Error(M(169));n?(t=uy(t,e,Zs),s.__reactInternalMemoizedMergedChildContext=t,ge(wt),ge(st),fe(st,t)):ge(wt),fe(wt,n)}var Nn=null,kh=!1,wd=!1;function cy(t){Nn===null?Nn=[t]:Nn.push(t)}function TS(t){kh=!0,cy(t)}function Os(){if(!wd&&Nn!==null){wd=!0;var t=0,e=ae;try{var n=Nn;for(ae=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Nn=null,kh=!1}catch(r){throw Nn!==null&&(Nn=Nn.slice(t+1)),b_(wp,Os),r}finally{ae=e,wd=!1}}return null}var ii=[],oi=0,Dc=null,Mc=0,Pt=[],bt=0,Js=null,Mn=1,Rn="";function Ls(t,e){ii[oi++]=Mc,ii[oi++]=Dc,Dc=t,Mc=e}function hy(t,e,n){Pt[bt++]=Mn,Pt[bt++]=Rn,Pt[bt++]=Js,Js=t;var s=Mn;t=Rn;var r=32-Jt(s)-1;s&=~(1<<r),n+=1;var i=32-Jt(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Mn=1<<32-Jt(e)+r|n<<r|s,Rn=i+t}else Mn=1<<i|n<<r|s,Rn=t}function Op(t){t.return!==null&&(Ls(t,1),hy(t,1,0))}function Dp(t){for(;t===Dc;)Dc=ii[--oi],ii[oi]=null,Mc=ii[--oi],ii[oi]=null;for(;t===Js;)Js=Pt[--bt],Pt[bt]=null,Rn=Pt[--bt],Pt[bt]=null,Mn=Pt[--bt],Pt[bt]=null}var Ot=null,Et=null,we=!1,Yt=null;function dy(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Eg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Et=ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Js!==null?{id:Mn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Et=null,!0):!1;default:return!1}}function gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vf(t){if(we){var e=Et;if(e){var n=e;if(!Eg(t,e)){if(gf(t))throw Error(M(418));e=ds(n.nextSibling);var s=Ot;e&&Eg(t,e)?dy(s,n):(t.flags=t.flags&-4097|2,we=!1,Ot=t)}}else{if(gf(t))throw Error(M(418));t.flags=t.flags&-4097|2,we=!1,Ot=t}}}function Ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function Bu(t){if(t!==Ot)return!1;if(!we)return Ag(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!df(t.type,t.memoizedProps)),e&&(e=Et)){if(gf(t))throw fy(),Error(M(418));for(;e;)dy(t,e),e=ds(e.nextSibling)}if(Ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=ds(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=Ot?ds(t.stateNode.nextSibling):null;return!0}function fy(){for(var t=Et;t;)t=ds(t.nextSibling)}function ki(){Et=Ot=null,we=!1}function Mp(t){Yt===null?Yt=[t]:Yt.push(t)}var kS=zn.ReactCurrentBatchConfig;function _o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var s=n.stateNode}if(!s)throw Error(M(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function $u(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Og(t){var e=t._init;return e(t._payload)}function py(t){function e(f,g){if(t){var _=f.deletions;_===null?(f.deletions=[g],f.flags|=16):_.push(g)}}function n(f,g){if(!t)return null;for(;g!==null;)e(f,g),g=g.sibling;return null}function s(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function r(f,g){return f=gs(f,g),f.index=0,f.sibling=null,f}function i(f,g,_){return f.index=_,t?(_=f.alternate,_!==null?(_=_.index,_<g?(f.flags|=2,g):_):(f.flags|=2,g)):(f.flags|=1048576,g)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,g,_,C){return g===null||g.tag!==6?(g=Ed(_,f.mode,C),g.return=f,g):(g=r(g,_),g.return=f,g)}function l(f,g,_,C){var w=_.type;return w===Jr?c(f,g,_.props.children,C,_.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Xn&&Og(w)===g.type)?(C=r(g,_.props),C.ref=_o(f,g,_),C.return=f,C):(C=dc(_.type,_.key,_.props,null,f.mode,C),C.ref=_o(f,g,_),C.return=f,C)}function u(f,g,_,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=Ad(_,f.mode,C),g.return=f,g):(g=r(g,_.children||[]),g.return=f,g)}function c(f,g,_,C,w){return g===null||g.tag!==7?(g=Ks(_,f.mode,C,w),g.return=f,g):(g=r(g,_),g.return=f,g)}function h(f,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ed(""+g,f.mode,_),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ru:return _=dc(g.type,g.key,g.props,null,f.mode,_),_.ref=_o(f,null,g),_.return=f,_;case Zr:return g=Ad(g,f.mode,_),g.return=f,g;case Xn:var C=g._init;return h(f,C(g._payload),_)}if(Co(g)||fo(g))return g=Ks(g,f.mode,_,null),g.return=f,g;$u(f,g)}return null}function d(f,g,_,C){var w=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:a(f,g,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ru:return _.key===w?l(f,g,_,C):null;case Zr:return _.key===w?u(f,g,_,C):null;case Xn:return w=_._init,d(f,g,w(_._payload),C)}if(Co(_)||fo(_))return w!==null?null:c(f,g,_,C,null);$u(f,_)}return null}function p(f,g,_,C,w){if(typeof C=="string"&&C!==""||typeof C=="number")return f=f.get(_)||null,a(g,f,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ru:return f=f.get(C.key===null?_:C.key)||null,l(g,f,C,w);case Zr:return f=f.get(C.key===null?_:C.key)||null,u(g,f,C,w);case Xn:var T=C._init;return p(f,g,_,T(C._payload),w)}if(Co(C)||fo(C))return f=f.get(_)||null,c(g,f,C,w,null);$u(g,C)}return null}function m(f,g,_,C){for(var w=null,T=null,k=g,S=g=0,E=null;k!==null&&S<_.length;S++){k.index>S?(E=k,k=null):E=k.sibling;var N=d(f,k,_[S],C);if(N===null){k===null&&(k=E);break}t&&k&&N.alternate===null&&e(f,k),g=i(N,g,S),T===null?w=N:T.sibling=N,T=N,k=E}if(S===_.length)return n(f,k),we&&Ls(f,S),w;if(k===null){for(;S<_.length;S++)k=h(f,_[S],C),k!==null&&(g=i(k,g,S),T===null?w=k:T.sibling=k,T=k);return we&&Ls(f,S),w}for(k=s(f,k);S<_.length;S++)E=p(k,f,S,_[S],C),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?S:E.key),g=i(E,g,S),T===null?w=E:T.sibling=E,T=E);return t&&k.forEach(function(O){return e(f,O)}),we&&Ls(f,S),w}function v(f,g,_,C){var w=fo(_);if(typeof w!="function")throw Error(M(150));if(_=w.call(_),_==null)throw Error(M(151));for(var T=w=null,k=g,S=g=0,E=null,N=_.next();k!==null&&!N.done;S++,N=_.next()){k.index>S?(E=k,k=null):E=k.sibling;var O=d(f,k,N.value,C);if(O===null){k===null&&(k=E);break}t&&k&&O.alternate===null&&e(f,k),g=i(O,g,S),T===null?w=O:T.sibling=O,T=O,k=E}if(N.done)return n(f,k),we&&Ls(f,S),w;if(k===null){for(;!N.done;S++,N=_.next())N=h(f,N.value,C),N!==null&&(g=i(N,g,S),T===null?w=N:T.sibling=N,T=N);return we&&Ls(f,S),w}for(k=s(f,k);!N.done;S++,N=_.next())N=p(k,f,S,N.value,C),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?S:N.key),g=i(N,g,S),T===null?w=N:T.sibling=N,T=N);return t&&k.forEach(function(A){return e(f,A)}),we&&Ls(f,S),w}function x(f,g,_,C){if(typeof _=="object"&&_!==null&&_.type===Jr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ru:e:{for(var w=_.key,T=g;T!==null;){if(T.key===w){if(w=_.type,w===Jr){if(T.tag===7){n(f,T.sibling),g=r(T,_.props.children),g.return=f,f=g;break e}}else if(T.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Xn&&Og(w)===T.type){n(f,T.sibling),g=r(T,_.props),g.ref=_o(f,T,_),g.return=f,f=g;break e}n(f,T);break}else e(f,T);T=T.sibling}_.type===Jr?(g=Ks(_.props.children,f.mode,C,_.key),g.return=f,f=g):(C=dc(_.type,_.key,_.props,null,f.mode,C),C.ref=_o(f,g,_),C.return=f,f=C)}return o(f);case Zr:e:{for(T=_.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(f,g.sibling),g=r(g,_.children||[]),g.return=f,f=g;break e}else{n(f,g);break}else e(f,g);g=g.sibling}g=Ad(_,f.mode,C),g.return=f,f=g}return o(f);case Xn:return T=_._init,x(f,g,T(_._payload),C)}if(Co(_))return m(f,g,_,C);if(fo(_))return v(f,g,_,C);$u(f,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(f,g.sibling),g=r(g,_),g.return=f,f=g):(n(f,g),g=Ed(_,f.mode,C),g.return=f,f=g),o(f)):n(f,g)}return x}var Ni=py(!0),my=py(!1),Rc=As(null),Ic=null,ai=null,Rp=null;function Ip(){Rp=ai=Ic=null}function Pp(t){var e=Rc.current;ge(Rc),t._currentValue=e}function _f(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function gi(t,e){Ic=t,Rp=ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yt=!0),t.firstContext=null)}function Bt(t){var e=t._currentValue;if(Rp!==t)if(t={context:t,memoizedValue:e,next:null},ai===null){if(Ic===null)throw Error(M(308));ai=t,Ic.dependencies={lanes:0,firstContext:t}}else ai=ai.next=t;return e}var $s=null;function bp(t){$s===null?$s=[t]:$s.push(t)}function gy(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,bp(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ln(t,s)}function Ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qn=!1;function Fp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fs(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ne&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Ln(t,n)}return r=s.interleaved,r===null?(e.next=e,bp(s)):(e.next=r.next,r.next=e),s.interleaved=e,Ln(t,n)}function oc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,xp(t,n)}}function Dg(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pc(t,e,n,s){var r=t.updateQueue;Qn=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=r.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,p=a.eventTime;if((s&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(d=e,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(p,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(p,h,d):m,d==null)break e;h=Ee({},h,d);break e;case 2:Qn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);tr|=o,t.lanes=o,t.memoizedState=h}}function Mg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(M(191,r));r.call(s)}}}var Ma={},pn=As(Ma),Zo=As(Ma),Jo=As(Ma);function Us(t){if(t===Ma)throw Error(M(174));return t}function Lp(t,e){switch(fe(Jo,e),fe(Zo,t),fe(pn,Ma),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qd(e,t)}ge(pn),fe(pn,e)}function Ei(){ge(pn),ge(Zo),ge(Jo)}function _y(t){Us(Jo.current);var e=Us(pn.current),n=Qd(e,t.type);e!==n&&(fe(Zo,t),fe(pn,n))}function jp(t){Zo.current===t&&(ge(pn),ge(Zo))}var Te=As(0);function bc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xd=[];function Vp(){for(var t=0;t<xd.length;t++)xd[t]._workInProgressVersionPrimary=null;xd.length=0}var ac=zn.ReactCurrentDispatcher,Sd=zn.ReactCurrentBatchConfig,er=0,ke=null,We=null,qe=null,Fc=!1,Io=!1,ea=0,NS=0;function Ze(){throw Error(M(321))}function zp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function Wp(t,e,n,s,r,i){if(er=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ac.current=t===null||t.memoizedState===null?DS:MS,t=n(s,r),Io){i=0;do{if(Io=!1,ea=0,25<=i)throw Error(M(301));i+=1,qe=We=null,e.updateQueue=null,ac.current=RS,t=n(s,r)}while(Io)}if(ac.current=Lc,e=We!==null&&We.next!==null,er=0,qe=We=ke=null,Fc=!1,e)throw Error(M(300));return t}function Bp(){var t=ea!==0;return ea=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?ke.memoizedState=qe=t:qe=qe.next=t,qe}function $t(){if(We===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=qe===null?ke.memoizedState:qe.next;if(e!==null)qe=e,We=t;else{if(t===null)throw Error(M(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},qe===null?ke.memoizedState=qe=t:qe=qe.next=t}return qe}function ta(t,e){return typeof e=="function"?e(t):e}function Cd(t){var e=$t(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var s=We,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((er&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=s):l=l.next=h,ke.lanes|=c,tr|=c}u=u.next}while(u!==null&&u!==i);l===null?o=s:l.next=a,nn(s,e.memoizedState)||(yt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,ke.lanes|=i,tr|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Td(t){var e=$t(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);nn(i,e.memoizedState)||(yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function yy(){}function wy(t,e){var n=ke,s=$t(),r=e(),i=!nn(s.memoizedState,r);if(i&&(s.memoizedState=r,yt=!0),s=s.queue,$p(Cy.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,na(9,Sy.bind(null,n,s,r,e),void 0,null),He===null)throw Error(M(349));er&30||xy(n,e,r)}return r}function xy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sy(t,e,n,s){e.value=n,e.getSnapshot=s,Ty(e)&&ky(t)}function Cy(t,e,n){return n(function(){Ty(e)&&ky(t)})}function Ty(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function ky(t){var e=Ln(t,1);e!==null&&en(e,t,1,-1)}function Rg(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:t},e.queue=t,t=t.dispatch=OS.bind(null,ke,t),[e.memoizedState,t]}function na(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Ny(){return $t().memoizedState}function lc(t,e,n,s){var r=hn();ke.flags|=t,r.memoizedState=na(1|e,n,void 0,s===void 0?null:s)}function Nh(t,e,n,s){var r=$t();s=s===void 0?null:s;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,s!==null&&zp(s,o.deps)){r.memoizedState=na(e,n,i,s);return}}ke.flags|=t,r.memoizedState=na(1|e,n,i,s)}function Ig(t,e){return lc(8390656,8,t,e)}function $p(t,e){return Nh(2048,8,t,e)}function Ey(t,e){return Nh(4,2,t,e)}function Ay(t,e){return Nh(4,4,t,e)}function Oy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dy(t,e,n){return n=n!=null?n.concat([t]):null,Nh(4,4,Oy.bind(null,e,t),n)}function Up(){}function My(t,e){var n=$t();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&zp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Ry(t,e){var n=$t();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&zp(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Iy(t,e,n){return er&21?(nn(n,e)||(n=j_(),ke.lanes|=n,tr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yt=!0),t.memoizedState=n)}function ES(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var s=Sd.transition;Sd.transition={};try{t(!1),e()}finally{ae=n,Sd.transition=s}}function Py(){return $t().memoizedState}function AS(t,e,n){var s=ms(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},by(t))Fy(e,n);else if(n=gy(t,e,n,s),n!==null){var r=lt();en(n,t,s,r),Ly(n,e,s)}}function OS(t,e,n){var s=ms(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(by(t))Fy(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,nn(a,o)){var l=e.interleaved;l===null?(r.next=r,bp(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=gy(t,e,r,s),n!==null&&(r=lt(),en(n,t,s,r),Ly(n,e,s))}}function by(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function Fy(t,e){Io=Fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ly(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,xp(t,n)}}var Lc={readContext:Bt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},DS={readContext:Bt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:Ig,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lc(4194308,4,Oy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return lc(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=hn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=AS.bind(null,ke,t),[s.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:Rg,useDebugValue:Up,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=Rg(!1),e=t[0];return t=ES.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=ke,r=hn();if(we){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),He===null)throw Error(M(349));er&30||xy(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Ig(Cy.bind(null,s,i,t),[t]),s.flags|=2048,na(9,Sy.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=He.identifierPrefix;if(we){var n=Rn,s=Mn;n=(s&~(1<<32-Jt(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=ea++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MS={readContext:Bt,useCallback:My,useContext:Bt,useEffect:$p,useImperativeHandle:Dy,useInsertionEffect:Ey,useLayoutEffect:Ay,useMemo:Ry,useReducer:Cd,useRef:Ny,useState:function(){return Cd(ta)},useDebugValue:Up,useDeferredValue:function(t){var e=$t();return Iy(e,We.memoizedState,t)},useTransition:function(){var t=Cd(ta)[0],e=$t().memoizedState;return[t,e]},useMutableSource:yy,useSyncExternalStore:wy,useId:Py,unstable_isNewReconciler:!1},RS={readContext:Bt,useCallback:My,useContext:Bt,useEffect:$p,useImperativeHandle:Dy,useInsertionEffect:Ey,useLayoutEffect:Ay,useMemo:Ry,useReducer:Td,useRef:Ny,useState:function(){return Td(ta)},useDebugValue:Up,useDeferredValue:function(t){var e=$t();return We===null?e.memoizedState=t:Iy(e,We.memoizedState,t)},useTransition:function(){var t=Td(ta)[0],e=$t().memoizedState;return[t,e]},useMutableSource:yy,useSyncExternalStore:wy,useId:Py,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yf(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eh={isMounted:function(t){return(t=t._reactInternals)?Vr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=lt(),r=ms(t),i=In(s,r);i.payload=e,n!=null&&(i.callback=n),e=fs(t,i,r),e!==null&&(en(e,t,r,s),oc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=lt(),r=ms(t),i=In(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fs(t,i,r),e!==null&&(en(e,t,r,s),oc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),s=ms(t),r=In(n,s);r.tag=2,e!=null&&(r.callback=e),e=fs(t,r,s),e!==null&&(en(e,t,s,n),oc(e,t,s))}};function Pg(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ko(n,s)||!Ko(r,i):!0}function jy(t,e,n){var s=!1,r=ws,i=e.contextType;return typeof i=="object"&&i!==null?i=Bt(i):(r=xt(e)?Zs:st.current,s=e.contextTypes,i=(s=s!=null)?Ti(t,r):ws),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eh,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function bg(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Eh.enqueueReplaceState(e,e.state,null)}function wf(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Fp(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Bt(i):(i=xt(e)?Zs:st.current,r.context=Ti(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yf(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Eh.enqueueReplaceState(r,r.state,null),Pc(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ai(t,e){try{var n="",s=e;do n+=ox(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IS=typeof WeakMap=="function"?WeakMap:Map;function Vy(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Vc||(Vc=!0,Mf=s),xf(t,e)},n}function zy(t,e,n){n=In(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){xf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xf(t,e),typeof s!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fg(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new IS;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=GS.bind(null,t,e,n),e.then(t,t))}function Lg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jg(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,fs(n,e,1))),n.lanes|=1),t)}var PS=zn.ReactCurrentOwner,yt=!1;function it(t,e,n,s){e.child=t===null?my(e,null,n,s):Ni(e,t.child,n,s)}function Vg(t,e,n,s,r){n=n.render;var i=e.ref;return gi(e,r),s=Wp(t,e,n,s,i,r),n=Bp(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,jn(t,e,r)):(we&&n&&Op(e),e.flags|=1,it(t,e,s,r),e.child)}function zg(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!Zp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Wy(t,e,i,s,r)):(t=dc(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ko,n(o,s)&&t.ref===e.ref)return jn(t,e,r)}return e.flags|=1,t=gs(i,s),t.ref=e.ref,t.return=e,e.child=t}function Wy(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Ko(i,s)&&t.ref===e.ref)if(yt=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(yt=!0);else return e.lanes=t.lanes,jn(t,e,r)}return Sf(t,e,n,s,r)}function By(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(ui,Nt),Nt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(ui,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,fe(ui,Nt),Nt|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,fe(ui,Nt),Nt|=s;return it(t,e,r,n),e.child}function $y(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sf(t,e,n,s,r){var i=xt(n)?Zs:st.current;return i=Ti(e,i),gi(e,r),n=Wp(t,e,n,s,i,r),s=Bp(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,jn(t,e,r)):(we&&s&&Op(e),e.flags|=1,it(t,e,n,r),e.child)}function Wg(t,e,n,s,r){if(xt(n)){var i=!0;Oc(e)}else i=!1;if(gi(e,r),e.stateNode===null)uc(t,e),jy(e,n,s),wf(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Bt(u):(u=xt(n)?Zs:st.current,u=Ti(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==u)&&bg(e,o,s,u),Qn=!1;var d=e.memoizedState;o.state=d,Pc(e,s,o,r),l=e.memoizedState,a!==s||d!==l||wt.current||Qn?(typeof c=="function"&&(yf(e,n,c,s),l=e.memoizedState),(a=Qn||Pg(e,n,a,s,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,vy(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Gt(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bt(l):(l=xt(n)?Zs:st.current,l=Ti(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&bg(e,o,s,l),Qn=!1,d=e.memoizedState,o.state=d,Pc(e,s,o,r);var m=e.memoizedState;a!==h||d!==m||wt.current||Qn?(typeof p=="function"&&(yf(e,n,p,s),m=e.memoizedState),(u=Qn||Pg(e,n,u,s,d,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=l,s=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),s=!1)}return Cf(t,e,n,s,i,r)}function Cf(t,e,n,s,r,i){$y(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Ng(e,n,!1),jn(t,e,i);s=e.stateNode,PS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ni(e,t.child,null,i),e.child=Ni(e,null,a,i)):it(t,e,a,i),e.memoizedState=s.state,r&&Ng(e,n,!0),e.child}function Uy(t){var e=t.stateNode;e.pendingContext?kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kg(t,e.context,!1),Lp(t,e.containerInfo)}function Bg(t,e,n,s,r){return ki(),Mp(r),e.flags|=256,it(t,e,n,s),e.child}var Tf={dehydrated:null,treeContext:null,retryLane:0};function kf(t){return{baseLanes:t,cachePool:null,transitions:null}}function qy(t,e,n){var s=e.pendingProps,r=Te.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),fe(Te,r&1),t===null)return vf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Dh(o,s,0,null),t=Ks(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kf(n),e.memoizedState=Tf,t):qp(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return bS(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=gs(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=gs(a,i):(i=Ks(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?kf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Tf,s}return i=t.child,t=i.sibling,s=gs(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function qp(t,e){return e=Dh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uu(t,e,n,s){return s!==null&&Mp(s),Ni(e,t.child,null,n),t=qp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bS(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=kd(Error(M(422))),Uu(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Dh({mode:"visible",children:s.children},r,0,null),i=Ks(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ni(e,t.child,null,o),e.child.memoizedState=kf(o),e.memoizedState=Tf,i);if(!(e.mode&1))return Uu(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(M(419)),s=kd(i,s,void 0),Uu(t,e,o,s)}if(a=(o&t.childLanes)!==0,yt||a){if(s=He,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ln(t,r),en(s,t,r,-1))}return Qp(),s=kd(Error(M(421))),Uu(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=KS.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Et=ds(r.nextSibling),Ot=e,we=!0,Yt=null,t!==null&&(Pt[bt++]=Mn,Pt[bt++]=Rn,Pt[bt++]=Js,Mn=t.id,Rn=t.overflow,Js=e),e=qp(e,s.children),e.flags|=4096,e)}function $g(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),_f(t.return,e,n)}function Nd(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Hy(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(it(t,e,s.children,n),s=Te.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$g(t,n,e);else if(t.tag===19)$g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(fe(Te,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&bc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Nd(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&bc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Nd(e,!0,n,null,i);break;case"together":Nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),tr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=gs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FS(t,e,n){switch(e.tag){case 3:Uy(e),ki();break;case 5:_y(e);break;case 1:xt(e.type)&&Oc(e);break;case 4:Lp(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;fe(Rc,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(fe(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?qy(t,e,n):(fe(Te,Te.current&1),t=jn(t,e,n),t!==null?t.sibling:null);fe(Te,Te.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Hy(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),fe(Te,Te.current),s)break;return null;case 22:case 23:return e.lanes=0,By(t,e,n)}return jn(t,e,n)}var Gy,Nf,Ky,Yy;Gy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nf=function(){};Ky=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Us(pn.current);var i=null;switch(n){case"input":r=Gd(t,r),s=Gd(t,s),i=[];break;case"select":r=Ee({},r,{value:void 0}),s=Ee({},s,{value:void 0}),i=[];break;case"textarea":r=Xd(t,r),s=Xd(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Ec)}Zd(n,s);var o;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var l=s[u];if(a=r?.[u],s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wo.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&me("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Yy=function(t,e,n,s){n!==s&&(e.flags|=4)};function yo(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function LS(t,e,n){var s=e.pendingProps;switch(Dp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return xt(e.type)&&Ac(),Je(e),null;case 3:return s=e.stateNode,Ei(),ge(wt),ge(st),Vp(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Bu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(Pf(Yt),Yt=null))),Nf(t,e),Je(e),null;case 5:jp(e);var r=Us(Jo.current);if(n=e.type,t!==null&&e.stateNode!=null)Ky(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(M(166));return Je(e),null}if(t=Us(pn.current),Bu(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[dn]=e,s[Qo]=i,t=(e.mode&1)!==0,n){case"dialog":me("cancel",s),me("close",s);break;case"iframe":case"object":case"embed":me("load",s);break;case"video":case"audio":for(r=0;r<ko.length;r++)me(ko[r],s);break;case"source":me("error",s);break;case"img":case"image":case"link":me("error",s),me("load",s);break;case"details":me("toggle",s);break;case"input":Zm(s,i),me("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},me("invalid",s);break;case"textarea":eg(s,i),me("invalid",s)}Zd(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Wu(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Wu(s.textContent,a,t),r=["children",""+a]):Wo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&me("scroll",s)}switch(n){case"input":Iu(s),Jm(s,i,!0);break;case"textarea":Iu(s),tg(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Ec)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=C_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[dn]=e,t[Qo]=s,Gy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jd(n,s),n){case"dialog":me("cancel",t),me("close",t),r=s;break;case"iframe":case"object":case"embed":me("load",t),r=s;break;case"video":case"audio":for(r=0;r<ko.length;r++)me(ko[r],t);r=s;break;case"source":me("error",t),r=s;break;case"img":case"image":case"link":me("error",t),me("load",t),r=s;break;case"details":me("toggle",t),r=s;break;case"input":Zm(t,s),r=Gd(t,s),me("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ee({},s,{value:void 0}),me("invalid",t);break;case"textarea":eg(t,s),r=Xd(t,s),me("invalid",t);break;default:r=s}Zd(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?N_(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T_(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Bo(t,l):typeof l=="number"&&Bo(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wo.hasOwnProperty(i)?l!=null&&i==="onScroll"&&me("scroll",t):l!=null&&mp(t,i,l,o))}switch(n){case"input":Iu(t),Jm(t,s,!1);break;case"textarea":Iu(t),tg(t);break;case"option":s.value!=null&&t.setAttribute("value",""+ys(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?di(t,!!s.multiple,i,!1):s.defaultValue!=null&&di(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ec)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)Yy(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(M(166));if(n=Us(Jo.current),Us(pn.current),Bu(e)){if(s=e.stateNode,n=e.memoizedProps,s[dn]=e,(i=s.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:Wu(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wu(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[dn]=e,e.stateNode=s}return Je(e),null;case 13:if(ge(Te),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Et!==null&&e.mode&1&&!(e.flags&128))fy(),ki(),e.flags|=98560,i=!1;else if(i=Bu(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[dn]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),i=!1}else Yt!==null&&(Pf(Yt),Yt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Be===0&&(Be=3):Qp())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return Ei(),Nf(t,e),t===null&&Yo(e.stateNode.containerInfo),Je(e),null;case 10:return Pp(e.type._context),Je(e),null;case 17:return xt(e.type)&&Ac(),Je(e),null;case 19:if(ge(Te),i=e.memoizedState,i===null)return Je(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)yo(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bc(t),o!==null){for(e.flags|=128,yo(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>Oi&&(e.flags|=128,s=!0,yo(i,!1),e.lanes=4194304)}else{if(!s)if(t=bc(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!we)return Je(e),null}else 2*Pe()-i.renderingStartTime>Oi&&n!==1073741824&&(e.flags|=128,s=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=Te.current,fe(Te,s?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return Xp(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Nt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function jS(t,e){switch(Dp(e),e.tag){case 1:return xt(e.type)&&Ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ei(),ge(wt),ge(st),Vp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jp(e),null;case 13:if(ge(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(Te),null;case 4:return Ei(),null;case 10:return Pp(e.type._context),null;case 22:case 23:return Xp(),null;case 24:return null;default:return null}}var qu=!1,nt=!1,VS=typeof WeakSet=="function"?WeakSet:Set,z=null;function li(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Oe(t,e,s)}else n.current=null}function Ef(t,e,n){try{n()}catch(s){Oe(t,e,s)}}var Ug=!1;function zS(t,e){if(cf=Tc,t=ey(),Ap(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==i||s!==0&&h.nodeType!==3||(l=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++u===r&&(a=o),d===i&&++c===s&&(l=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hf={focusedElem:t,selectionRange:n},Tc=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,x=m.memoizedState,f=e.stateNode,g=f.getSnapshotBeforeUpdate(e.elementType===e.type?v:Gt(e.type,v),x);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(C){Oe(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return m=Ug,Ug=!1,m}function Po(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Ef(e,n,i)}r=r.next}while(r!==s)}}function Ah(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Af(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xy(t){var e=t.alternate;e!==null&&(t.alternate=null,Xy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[Qo],delete e[pf],delete e[SS],delete e[CS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qy(t){return t.tag===5||t.tag===3||t.tag===4}function qg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Of(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ec));else if(s!==4&&(t=t.child,t!==null))for(Of(t,e,n),t=t.sibling;t!==null;)Of(t,e,n),t=t.sibling}function Df(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Df(t,e,n),t=t.sibling;t!==null;)Df(t,e,n),t=t.sibling}var Ke=null,Kt=!1;function Hn(t,e,n){for(n=n.child;n!==null;)Zy(t,e,n),n=n.sibling}function Zy(t,e,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(wh,n)}catch{}switch(n.tag){case 5:nt||li(n,e);case 6:var s=Ke,r=Kt;Ke=null,Hn(t,e,n),Ke=s,Kt=r,Ke!==null&&(Kt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Kt?(t=Ke,n=n.stateNode,t.nodeType===8?yd(t.parentNode,n):t.nodeType===1&&yd(t,n),Ho(t)):yd(Ke,n.stateNode));break;case 4:s=Ke,r=Kt,Ke=n.stateNode.containerInfo,Kt=!0,Hn(t,e,n),Ke=s,Kt=r;break;case 0:case 11:case 14:case 15:if(!nt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ef(n,e,o),r=r.next}while(r!==s)}Hn(t,e,n);break;case 1:if(!nt&&(li(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Oe(n,e,a)}Hn(t,e,n);break;case 21:Hn(t,e,n);break;case 22:n.mode&1?(nt=(s=nt)||n.memoizedState!==null,Hn(t,e,n),nt=s):Hn(t,e,n);break;default:Hn(t,e,n)}}function Hg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VS),e.forEach(function(s){var r=YS.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Ht(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ke=a.stateNode,Kt=!1;break e;case 3:Ke=a.stateNode.containerInfo,Kt=!0;break e;case 4:Ke=a.stateNode.containerInfo,Kt=!0;break e}a=a.return}if(Ke===null)throw Error(M(160));Zy(i,o,r),Ke=null,Kt=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Oe(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jy(e,t),e=e.sibling}function Jy(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),cn(t),s&4){try{Po(3,t,t.return),Ah(3,t)}catch(v){Oe(t,t.return,v)}try{Po(5,t,t.return)}catch(v){Oe(t,t.return,v)}}break;case 1:Ht(e,t),cn(t),s&512&&n!==null&&li(n,n.return);break;case 5:if(Ht(e,t),cn(t),s&512&&n!==null&&li(n,n.return),t.flags&32){var r=t.stateNode;try{Bo(r,"")}catch(v){Oe(t,t.return,v)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&x_(r,i),Jd(a,o);var u=Jd(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?N_(r,h):c==="dangerouslySetInnerHTML"?T_(r,h):c==="children"?Bo(r,h):mp(r,c,h,u)}switch(a){case"input":Kd(r,i);break;case"textarea":S_(r,i);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?di(r,!!i.multiple,p,!1):d!==!!i.multiple&&(i.defaultValue!=null?di(r,!!i.multiple,i.defaultValue,!0):di(r,!!i.multiple,i.multiple?[]:"",!1))}r[Qo]=i}catch(v){Oe(t,t.return,v)}}break;case 6:if(Ht(e,t),cn(t),s&4){if(t.stateNode===null)throw Error(M(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(v){Oe(t,t.return,v)}}break;case 3:if(Ht(e,t),cn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ho(e.containerInfo)}catch(v){Oe(t,t.return,v)}break;case 4:Ht(e,t),cn(t);break;case 13:Ht(e,t),cn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Kp=Pe())),s&4&&Hg(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(u=nt)||c,Ht(e,t),nt=u):Ht(e,t),cn(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(z=t,c=t.child;c!==null;){for(h=z=c;z!==null;){switch(d=z,p=d.child,d.tag){case 0:case 11:case 14:case 15:Po(4,d,d.return);break;case 1:li(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){s=d,n=d.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Oe(s,n,v)}}break;case 5:li(d,d.return);break;case 22:if(d.memoizedState!==null){Kg(h);continue}}p!==null?(p.return=d,z=p):Kg(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=k_("display",o))}catch(v){Oe(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Oe(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ht(e,t),cn(t),s&4&&Hg(t);break;case 21:break;default:Ht(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qy(n)){var s=n;break e}n=n.return}throw Error(M(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Bo(r,""),s.flags&=-33);var i=qg(t);Df(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=qg(t);Of(t,a,o);break;default:throw Error(M(161))}}catch(l){Oe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WS(t,e,n){z=t,e0(t)}function e0(t,e,n){for(var s=(t.mode&1)!==0;z!==null;){var r=z,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||qu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||nt;a=qu;var u=nt;if(qu=o,(nt=l)&&!u)for(z=r;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?Yg(r):l!==null?(l.return=o,z=l):Yg(r);for(;i!==null;)z=i,e0(i),i=i.sibling;z=r,qu=a,nt=u}Gg(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,z=i):Gg(t)}}function Gg(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||Ah(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!nt)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mg(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ho(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}nt||e.flags&512&&Af(e)}catch(d){Oe(e,e.return,d)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Kg(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function Yg(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ah(4,e)}catch(l){Oe(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Oe(e,r,l)}}var i=e.return;try{Af(e)}catch(l){Oe(e,i,l)}break;case 5:var o=e.return;try{Af(e)}catch(l){Oe(e,o,l)}}}catch(l){Oe(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var BS=Math.ceil,jc=zn.ReactCurrentDispatcher,Hp=zn.ReactCurrentOwner,zt=zn.ReactCurrentBatchConfig,ne=0,He=null,Ve=null,Ye=0,Nt=0,ui=As(0),Be=0,sa=null,tr=0,Oh=0,Gp=0,bo=null,vt=null,Kp=0,Oi=1/0,Tn=null,Vc=!1,Mf=null,ps=null,Hu=!1,rs=null,zc=0,Fo=0,Rf=null,cc=-1,hc=0;function lt(){return ne&6?Pe():cc!==-1?cc:cc=Pe()}function ms(t){return t.mode&1?ne&2&&Ye!==0?Ye&-Ye:kS.transition!==null?(hc===0&&(hc=j_()),hc):(t=ae,t!==0||(t=window.event,t=t===void 0?16:q_(t.type)),t):1}function en(t,e,n,s){if(50<Fo)throw Fo=0,Rf=null,Error(M(185));Aa(t,n,s),(!(ne&2)||t!==He)&&(t===He&&(!(ne&2)&&(Oh|=n),Be===4&&ns(t,Ye)),St(t,s),n===1&&ne===0&&!(e.mode&1)&&(Oi=Pe()+500,kh&&Os()))}function St(t,e){var n=t.callbackNode;kx(t,e);var s=Cc(t,t===He?Ye:0);if(s===0)n!==null&&rg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&rg(n),e===1)t.tag===0?TS(Xg.bind(null,t)):cy(Xg.bind(null,t)),wS(function(){!(ne&6)&&Os()}),n=null;else{switch(V_(s)){case 1:n=wp;break;case 4:n=F_;break;case 16:n=Sc;break;case 536870912:n=L_;break;default:n=Sc}n=l0(n,t0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function t0(t,e){if(cc=-1,hc=0,ne&6)throw Error(M(327));var n=t.callbackNode;if(vi()&&t.callbackNode!==n)return null;var s=Cc(t,t===He?Ye:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Wc(t,s);else{e=s;var r=ne;ne|=2;var i=s0();(He!==t||Ye!==e)&&(Tn=null,Oi=Pe()+500,Gs(t,e));do try{qS();break}catch(a){n0(t,a)}while(!0);Ip(),jc.current=i,ne=r,Ve!==null?e=0:(He=null,Ye=0,e=Be)}if(e!==0){if(e===2&&(r=rf(t),r!==0&&(s=r,e=If(t,r))),e===1)throw n=sa,Gs(t,0),ns(t,s),St(t,Pe()),n;if(e===6)ns(t,s);else{if(r=t.current.alternate,!(s&30)&&!$S(r)&&(e=Wc(t,s),e===2&&(i=rf(t),i!==0&&(s=i,e=If(t,i))),e===1))throw n=sa,Gs(t,0),ns(t,s),St(t,Pe()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(M(345));case 2:js(t,vt,Tn);break;case 3:if(ns(t,s),(s&130023424)===s&&(e=Kp+500-Pe(),10<e)){if(Cc(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){lt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ff(js.bind(null,t,vt,Tn),e);break}js(t,vt,Tn);break;case 4:if(ns(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Jt(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Pe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*BS(s/1960))-s,10<s){t.timeoutHandle=ff(js.bind(null,t,vt,Tn),s);break}js(t,vt,Tn);break;case 5:js(t,vt,Tn);break;default:throw Error(M(329))}}}return St(t,Pe()),t.callbackNode===n?t0.bind(null,t):null}function If(t,e){var n=bo;return t.current.memoizedState.isDehydrated&&(Gs(t,e).flags|=256),t=Wc(t,e),t!==2&&(e=vt,vt=n,e!==null&&Pf(e)),t}function Pf(t){vt===null?vt=t:vt.push.apply(vt,t)}function $S(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!nn(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ns(t,e){for(e&=~Gp,e&=~Oh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jt(e),s=1<<n;t[n]=-1,e&=~s}}function Xg(t){if(ne&6)throw Error(M(327));vi();var e=Cc(t,0);if(!(e&1))return St(t,Pe()),null;var n=Wc(t,e);if(t.tag!==0&&n===2){var s=rf(t);s!==0&&(e=s,n=If(t,s))}if(n===1)throw n=sa,Gs(t,0),ns(t,e),St(t,Pe()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,js(t,vt,Tn),St(t,Pe()),null}function Yp(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(Oi=Pe()+500,kh&&Os())}}function nr(t){rs!==null&&rs.tag===0&&!(ne&6)&&vi();var e=ne;ne|=1;var n=zt.transition,s=ae;try{if(zt.transition=null,ae=1,t)return t()}finally{ae=s,zt.transition=n,ne=e,!(ne&6)&&Os()}}function Xp(){Nt=ui.current,ge(ui)}function Gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yS(n)),Ve!==null)for(n=Ve.return;n!==null;){var s=n;switch(Dp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ac();break;case 3:Ei(),ge(wt),ge(st),Vp();break;case 5:jp(s);break;case 4:Ei();break;case 13:ge(Te);break;case 19:ge(Te);break;case 10:Pp(s.type._context);break;case 22:case 23:Xp()}n=n.return}if(He=t,Ve=t=gs(t.current,null),Ye=Nt=e,Be=0,sa=null,Gp=Oh=tr=0,vt=bo=null,$s!==null){for(e=0;e<$s.length;e++)if(n=$s[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}$s=null}return t}function n0(t,e){do{var n=Ve;try{if(Ip(),ac.current=Lc,Fc){for(var s=ke.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Fc=!1}if(er=0,qe=We=ke=null,Io=!1,ea=0,Hp.current=null,n===null||n.return===null){Be=1,sa=e,Ve=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ye,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Lg(o);if(p!==null){p.flags&=-257,jg(p,o,a,i,e),p.mode&1&&Fg(i,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){Fg(i,u,e),Qp();break e}l=Error(M(426))}}else if(we&&a.mode&1){var x=Lg(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),jg(x,o,a,i,e),Mp(Ai(l,a));break e}}i=l=Ai(l,a),Be!==4&&(Be=2),bo===null?bo=[i]:bo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var f=Vy(i,l,e);Dg(i,f);break e;case 1:a=l;var g=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ps===null||!ps.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=zy(i,a,e);Dg(i,C);break e}}i=i.return}while(i!==null)}i0(n)}catch(w){e=w,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function s0(){var t=jc.current;return jc.current=Lc,t===null?Lc:t}function Qp(){(Be===0||Be===3||Be===2)&&(Be=4),He===null||!(tr&268435455)&&!(Oh&268435455)||ns(He,Ye)}function Wc(t,e){var n=ne;ne|=2;var s=s0();(He!==t||Ye!==e)&&(Tn=null,Gs(t,e));do try{US();break}catch(r){n0(t,r)}while(!0);if(Ip(),ne=n,jc.current=s,Ve!==null)throw Error(M(261));return He=null,Ye=0,Be}function US(){for(;Ve!==null;)r0(Ve)}function qS(){for(;Ve!==null&&!gx();)r0(Ve)}function r0(t){var e=a0(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?i0(t):Ve=e,Hp.current=null}function i0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jS(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Ve=null;return}}else if(n=LS(n,e,Nt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Be===0&&(Be=5)}function js(t,e,n){var s=ae,r=zt.transition;try{zt.transition=null,ae=1,HS(t,e,n,s)}finally{zt.transition=r,ae=s}return null}function HS(t,e,n,s){do vi();while(rs!==null);if(ne&6)throw Error(M(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Nx(t,i),t===He&&(Ve=He=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hu||(Hu=!0,l0(Sc,function(){return vi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=zt.transition,zt.transition=null;var o=ae;ae=1;var a=ne;ne|=4,Hp.current=null,zS(t,n),Jy(n,t),dS(hf),Tc=!!cf,hf=cf=null,t.current=n,WS(n),vx(),ne=a,ae=o,zt.transition=i}else t.current=n;if(Hu&&(Hu=!1,rs=t,zc=r),i=t.pendingLanes,i===0&&(ps=null),wx(n.stateNode),St(t,Pe()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Vc)throw Vc=!1,t=Mf,Mf=null,t;return zc&1&&t.tag!==0&&vi(),i=t.pendingLanes,i&1?t===Rf?Fo++:(Fo=0,Rf=t):Fo=0,Os(),null}function vi(){if(rs!==null){var t=V_(zc),e=zt.transition,n=ae;try{if(zt.transition=null,ae=16>t?16:t,rs===null)var s=!1;else{if(t=rs,rs=null,zc=0,ne&6)throw Error(M(331));var r=ne;for(ne|=4,z=t.current;z!==null;){var i=z,o=i.child;if(z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(z=u;z!==null;){var c=z;switch(c.tag){case 0:case 11:case 15:Po(8,c,i)}var h=c.child;if(h!==null)h.return=c,z=h;else for(;z!==null;){c=z;var d=c.sibling,p=c.return;if(Xy(c),c===u){z=null;break}if(d!==null){d.return=p,z=d;break}z=p}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,z=o;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Po(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,z=f;break e}z=i.return}}var g=t.current;for(z=g;z!==null;){o=z;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,z=_;else e:for(o=g;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ah(9,a)}}catch(w){Oe(a,a.return,w)}if(a===o){z=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,z=C;break e}z=a.return}}if(ne=r,Os(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(wh,t)}catch{}s=!0}return s}finally{ae=n,zt.transition=e}}return!1}function Qg(t,e,n){e=Ai(n,e),e=Vy(t,e,1),t=fs(t,e,1),e=lt(),t!==null&&(Aa(t,1,e),St(t,e))}function Oe(t,e,n){if(t.tag===3)Qg(t,t,n);else for(;e!==null;){if(e.tag===3){Qg(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ps===null||!ps.has(s))){t=Ai(n,t),t=zy(e,t,1),e=fs(e,t,1),t=lt(),e!==null&&(Aa(e,1,t),St(e,t));break}}e=e.return}}function GS(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Ye&n)===n&&(Be===4||Be===3&&(Ye&130023424)===Ye&&500>Pe()-Kp?Gs(t,0):Gp|=n),St(t,e)}function o0(t,e){e===0&&(t.mode&1?(e=Fu,Fu<<=1,!(Fu&130023424)&&(Fu=4194304)):e=1);var n=lt();t=Ln(t,e),t!==null&&(Aa(t,e,n),St(t,n))}function KS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o0(t,n)}function YS(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(M(314))}s!==null&&s.delete(e),o0(t,n)}var a0;a0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yt=!1,FS(t,e,n);yt=!!(t.flags&131072)}else yt=!1,we&&e.flags&1048576&&hy(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;uc(t,e),t=e.pendingProps;var r=Ti(e,st.current);gi(e,n),r=Wp(null,e,s,t,r,n);var i=Bp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(s)?(i=!0,Oc(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Fp(e),r.updater=Eh,e.stateNode=r,r._reactInternals=e,wf(e,s,t,n),e=Cf(null,e,s,!0,i,n)):(e.tag=0,we&&i&&Op(e),it(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(uc(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=QS(s),t=Gt(s,t),r){case 0:e=Sf(null,e,s,t,n);break e;case 1:e=Wg(null,e,s,t,n);break e;case 11:e=Vg(null,e,s,t,n);break e;case 14:e=zg(null,e,s,Gt(s.type,t),n);break e}throw Error(M(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Gt(s,r),Sf(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Gt(s,r),Wg(t,e,s,r,n);case 3:e:{if(Uy(e),t===null)throw Error(M(387));s=e.pendingProps,i=e.memoizedState,r=i.element,vy(t,e),Pc(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ai(Error(M(423)),e),e=Bg(t,e,s,n,r);break e}else if(s!==r){r=Ai(Error(M(424)),e),e=Bg(t,e,s,n,r);break e}else for(Et=ds(e.stateNode.containerInfo.firstChild),Ot=e,we=!0,Yt=null,n=my(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),s===r){e=jn(t,e,n);break e}it(t,e,s,n)}e=e.child}return e;case 5:return _y(e),t===null&&vf(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,df(s,r)?o=null:i!==null&&df(s,i)&&(e.flags|=32),$y(t,e),it(t,e,o,n),e.child;case 6:return t===null&&vf(e),null;case 13:return qy(t,e,n);case 4:return Lp(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ni(e,null,s,n):it(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Gt(s,r),Vg(t,e,s,r,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,fe(Rc,s._currentValue),s._currentValue=o,i!==null)if(nn(i.value,o)){if(i.children===r.children&&!wt.current){e=jn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=In(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),_f(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(M(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_f(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}it(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,gi(e,n),r=Bt(r),s=s(r),e.flags|=1,it(t,e,s,n),e.child;case 14:return s=e.type,r=Gt(s,e.pendingProps),r=Gt(s.type,r),zg(t,e,s,r,n);case 15:return Wy(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Gt(s,r),uc(t,e),e.tag=1,xt(s)?(t=!0,Oc(e)):t=!1,gi(e,n),jy(e,s,r),wf(e,s,r,n),Cf(null,e,s,!0,t,n);case 19:return Hy(t,e,n);case 22:return By(t,e,n)}throw Error(M(156,e.tag))};function l0(t,e){return b_(t,e)}function XS(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,s){return new XS(t,e,n,s)}function Zp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QS(t){if(typeof t=="function")return Zp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vp)return 11;if(t===_p)return 14}return 2}function gs(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dc(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")Zp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jr:return Ks(n.children,r,i,e);case gp:o=8,r|=8;break;case $d:return t=Lt(12,n,e,r|2),t.elementType=$d,t.lanes=i,t;case Ud:return t=Lt(13,n,e,r),t.elementType=Ud,t.lanes=i,t;case qd:return t=Lt(19,n,e,r),t.elementType=qd,t.lanes=i,t;case __:return Dh(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g_:o=10;break e;case v_:o=9;break e;case vp:o=11;break e;case _p:o=14;break e;case Xn:o=16,s=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Ks(t,e,n,s){return t=Lt(7,t,s,e),t.lanes=n,t}function Dh(t,e,n,s){return t=Lt(22,t,s,e),t.elementType=__,t.lanes=n,t.stateNode={isHidden:!1},t}function Ed(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function Ad(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZS(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ld(0),this.expirationTimes=ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ld(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Jp(t,e,n,s,r,i,o,a,l){return t=new ZS(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fp(i),t}function JS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zr,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function u0(t){if(!t)return ws;t=t._reactInternals;e:{if(Vr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(xt(n))return uy(t,n,e)}return e}function c0(t,e,n,s,r,i,o,a,l){return t=Jp(n,s,!0,t,r,i,o,a,l),t.context=u0(null),n=t.current,s=lt(),r=ms(n),i=In(s,r),i.callback=e??null,fs(n,i,r),t.current.lanes=r,Aa(t,r,s),St(t,s),t}function Mh(t,e,n,s){var r=e.current,i=lt(),o=ms(r);return n=u0(n),e.context===null?e.context=n:e.pendingContext=n,e=In(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=fs(r,e,o),t!==null&&(en(t,r,o,i),oc(t,r,o)),o}function Bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function em(t,e){Zg(t,e),(t=t.alternate)&&Zg(t,e)}function eC(){return null}var h0=typeof reportError=="function"?reportError:function(t){console.error(t)};function tm(t){this._internalRoot=t}Rh.prototype.render=tm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Mh(t,e,null,null)};Rh.prototype.unmount=tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nr(function(){Mh(null,t,null,null)}),e[Fn]=null}};function Rh(t){this._internalRoot=t}Rh.prototype.unstable_scheduleHydration=function(t){if(t){var e=B_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ts.length&&e!==0&&e<ts[n].priority;n++);ts.splice(n,0,t),n===0&&U_(t)}};function nm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jg(){}function tC(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Bc(o);i.call(u)}}var o=c0(e,s,t,0,null,!1,!1,"",Jg);return t._reactRootContainer=o,t[Fn]=o.current,Yo(t.nodeType===8?t.parentNode:t),nr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=Bc(l);a.call(u)}}var l=Jp(t,0,!1,null,null,!1,!1,"",Jg);return t._reactRootContainer=l,t[Fn]=l.current,Yo(t.nodeType===8?t.parentNode:t),nr(function(){Mh(e,l,n,s)}),l}function Ph(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Bc(o);a.call(l)}}Mh(e,o,t,r)}else o=tC(n,e,t,r,s);return Bc(o)}z_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=To(e.pendingLanes);n!==0&&(xp(e,n|1),St(e,Pe()),!(ne&6)&&(Oi=Pe()+500,Os()))}break;case 13:nr(function(){var s=Ln(t,1);if(s!==null){var r=lt();en(s,t,1,r)}}),em(t,1)}};Sp=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var n=lt();en(e,t,134217728,n)}em(t,134217728)}};W_=function(t){if(t.tag===13){var e=ms(t),n=Ln(t,e);if(n!==null){var s=lt();en(n,t,e,s)}em(t,e)}};B_=function(){return ae};$_=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};tf=function(t,e,n){switch(e){case"input":if(Kd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Th(s);if(!r)throw Error(M(90));w_(s),Kd(s,r)}}}break;case"textarea":S_(t,n);break;case"select":e=n.value,e!=null&&di(t,!!n.multiple,e,!1)}};O_=Yp;D_=nr;var nC={usingClientEntryPoint:!1,Events:[Da,si,Th,E_,A_,Yp]},wo={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sC={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I_(t),t===null?null:t.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||eC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{wh=Gu.inject(sC),fn=Gu}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nC;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nm(e))throw Error(M(200));return JS(t,e,null,n)};Mt.createRoot=function(t,e){if(!nm(t))throw Error(M(299));var n=!1,s="",r=h0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Jp(t,1,!1,null,null,n,!1,s,r),t[Fn]=e.current,Yo(t.nodeType===8?t.parentNode:t),new tm(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=I_(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return nr(t)};Mt.hydrate=function(t,e,n){if(!Ih(e))throw Error(M(200));return Ph(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!nm(t))throw Error(M(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=h0;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=c0(e,null,t,1,n??null,r,!1,i,o),t[Fn]=e.current,Yo(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Rh(e)};Mt.render=function(t,e,n){if(!Ih(e))throw Error(M(200));return Ph(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!Ih(t))throw Error(M(40));return t._reactRootContainer?(nr(function(){Ph(null,null,t,!1,function(){t._reactRootContainer=null,t[Fn]=null})}),!0):!1};Mt.unstable_batchedUpdates=Yp;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Ih(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Ph(t,e,n,!1,s)};Mt.version="18.3.1-next-f1338f8080-20240426";function d0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d0)}catch(t){console.error(t)}}d0(),d_.exports=Mt;var f0=d_.exports,p0,ev=f0;p0=ev.createRoot,ev.hydrateRoot;var rC=class extends Error{issues;constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function iC(t){return typeof t=="function"?t():t}function oC(t,e){return Array.isArray(t)?[void 0,t]:[t,e]}function aC(t,e,n){return{typed:t,output:e,issues:n}}function lC(t,e){return{reason:t?.reason,validation:e.validation,origin:t?.origin||"value",message:e.message,input:e.input,requirement:e?.requirement,path:e.path,abortEarly:t?.abortEarly,abortPipeEarly:t?.abortPipeEarly,skipPipe:t?.skipPipe}}function uC(t,e){return{reason:e,origin:t?.origin,abortEarly:t?.abortEarly,abortPipeEarly:t?.abortPipeEarly,skipPipe:t?.skipPipe}}function cC(t,e,n,s,r){let i,o=t;if(e?.length&&!n?.skipPipe)for(const a of e){const l=a._parse(o);if(l.issues){i=i||uC(n,s);for(const u of l.issues){const c=lC(i,u);r?r.push(c):r=[c]}if(i.abortEarly||i.abortPipeEarly)break}else o=l.output}return aC(!0,o,r)}function hC(t,e,n,s,r,i,o){return{typed:!1,output:r,issues:[{reason:e,validation:n,origin:t?.origin||"value",message:iC(s),input:r,path:i,issues:o,abortEarly:t?.abortEarly,abortPipeEarly:t?.abortPipeEarly,skipPipe:t?.skipPipe}]}}function dC(t,e){const[n="Invalid type",s]=oC(t,e);return{type:"boolean",async:!1,message:n,pipe:s,_parse(r,i){return typeof r!="boolean"?hC(i,"type","boolean",this.message,r):cC(r,this.pipe,i,"boolean")}}}function tv(t,e,n){const s=t._parse(e,n);if(s.issues)throw new rC(s.issues);return s.output}const xs=(t,...e)=>b.useMemo(()=>new t(...e),[...e]),fC=t=>[].concat(t),pC="long-inflexible-nondirectional",mC="long-inflexible-directional",bf=(1n<<15n)-1n,m0=(1n<<160n)-1n^bf,sm=m0,gC=/(\S)\+/g,vC=/\+{2,}/gi,rm=/\s+/gi,_C=(t,e)=>{try{return t()}catch{return e}},$c=t=>g0(t)?t:[t],yC=(t,e)=>t<e?-1:t>e?1:0,wC=t=>{const e=[];for(let n=0n;t>0n;n+=1n,t>>=1n)t&1n&&e.push(1n<<n);return e},im=t=>{if(t.length===0)return[];if(t.length===1){const i=t[0];return g0(i)?i.length<=1?[i]:i.map(o=>[o]):[[i]]}const e=t.map($c),n=e[0],s=im(e.slice(1)),r=[];for(const i of n)if(s.length)for(const o of s)r.push([i,...o]);else r.push([i]);return r},nv=t=>t[0],g0=t=>Array.isArray(t),Ff=t=>t instanceof KeyboardEvent,pt=(()=>{const t=typeof navigator=="object"?/mac|ipod|iphone|ipad/i.test(navigator.platform):typeof globalThis.process=="object"?globalThis.process.platform==="darwin":!1;return()=>t})(),Lf=t=>t instanceof MouseEvent,v0=t=>typeof t=="string",xC=t=>t===void 0,SC=t=>t[t.length-1],Ra=t=>{const e=new Map;return n=>{const s=e.get(n);if(!xC(s)||e.has(n))return s;const r=t(n);return e.set(n,r),r}},Od=()=>!1,_0=t=>t.reduce((e,n)=>e|n,0n),CC=(t,e)=>e.map(n=>{const s=t.slice(0,-1),r=SC(t)||0n;return[...s,r|n]}),Dd=(t,e)=>t.slice(t.length-Math.max(0,e),t.length),TC=t=>t.length<=1?t:Array.from(new Set(t)),kC=(t,e)=>t.includes(e)?t.filter(n=>n!==e):t,y0=()=>!0,mt=1n<<0n,gt=1n<<1n,et=1n<<2n,tt=1n<<3n,bh=1n<<2n,Fh=1n<<3n,is=1n<<4n,os=1n<<5n,Di=1n<<6n,Mi=1n<<7n,ra=1n<<8n,ia=1n<<9n,Lh=1n<<10n,jh=1n<<11n,oa=1n<<12n,qs=1n<<13n,Hs=1n<<14n,Ia=1n<<15n,Pa=1n<<16n,ba=1n<<17n,Fa=1n<<18n,La=1n<<19n,ja=1n<<20n,Va=1n<<21n,za=1n<<22n,Wa=1n<<23n,Ba=1n<<24n,sr=1n<<25n,rr=1n<<26n,ir=1n<<27n,or=1n<<28n,ar=1n<<29n,lr=1n<<30n,ur=1n<<31n,cr=1n<<32n,hr=1n<<33n,dr=1n<<34n,fr=1n<<35n,pr=1n<<36n,mr=1n<<37n,gr=1n<<38n,vr=1n<<39n,_r=1n<<40n,yr=1n<<41n,wr=1n<<42n,xr=1n<<43n,Sr=1n<<44n,Cr=1n<<45n,Tr=1n<<46n,kr=1n<<47n,Nr=1n<<48n,Er=1n<<49n,Ar=1n<<50n,$a=1n<<51n,Ua=1n<<52n,qa=1n<<53n,Ha=1n<<54n,Ga=1n<<55n,Ka=1n<<56n,Ya=1n<<57n,Xa=1n<<58n,Qa=1n<<59n,Za=1n<<60n,Ja=1n<<61n,el=1n<<62n,tl=1n<<63n,nl=1n<<64n,sl=1n<<65n,rl=1n<<66n,il=1n<<67n,ol=1n<<68n,al=1n<<69n,ll=1n<<70n,ul=1n<<71n,cl=1n<<72n,hl=1n<<73n,dl=1n<<74n,fl=1n<<75n,pl=1n<<76n,ml=1n<<77n,gl=1n<<78n,vl=1n<<79n,_l=1n<<80n,yl=1n<<81n,wl=1n<<82n,xl=1n<<83n,Sl=1n<<84n,Cl=1n<<85n,Tl=1n<<86n,kl=1n<<87n,Nl=1n<<88n,El=1n<<89n,Al=1n<<90n,Ol=1n<<91n,Dl=1n<<92n,Ml=1n<<93n,Rl=1n<<94n,Il=1n<<95n,Pl=1n<<96n,bl=1n<<97n,Fl=1n<<98n,Ri=1n<<99n,Ll=1n<<100n,Ii=1n<<101n,Pi=1n<<102n,jl=1n<<103n,Vl=1n<<104n,zl=1n<<105n,Wl=1n<<106n,bi=1n<<107n,Bl=1n<<108n,Ki=1n<<109n,Yi=1n<<110n,Xi=1n<<111n,Qi=1n<<112n,Zi=1n<<113n,Ji=1n<<114n,NC=1n<<115n,eo=1n<<116n,to=1n<<117n,no=1n<<118n,so=1n<<119n,ro=1n<<120n,$l=1n<<121n,Ul=1n<<122n,ql=1n<<123n,Hl=1n<<124n,Gl=1n<<125n,Kl=1n<<126n,Yl=1n<<127n,Xl=1n<<128n,Ql=1n<<129n,Zl=1n<<130n,Jl=1n<<131n,eu=1n<<132n,tu=1n<<133n,nu=1n<<134n,su=1n<<135n,ru=1n<<136n,iu=1n<<137n,ou=1n<<138n,au=1n<<139n,io=1n<<140n,lu=1n<<141n,uu=1n<<142n,cu=1n<<143n,En=1n<<144n,An=1n<<145n,On=1n<<146n,hu=1n<<147n,du=1n<<148n,fu=1n<<149n,pu=1n<<150n,mu=1n<<151n,gu=1n<<152n,vu=1n<<153n,Vh=1n<<154n,zh=1n<<155n,Ce={ControlLeft:mt,ControlRight:gt,MetaLeft:et,MetaRight:tt,OSLeft:bh,OSRight:Fh,AltLeft:is,AltRight:os,ShiftLeft:Di,ShiftRight:Mi,F1:$a,F2:Ua,F3:qa,F4:Ha,F5:Ga,F6:Ka,F7:Ya,F8:Xa,F9:Qa,F10:Za,F11:Ja,F12:el,F13:tl,F14:nl,F15:sl,F16:rl,F17:il,F18:ol,F19:al,F20:ll,F21:ul,F22:cl,F23:hl,F24:dl,Numpad0:fl,Numpad1:pl,Numpad2:ml,Numpad3:gl,Numpad4:vl,Numpad5:_l,Numpad6:yl,Numpad7:wl,Numpad8:xl,Numpad9:Sl,NumpadAdd:Cl,NumpadComma:Tl,NumpadDecimal:kl,NumpadDivide:Nl,NumpadEnter:El,NumpadEqual:Al,NumpadMultiply:Ol,NumpadSubtract:Dl,ArrowDown:Ml,ArrowLeft:Rl,ArrowRight:Il,ArrowUp:Pl,Backspace:bl,CapsLock:Fl,Delete:Ri,End:Ll,Enter:Ii,Escape:Pi,Home:jl,Insert:Vl,PageDown:zl,PageUp:Wl,Space:bi,Tab:Bl,NumLock:$l,ScrollLock:Ul},EC={Backquote:Ki,Backslash:Yi,BracketLeft:Xi,BracketRight:Qi,Comma:Zi,Equal:Ji,IntlBackslash:NC,Minus:eo,Period:to,Quote:no,Semicolon:so,Slash:ro},AC={[mt]:"ControlLeft",[gt]:"ControlRight",[et]:"CommandLeft",[tt]:"CommandRight",[bh]:"CommandLeft",[Fh]:"CommandRight",[is]:"AltLeft",[os]:"AltRight",[Di]:"ShiftLeft",[Mi]:"ShiftRight",[ra]:"Control",[ia]:"Command",[Lh]:"Alt",[jh]:"Shift",[oa]:"CommandOrControl",[qs]:"CommandOrControlLeft",[Hs]:"CommandOrControlRight",[Ia]:"0",[Pa]:"1",[ba]:"2",[Fa]:"3",[La]:"4",[ja]:"5",[Va]:"6",[za]:"7",[Wa]:"8",[Ba]:"9",[sr]:"A",[rr]:"B",[ir]:"C",[or]:"D",[ar]:"E",[lr]:"F",[ur]:"G",[cr]:"H",[hr]:"I",[dr]:"J",[fr]:"K",[pr]:"L",[mr]:"M",[gr]:"N",[vr]:"O",[_r]:"P",[yr]:"Q",[wr]:"R",[xr]:"S",[Sr]:"T",[Cr]:"U",[Tr]:"V",[kr]:"W",[Nr]:"X",[Er]:"Y",[Ar]:"Z",[$a]:"F1",[Ua]:"F2",[qa]:"F3",[Ha]:"F4",[Ga]:"F5",[Ka]:"F6",[Ya]:"F7",[Xa]:"F8",[Qa]:"F9",[Za]:"F10",[Ja]:"F11",[el]:"F12",[tl]:"F13",[nl]:"F14",[sl]:"F15",[rl]:"F16",[il]:"F17",[ol]:"F18",[al]:"F19",[ll]:"F20",[ul]:"F21",[cl]:"F22",[hl]:"F23",[dl]:"F24",[fl]:"Numpad0",[pl]:"Numpad1",[ml]:"Numpad2",[gl]:"Numpad3",[vl]:"Numpad4",[_l]:"Numpad5",[yl]:"Numpad6",[wl]:"Numpad7",[xl]:"Numpad8",[Sl]:"Numpad9",[Cl]:"NumpadAdd",[Tl]:"NumpadComma",[kl]:"NumpadDecimal",[Nl]:"NumpadDivide",[El]:"NumpadEnter",[Al]:"NumpadEqual",[Ol]:"NumpadMultiply",[Dl]:"NumpadSubtract",[Ml]:"Down",[Rl]:"Left",[Il]:"Right",[Pl]:"Up",[bl]:"Backspace",[Fl]:"CapsLock",[Ri]:"Delete",[Ll]:"End",[Ii]:"Enter",[Pi]:"Esc",[jl]:"Home",[Vl]:"Insert",[zl]:"PageDown",[Wl]:"PageUp",[bi]:"Space",[Bl]:"Tab",[Ki]:"`",[Yi]:"\\",[Xi]:"[",[Qi]:"]",[Zi]:",",[Ji]:"=",[eo]:"-",[to]:".",[no]:"'",[so]:";",[ro]:"/",[$l]:"NumLock",[Ul]:"ScrollLock",[ql]:"&",[Hl]:"*",[Gl]:"@",[Kl]:"{",[Yl]:"}",[Xl]:"^",[Ql]:":",[Zl]:"$",[Jl]:'"',[eu]:"!",[tu]:">",[nu]:"#",[su]:"<",[ru]:"(",[iu]:")",[ou]:"%",[au]:"|",[io]:"+",[lu]:"?",[uu]:"~",[cu]:"_",[En]:"LeftClick",[An]:"MiddleClick",[On]:"RightClick",[hu]:"Mouse3",[du]:"Mouse4",[fu]:"Mouse5",[pu]:"Mouse6",[mu]:"Mouse7",[gu]:"Mouse8",[vu]:"Mouse9",[Vh]:"§",[zh]:"±"},OC={[mt]:"Ctrl",[gt]:"Ctrl",[et]:"Cmd",[tt]:"Cmd",[bh]:"Cmd",[Fh]:"Cmd",[is]:"Alt",[os]:"Alt",[Di]:"Shift",[Mi]:"Shift",[ra]:"Ctrl",[ia]:"Cmd",[Lh]:"Alt",[jh]:"Shift",[oa]:"CmdOrCtrl",[qs]:"CmdOrCtrl",[Hs]:"CmdOrCtrl",[Ia]:"0",[Pa]:"1",[ba]:"2",[Fa]:"3",[La]:"4",[ja]:"5",[Va]:"6",[za]:"7",[Wa]:"8",[Ba]:"9",[sr]:"A",[rr]:"B",[ir]:"C",[or]:"D",[ar]:"E",[lr]:"F",[ur]:"G",[cr]:"H",[hr]:"I",[dr]:"J",[fr]:"K",[pr]:"L",[mr]:"M",[gr]:"N",[vr]:"O",[_r]:"P",[yr]:"Q",[wr]:"R",[xr]:"S",[Sr]:"T",[Cr]:"U",[Tr]:"V",[kr]:"W",[Nr]:"X",[Er]:"Y",[Ar]:"Z",[$a]:"F1",[Ua]:"F2",[qa]:"F3",[Ha]:"F4",[Ga]:"F5",[Ka]:"F6",[Ya]:"F7",[Xa]:"F8",[Qa]:"F9",[Za]:"F10",[Ja]:"F11",[el]:"F12",[tl]:"F13",[nl]:"F14",[sl]:"F15",[rl]:"F16",[il]:"F17",[ol]:"F18",[al]:"F19",[ll]:"F20",[ul]:"F21",[cl]:"F22",[hl]:"F23",[dl]:"F24",[fl]:"Num0",[pl]:"Num1",[ml]:"Num2",[gl]:"Num3",[vl]:"Num4",[_l]:"Num5",[yl]:"Num6",[wl]:"Num7",[xl]:"Num8",[Sl]:"Num9",[Cl]:"NumAdd",[Tl]:"§",[kl]:"NumDec",[Nl]:"NumDiv",[El]:"§",[Al]:"§",[Ol]:"NumMult",[Dl]:"NumSub",[Ml]:"Down",[Rl]:"Left",[Il]:"Right",[Pl]:"Up",[bl]:"Backspace",[Fl]:"CapsLock",[Ri]:"Delete",[Ll]:"End",[Ii]:"Enter",[Pi]:"Esc",[jl]:"Home",[Vl]:"Insert",[zl]:"PageDown",[Wl]:"PageUp",[bi]:"Space",[Bl]:"Tab",[Ki]:"`",[Yi]:"\\",[Xi]:"[",[Qi]:"]",[Zi]:",",[Ji]:"=",[eo]:"-",[to]:".",[no]:"'",[so]:";",[ro]:"/",[$l]:"NumLock",[Ul]:"ScrollLock",[ql]:"&",[Hl]:"*",[Gl]:"@",[Kl]:"{",[Yl]:"}",[Xl]:"^",[Ql]:":",[Zl]:"$",[Jl]:'"',[eu]:"!",[tu]:">",[nu]:"#",[su]:"<",[ru]:"(",[iu]:")",[ou]:"%",[au]:"|",[io]:"+",[lu]:"?",[uu]:"~",[cu]:"_",[En]:"§",[An]:"§",[On]:"§",[hu]:"§",[du]:"§",[fu]:"§",[pu]:"§",[mu]:"§",[gu]:"§",[vu]:"§",[Vh]:"§",[zh]:"±"},DC={[mt]:"⌃",[gt]:"⌃",[et]:"⌘",[tt]:"⌘",[bh]:"⌘",[Fh]:"⌘",[is]:"⌥",[os]:"⌥",[Di]:"⇧",[Mi]:"⇧",[ra]:"⌃",[ia]:"⌘",[Lh]:"⌥",[jh]:"⇧",[oa]:pt()?"⌘":"⌃",[qs]:pt()?"⌘":"⌃",[Hs]:pt()?"⌘":"⌃",[Ia]:"0",[Pa]:"1",[ba]:"2",[Fa]:"3",[La]:"4",[ja]:"5",[Va]:"6",[za]:"7",[Wa]:"8",[Ba]:"9",[sr]:"A",[rr]:"B",[ir]:"C",[or]:"D",[ar]:"E",[lr]:"F",[ur]:"G",[cr]:"H",[hr]:"I",[dr]:"J",[fr]:"K",[pr]:"L",[mr]:"M",[gr]:"N",[vr]:"O",[_r]:"P",[yr]:"Q",[wr]:"R",[xr]:"S",[Sr]:"T",[Cr]:"U",[Tr]:"V",[kr]:"W",[Nr]:"X",[Er]:"Y",[Ar]:"Z",[$a]:"F1",[Ua]:"F2",[qa]:"F3",[Ha]:"F4",[Ga]:"F5",[Ka]:"F6",[Ya]:"F7",[Xa]:"F8",[Qa]:"F9",[Za]:"F10",[Ja]:"F11",[el]:"F12",[tl]:"F13",[nl]:"F14",[sl]:"F15",[rl]:"F16",[il]:"F17",[ol]:"F18",[al]:"F19",[ll]:"F20",[ul]:"F21",[cl]:"F22",[hl]:"F23",[dl]:"F24",[fl]:"Numpad0",[pl]:"Numpad1",[ml]:"Numpad2",[gl]:"Numpad3",[vl]:"Numpad4",[_l]:"Numpad5",[yl]:"Numpad6",[wl]:"Numpad7",[xl]:"Numpad8",[Sl]:"Numpad9",[Cl]:"NumpadAdd",[Tl]:"NumpadComma",[kl]:"NumpadDecimal",[Nl]:"NumpadDivide",[El]:"NumpadEnter",[Al]:"NumpadEqual",[Ol]:"NumpadMultiply",[Dl]:"NumpadSubtract",[Ml]:"↓",[Rl]:"←",[Il]:"→",[Pl]:"↑",[bl]:"⌫",[Fl]:"⇪",[Ri]:"⌦",[Ll]:"↘",[Ii]:"⏎",[Pi]:"⎋",[jl]:"↖",[Vl]:"⎀",[zl]:"⇟",[Wl]:"⇞",[bi]:"␣",[Bl]:"⇥",[Ki]:"`",[Yi]:"\\",[Xi]:"[",[Qi]:"]",[Zi]:",",[Ji]:"=",[eo]:"-",[to]:".",[no]:"'",[so]:";",[ro]:"/",[$l]:"NumLock",[Ul]:"ScrollLock",[ql]:"&",[Hl]:"*",[Gl]:"@",[Kl]:"{",[Yl]:"}",[Xl]:"^",[Ql]:":",[Zl]:"$",[Jl]:'"',[eu]:"!",[tu]:">",[nu]:"#",[su]:"<",[ru]:"(",[iu]:")",[ou]:"%",[au]:"|",[io]:"+",[lu]:"?",[uu]:"~",[cu]:"_",[En]:"LeftClick",[An]:"MiddleClick",[On]:"RightClick",[hu]:"Mouse3",[du]:"Mouse4",[fu]:"Mouse5",[pu]:"Mouse6",[mu]:"Mouse7",[gu]:"Mouse8",[vu]:"Mouse9",[Vh]:"§",[zh]:"±"},w0={0:Ia,1:Pa,2:ba,3:Fa,4:La,5:ja,6:Va,7:za,8:Wa,9:Ba},x0={A:sr,B:rr,C:ir,D:or,E:ar,F:lr,G:ur,H:cr,I:hr,J:dr,K:fr,L:pr,M:mr,N:gr,O:vr,P:_r,Q:yr,R:wr,S:xr,T:Sr,U:Cr,V:Tr,W:kr,X:Nr,Y:Er,Z:Ar,a:sr,b:rr,c:ir,d:or,e:ar,f:lr,g:ur,h:cr,i:hr,j:dr,k:fr,l:pr,m:mr,n:gr,o:vr,p:_r,q:yr,r:wr,s:xr,t:Sr,u:Cr,v:Tr,w:kr,x:Nr,y:Er,z:Ar},S0={"`":Ki,"\\":Yi,"[":Xi,"]":Qi,",":Zi,"=":Ji,"-":eo,".":to,"'":no,";":so,"/":ro,"&":ql,"*":Hl,"@":Gl,"{":Kl,"}":Yl,"^":Xl,":":Ql,$:Zl,'"':Jl,"!":eu,">":tu,"#":nu,"<":su,"(":ru,")":iu,"%":ou,"|":au,"+":io,"?":lu,"~":uu,_:cu},C0={"§":Vh,"±":zh},MC={...w0,...x0,...S0,...C0},RC={0:En,1:An,2:On,3:hu,4:du,5:fu,6:pu,7:mu,8:gu,9:vu},om={altleft:is,altright:os,alt:[is,os],optionleft:is,optionright:os,option:[is,os],cmdleft:et,cmdright:tt,cmd:[et,tt],commandleft:et,commandright:tt,command:[et,tt],metaleft:et,metaright:tt,meta:[et,tt],ctrlleft:mt,ctrlright:gt,ctrl:[mt,gt],controlleft:mt,controlright:gt,control:[mt,gt],shiftleft:Di,shiftright:Mi,shift:[Di,Mi],cmdleftorctrlleft:pt()?et:mt,cmdrightorctrlright:pt()?tt:gt,cmdorctrlleft:pt()?et:mt,cmdorctrlright:pt()?tt:gt,cmdorctrl:pt()?[et,tt]:[mt,gt],commandleftorcontrolleft:pt()?et:mt,commandrightorcontrolright:pt()?tt:gt,commandorcontrolleft:pt()?et:mt,commandorcontrolright:pt()?tt:gt,commandorcontrol:pt()?[et,tt]:[mt,gt],clickleft:En,clickmiddle:An,clickright:On,leftclick:En,middleclick:An,rightclick:On,leftmouse:En,middlemouse:An,rightmouse:On,mouseleft:En,mousemiddle:An,mouseright:On,mouse0:En,mouse1:An,mouse2:On,mouse3:hu,mouse4:du,mouse5:fu,mouse6:pu,mouse7:mu,mouse8:gu,mouse9:vu,backspace:bl,capslock:Fl,del:Ri,delete:Ri,down:Ml,end:Ll,enter:Ii,return:Ii,esc:Pi,escape:Pi,home:jl,insert:Vl,left:Rl,pagedown:zl,pageup:Wl,right:Il,space:bi,spacebar:bi,tab:Bl,up:Pl,...w0,...x0,...S0,plus:io,f1:$a,f2:Ua,f3:qa,f4:Ha,f5:Ga,f6:Ka,f7:Ya,f8:Xa,f9:Qa,f10:Za,f11:Ja,f12:el,f13:tl,f14:nl,f15:sl,f16:rl,f17:il,f18:ol,f19:al,f20:ll,f21:ul,f22:cl,f23:hl,f24:dl,numpad0:fl,numpad1:pl,numpad2:ml,numpad3:gl,numpad4:vl,numpad5:_l,numpad6:yl,numpad7:wl,numpad8:xl,numpad9:Sl,numpadadd:Cl,numpadcomma:Tl,numpaddecimal:kl,numpaddivide:Nl,numpadenter:El,numpadequal:Al,numpadmultiply:Ol,numpadsubtract:Dl,numlock:$l,scrolllock:Ul},IC={...om,ctrl:ra,control:ra,cmd:ia,command:ia,alt:Lh,shift:jh,cmdleftorctrlleft:qs,cmdrightorctrlright:Hs,cmdorctrlleft:qs,cmdorctrlright:Hs,cmdorctrl:oa,commandleftorcontrolleft:qs,commandrightorcontrolright:Hs,commandorcontrolleft:qs,commandorcontrolright:Hs,commandorcontrol:oa},PC={48:Ia,49:Pa,50:ba,51:Fa,52:La,53:ja,54:Va,55:za,56:Wa,57:Ba,65:sr,66:rr,67:ir,68:or,69:ar,70:lr,71:ur,72:cr,73:hr,74:dr,75:fr,76:pr,77:mr,78:gr,79:vr,80:_r,81:yr,82:wr,83:xr,84:Sr,85:Cr,86:Tr,87:kr,88:Nr,89:Er,90:Ar,97:sr,98:rr,99:ir,100:or,101:ar,102:lr,103:ur,104:cr,105:hr,106:dr,107:fr,108:pr,109:mr,110:gr,111:vr,112:_r,113:yr,114:wr,115:xr,116:Sr,117:Cr,118:Tr,119:kr,120:Nr,121:Er,122:Ar,96:Ki,92:Yi,91:Xi,93:Qi,44:Zi,61:Ji,45:eo,46:to,39:no,59:so,47:ro,38:ql,42:Hl,64:Gl,123:Kl,125:Yl,94:Xl,58:Ql,36:Zl,34:Jl,33:eu,62:tu,35:nu,60:su,40:ru,41:iu,37:ou,124:au,43:io,63:lu,126:uu,95:cu},Gn=(t,e)=>!!(t&e),bC=t=>t&m0,am=Ra(t=>t.trim().replace(vC,"+Plus").replace(gC,"$1 ").toLowerCase().split(rm).filter(Boolean)),sv=Ra(t=>{const n=t.trim().split(rm).map(LC);return im(n)}),FC=Ra(t=>t.trim().split(rm).map(am).map(r=>r.map(i=>IC[i]||sm))),LC=Ra(t=>{const n=am(t).map(r=>om[r]||sm);return im(n).map(_0)}),rv=t=>{if(Ff(t)){const e=Ce[t.code]||0n;if(e)return[e];const n=MC[t.key]||0n,s=PC[t.which]||0n,r=C0[t.key]?0n:EC[t.code]||0n;return[n,s,r]}else return Lf(t)?[RC[t.button]||0n]:[0n]};class Or{constructor(e={}){this.tree={children:{},handlers:{parent:void 0,prev:void 0,next:void 0,handler:Od}},this.treeKonami={children:{},handlers:{parent:void 0,prev:void 0,next:void 0,handler:Od}},this.onBlur=()=>{const n=this.chords.length-1,s=this.chordsKonami.length-1;this.chords[n]=0n,this.chordsKonami[s]=0n},this.onNormalize=n=>{if(!Ff(n)&&!Lf(n))return;const{altKey:s,ctrlKey:r,metaKey:i,shiftKey:o}=n,a=Ff(n)?n.code:"",l=this.chords.length-1,u=this.chordsKonami.length-1,c=this.chords[l];let h=0n;const d=Gn(c,Ce.AltLeft)||Gn(c,Ce.AltRight),p=Gn(c,Ce.ControlLeft)||Gn(c,Ce.ControlRight),m=Gn(c,Ce.MetaLeft)||Gn(c,Ce.MetaRight),v=Gn(c,Ce.ShiftLeft)||Gn(c,Ce.ShiftRight),x=a==="AltLeft"||a==="AltRight",f=a==="ControlLeft"||a==="ControlRight",g=a==="MetaLeft"||a==="MetaRight"||a==="OSLeft"||a==="OSRight",_=a==="ShiftLeft"||a==="ShiftRight";s&&!d&&!x&&(h|=Ce.AltLeft),r&&!p&&!f&&(h|=Ce.ControlLeft),i&&!m&&!g&&(h|=Ce.MetaLeft),o&&!v&&!_&&(h|=Ce.ShiftLeft),h&&(this.chords[l]|=h,this.chordsKonami[u]|=h);let C=0n;s||(C|=Ce.AltLeft|Ce.AltRight),r||(C|=Ce.ControlLeft|Ce.ControlRight),i||(C|=Ce.MetaLeft|Ce.MetaRight),o||(C|=Ce.ShiftLeft|Ce.ShiftRight),C&&(this.chords[l]&=~C,this.chordsKonami[u]&=~C)},this.onRecord=n=>{if(!this.recorder)return;const s=nv(CC(this.chords,n).reverse().map(r=>Or.format(r,mC)));s&&this.recorder(s)},this.onDown=n=>{if(!this.shouldHandle(n))return;this.onNormalize(n);const s=this.chords.length-1,r=this.chordsKonami.length-1,i=this.chords[s],o=this.chordsKonami[r],a=i&bf,l=o&bf,u=i===a?[[i,o]]:[[i,o],[a,l]],c=kC(TC(rv(n)),0n);this.onRecord(c);for(let h=0,d=c.length;h<d;h++){const p=c[h],m=h===d-1;for(let v=0,x=u.length;v<x;v++){const[f,g]=u[v],_=v===x-1;this.chords[s]=f|p,this.chordsKonami[r]=g|p;const C=!this.recorder&&_C(()=>this.trigger(this.chords,n),!1),w=!!bC(this.chords[s]);if(C||m&&_){C?((!w||Lf(n)||f&Ce.MetaLeft||f&Ce.MetaRight)&&(this.chords=w?[this.chords[s]&~p]:[0n]),n.preventDefault(),n.stopImmediatePropagation()):w&&this.chords.push(this.chords[s]&~p),w&&this.chordsKonami.push(this.chordsKonami[r]&~p),this.recorder?(this.chords.length>this.depthRecorder&&(this.chords=Dd(this.chords,Math.max(1,this.depthRecorder))),this.chordsKonami=[0n]):(this.chords.length>this.depth&&(this.chords=Dd(this.chords,Math.max(1,this.depth))),this.chordsKonami.length>this.depthKonami&&(this.chordsKonami=Dd(this.chordsKonami,Math.max(1,this.depthKonami))));break}}}},this.onUp=n=>{if(!this.shouldHandle(n))return;const s=this.chords.length-1,r=this.chordsKonami.length-1,i=_0(rv(n));this.chords[s]&=~i,this.chordsKonami[r]&=~i},this.record=n=>{const s=this.active;return this.chords=[0n],this.chordsKonami=[0n],this.recorder=n,s||this.start(),()=>{this.chords=[0n],this.chordsKonami=[0n],this.recorder=void 0,s||this.stop()}},this.register=(n,s,r={})=>{var i,o;const a=$c(n).map(sv),l=[],u=!!r.konami;for(const c of a)for(const h of c){let d=u?this.treeKonami:this.tree,p=0;for(const v of h)d=(i=d.children)[o=String(v)]||(i[o]={children:{},handlers:{parent:void 0,prev:void 0,next:void 0,handler:Od}}),p+=1;u?this.depthKonami=Math.max(this.depthKonami,p):this.depth=Math.max(this.depth,p);const m=d.handlers;d.handlers=m.next={parent:d,prev:m,next:void 0,handler:s},l.push(d.handlers)}return()=>{for(const c of l){const{prev:h,next:d}=c;h&&(h.next=d),d&&(d.prev=h),!d&&c.parent&&(c.parent.handlers=h)}}},this.reset=()=>{this.tree.children={},this.treeKonami.children={}},this.trigger=(n,s)=>{const r=v0(n)?nv(sv(n)):$c(n),i=this.chordsKonami;if(!r)return!1;if(this.depthKonami)for(let o=0,a=i.length;o<a;o++){const l=o?i.slice(o):i;let u=this.treeKonami;for(const h of l)u=u?.children[String(h)];let c=u?.handlers;for(;c;)c.handler(s),c=c.prev}if(this.depth)for(let o=0,a=r.length;o<a;o++){const l=o?r.slice(o):r;let u=this.tree;for(const h of l)u=u?.children[String(h)];let c=u?.handlers;for(;c;)if(c.handler(s)!==!0)c=c.prev;else return!0}return!1},this.start=()=>{if(this.active)return;this.active=!0;const n=this.options.capture??!1,s=this.options.target||document;s.addEventListener("keydown",this.onDown,{capture:n}),s.addEventListener("keyup",this.onUp,{capture:n}),s.addEventListener("click",this.onDown,{capture:n}),s.addEventListener("auxclick",this.onDown,{capture:n}),s.addEventListener("contextmenu",this.onDown,{capture:n}),window.addEventListener("blur",this.onBlur)},this.stop=()=>{if(!this.active)return;this.active=!1;const n=this.options.capture??!1,s=this.options.target||document;s.removeEventListener("keydown",this.onDown,{capture:n}),s.removeEventListener("keyup",this.onUp,{capture:n}),s.removeEventListener("click",this.onDown,{capture:n}),s.removeEventListener("auxclick",this.onDown,{capture:n}),s.removeEventListener("contextmenu",this.onDown,{capture:n}),window.removeEventListener("blur",this.onBlur)},this.active=!1,this.chords=[0n],this.chordsKonami=[0n],this.depth=0,this.depthKonami=0,this.depthRecorder=0,this.shouldHandle=e.shouldHandleEvent||y0,this.options=e}}Or.format=(t,e=pC)=>{const n=e==="electron"?OC:e==="symbols"?DC:AC,s=e==="symbols"?"":"+";let o=(v0(t)?FC(t):$c(t).map(a=>a===sm?[]:wC(a))).map(a=>a.sort(yC).map(l=>n[l]||"§").join(s)).join(" ");if(e.includes("-nondirectional")&&(o=o.replace(/(CommandOrControl|Control|Command|Alt|Shift)Left(\S+)\1Right/g,"$1§eft$2$1§ight"),o=o.replace(/(CommandOrControl|Control|Command|Alt|Shift)Right(\S+)\1Left/g,"$1§ight$2$1§eft"),o=o.replace(/(Control|Command|Alt|Shift)(Left|Right)/g,"$1"),o=o.replaceAll("§eft","Left"),o=o.replaceAll("§ight","Right")),e.includes("-inflexible")){const a=pt()?"Command":"Control";o=o.replace(/Command(Left|Right)?OrControl/g,a)}return e.includes("-flexible")&&(o=o.replace(/Control(\S+)Command/g,"§ontrol$1§ommand"),o=o.replace(/Command(\S+)Control/g,"§ommand$1§ontrol"),o=o.replace(/(^|\W)Control/g,"$1CommandOrControl"),o=o.replace(/Command(?!Or|Left|Right)/g,"CommandOrControl"),o=o.replace(/CommandLeft(?!Or)/g,"CommandOrControlLeft"),o=o.replace(/CommandRight(?!Or)/g,"CommandOrControlRight"),o=o.replaceAll("§ontrol","Control"),o=o.replaceAll("§ommand","Command")),e.includes("short-")&&(o=o.replaceAll("Command","Cmd"),o=o.replaceAll("Control","Ctrl")),o};Or.isShortcut=Ra(t=>am(t).every(s=>s in om));Or.record=(t,e={})=>{const n=e.shouldHandleEvent||y0,s=new Or({capture:!0,target:window,shouldHandleEvent:r=>n(r)?(e.passthrough||(r.preventDefault(),r.stopImmediatePropagation()),!0):!1});return s.depthRecorder=e.limit??10,s.record(t)};const T0=new Or({capture:!0,target:window});T0.start();const jC=(...t)=>T0.register(...t),k0=(t,e)=>{const n=xs(Map),s=fC(t);b.useLayoutEffect(()=>{for(const[r,i]of n)s.includes(r)||n.delete(r)&&i();for(const r of s)n.has(r)||n.set(r,jC(r,e))}),b.useEffect(()=>n.forEach.bind(n,r=>r()),[])},jf=new Set,Ys=t=>{for(const e of jf)if(e(t)===!0)return},_u=(t,e)=>{const n=s=>{if(s===t)return e()};return jf.add(n),()=>{jf.delete(n)}},N0=()=>{const[t,e]=b.useState({});return b.useCallback(()=>e({}),[])},sn=t=>{const e=N0(),n=b.useMemo(()=>_u(t,e),[t]);return b.useEffect(()=>n,[n]),t},iv=new Map,Md=new Map,VC=(t,e,n)=>{if(iv.has(t)||iv.set(t,e),Md.has(t))return Md.get(t);var s=!1,r;const i={get value(){if(s)return r;try{const o=localStorage.getItem(t)??"";return r=tv(e,JSON.parse(o))}catch{return this.value=r=n}finally{s=!0}},set value(o){const a=JSON.stringify(r=tv(e,o));localStorage.setItem(t,a),Ys(i)}};return Md.set(t,i),i},E0=(t,e,n)=>{const s=N0(),r=b.useMemo(()=>VC(t,e,n),[t]);return b.useLayoutEffect(()=>_u(r,s),[t]),r};class Fi extends Map{set(e,n){try{return super.set(e,n)}finally{Ys(this)}}delete(e){try{return super.delete(e)}finally{Ys(this)}}clear(){try{return super.clear()}finally{Ys(this)}}map(e){var n=0,s=new Array(this.size);return this.forEach((r,i)=>s[n++]=e(r,i,this)),s}}const zC=t=>{const e=b.useId().replace(/[^\d]/g,"_");return t+e},WC=({func:t})=>(dp(),t()),Q=t=>b.createElement(WC,{func:t}),BC=({r:t=2,fill:e="#fff"})=>y.jsx("circle",{r:t,fill:e}),$C=()=>null,UC=({children:t})=>t,qC="_back_yegag_1",ov={back:qC},HC={circle:BC,custom:UC,clear:$C},GC=({type:t,width:e=50,height:n=50,anchorX:s=.5,anchorY:r=.5,back:i,onClick:o,onMouseDown:a,onContextMenu:l,...u})=>{const c=Wr(),{xLimit:h,yLimit:d}=c,p=zC("back"),{x:m,y:v}=new $(h,d).times(-s),{x,y:f}=new $(e,n).times(-r);return y.jsxs(y.Fragment,{children:[y.jsx("defs",{children:y.jsx("pattern",{id:p,viewBox:`${x} ${f} ${e} ${n}`,width:e,height:n,patternUnits:"userSpaceOnUse",children:Q(()=>HC[t](u))})}),y.jsxs("g",{children:[i&&y.jsx("rect",{className:ov.back,x:m,y:v,width:h,height:d,...i}),y.jsx("rect",{className:ov.back,x:m,y:v,width:h,height:d,fill:`url(#${p})`})]})]})},KC=(t,e="store")=>{const n=Symbol(e);return s=>s[n]??(s[n]=t())},A0=KC(()=>new Set,"connect"),Ds=t=>e=>{const n=A0(e.prototype);t.forEach(s=>n.add(s))},Ms=t=>{const e=b.createContext(null);return[e.Provider,()=>{const r=b.useContext(e);if(!(r instanceof t))throw new Error(`You need provide ${t}`);return r},e]},aa=t=>t instanceof HTMLElement?aa(t.getBoundingClientRect()):$.fromSize(t).div(2).plus(t),YC=(t,...e)=>t instanceof Function?t(...e):t;var Vf=new Set,No=-1,O0=-1,D0=t=>{if(requestAnimationFrame(D0),No<0)return No=t;O0=t-No,No=t,Vf.forEach(la)};requestAnimationFrame(D0);const la=t=>t(No,O0),Wn=(t,e)=>{const n=t;return Vf.add(n),()=>{Vf.delete(n)}},Lo=(t,e)=>(t=t instanceof xe?t:te(e(t)),{__proto__:t,get value(){return t.value},set value(n){t.value=e(n)}}),rn=()=>{const t=te(null);return{get current(){return t.value},set current(e){t.value=e}}},XC=t=>{const{value:e}=t.x,{value:n}=t.y,{value:s}=t.scale,{value:r}=t.width,{value:i}=t.height,o=new $(r,i).div(s),a=o.cdiv(-2).plus(e,n);return new DOMRect(...a,...o)},QC=t=>{const{value:e}=t.left,{value:n}=t.top,{value:s}=t.width,{value:r}=t.height;return new DOMRect(e,n,s,r)},ZC=t=>de(()=>{const{value:e}=t.animation;if(e)return Wn((n,s)=>{e(n,s)===!1&&(t.animation.value=void 0)})}),JC=t=>de(()=>{const{current:e}=t.svg,{value:n}=t.cursor;e&&(e.style.cursor=n)}),M0=(t,e,n)=>{if(Array.isArray(e)){const s=e.map(r=>M0(t,r,n));return()=>{s.forEach(r=>r?.())}}return de(()=>{const{current:s}=t;if(s)return s.addEventListener(e,n),()=>{s.removeEventListener(e,n)}})},Dr=(t,e,n)=>{if(Array.isArray(e)){const s=e.map(r=>Dr(t,r,n));return()=>{s.forEach(r=>r?.())}}return de(()=>{const{current:s}=t;if(s)return s.addEventListener(e,n),()=>{s.removeEventListener(e,n)}})},mn=(t,e)=>{if(Array.isArray(t)){const n=t.map(s=>mn(s,e));return()=>{n.forEach(s=>s())}}return addEventListener(t,e),()=>{removeEventListener(t,e)}},R0=(t,e)=>{if(Array.isArray(t)){const n=t.map(s=>R0(s,e));return()=>{n.forEach(s=>s())}}return document.addEventListener(t,e),()=>{document.removeEventListener(t,e)}},zr=(t,e=0,n=!1)=>(s,r)=>{if(s.button!==e)return;s.preventDefault(),s.stopPropagation();const i=n?$.fromOffsetXY(s):$.fromPageXY(s),o=i.clone(),a=new $(0),l={get start(){return i.clone()},get current(){return o.clone()},get delta(){return a.clone()},get meta(){return r??void 0},target:s.target},u=()=>{c&&(h=c(l))};let c=t(l),h;u();const d=[mn(["mouseup","blur"],p=>{"button"in p&&p.button!==e||(h?.(l),d.forEach(m=>m?.()))}),mn("mousemove",p=>{n?$.fromOffsetXY(p,o):$.fromPageXY(p,o),a.set(i).minus(o),u()}),()=>{c=void 0,h=void 0}]},eT=t=>de(()=>{const{x:e,y:n,scale:s,move:r}=t,{current:i}=t.div,{current:o}=t.svg;if(!i||!o)return;const a=zr(({start:l})=>(t.animation.value=void 0,r.value=!0,l=$.fromSignals(e,n),({delta:u})=>(u.div(s).plus(l).toSignals(e,n),()=>{r.value=!1})),1);return mn("mousedown",l=>{!(l.target instanceof Element)||!o.contains(l.target)||a(l)})}),tT=t=>de(()=>{const{current:e}=t.svg,{value:n}=t.rect;e&&Object.assign(e.viewBox.baseVal,n.toJSON())}),zf=new Set,av=new ResizeObserver(t=>t.forEach(e=>zf.forEach(n=>n(e)))),lm=(t,e)=>{const n=s=>{t===s.target&&e(s)};return zf.add(n),av.observe(t),()=>{zf.delete(n),av.unobserve(t)}},nT=t=>de(()=>t.div.current&&lm(t.div.current,()=>Ns(()=>{const e=t.div.current.getBoundingClientRect();t.left.value=e.left,t.top.value=e.top,t.width.value=e.width,t.height.value=e.height}))),sT=t=>Dr(t.div,"wheel",e=>{t.animation.value=void 0;const{scale:n,x:s,y:r,move:i}=t;if(i.value)return;if(e.preventDefault(),e.stopPropagation(),!e.ctrlKey){const a=$.fromDeltaXY(e);e.shiftKey&&!a.x&&a.inverse(),a.div(n).plus(s,r).toSignals(s,r);return}const o=$.fromPageXY(e);t.toScale(a=>a-e.deltaY*a*.001,o)});function rT(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}class Uc{xLimit=1e4;yLimit=1e4;scaleMin=.1;scaleMax=2;viewPad=50;viewOver=4;div=rn();svg=rn();x=Lo(0,e=>vc(e,this.xLimit,.5));y=Lo(0,e=>vc(e,this.yLimit,.5));scale=Lo(1,e=>zo(e,this.scaleMin,this.scaleMax));animation=te(void 0);top=te(0);left=te(0);width=te(0);height=te(0);move=te(!1);rect=Ft(()=>XC(this));viewRect=Ft(()=>QC(this));cursor=Ft(()=>this.move.value?"grabbing":"default");focus(e,n=500){e instanceof $&&(e=new DOMRect(e.x,e.y,this.width.peek(),this.height.peek()));const s=$.fromSignals(this.x,this.y),r=this.scale.peek(),i=la(l=>l),o=Vs($.fromSize(this.viewRect.value).div($.fromSize(e).plus(100)).min(),this.scaleMax),a=(l=0)=>{l=zo(l,0,1),Ns(()=>{s.citers(aa(e),1-(1-l)*(1-l)).toSignals(this.x,this.y),this.toScale(r+(o-r)*l*l)})};a(0),this.animation.value=l=>(a((l-i)/n),i+n>l)}offset(e){if(!(e instanceof $))return this.offset($.fromPageXY(e));const{value:n}=this.rect,{value:s}=this.viewRect;return e.cminus(s).div(this.scale).plus(n)}toScale(e,n=aa(this.viewRect.value)){const s=this.offset(n);this.scale.value=YC(e,this.scale.peek()),s.minus(this.offset(n)),s.plus(this.x,this.y),s.toSignals(this.x,this.y)}calcViewTransitionVec(e,n){const s=new $(this.viewRect.value),r=$.fromSize(this.viewRect.value).plus(s);return $.fromSignals(this.x,this.y).plus(e.cminus(s).minus(this.viewPad).cropMax(0).cropMin(-this.viewPad*this.viewOver).plus(e.cminus(r).plus(this.viewPad).cropMin(0).cropMax(this.viewPad*this.viewOver)).times(n*.01/this.scale.value))}}Uc=rT([Ds([JC,eT,tT,nT,sT,ZC])],Uc);const[iT,Wr]=Ms(Uc),Ss=t=>{b.useEffect(()=>{const e=[...A0(t)].map(n=>n(t));return()=>{e.forEach(n=>n?.())}},[t])},Qt=(t,e=2)=>t instanceof xe?Q(()=>Qt(t.value,e)):t.toFixed(e),oT="_map_7zibs_1",aT={map:oT};class lT extends b.Component{ctx=new Uc;render(){const{ctx:e,props:n}=this,{children:s}=n;return y.jsx(iT,{value:e,children:Q(()=>(Ss(e),y.jsxs(y.Fragment,{children:[y.jsx("div",{className:aT.map,ref:e.div,children:y.jsx("svg",{ref:e.svg,viewBox:"0 0 0 0",children:s})}),y.jsx(fm,{title:"NodeMap",children:{PosX:y.jsx(y.Fragment,{children:Qt(e.x)}),PosY:y.jsx(y.Fragment,{children:Qt(e.y)}),Scale:y.jsx(y.Fragment,{children:Qt(e.scale)}),Width:y.jsx(y.Fragment,{children:Qt(e.width)}),Height:y.jsx(y.Fragment,{children:Qt(e.height)})}})]})))})}}const um=t=>({children:e})=>Q(()=>t.current&&f0.createPortal(e,t.current)),uT=t=>{const{value:e}=t.x,{value:n}=t.y,{value:s}=t.width,{value:r}=t.height,i=new $(s,r),o=i.cdiv(-2).plus(e,n);return new DOMRect(...o,...i)},cT=t=>de(()=>{const{current:e}=t.ref,{current:n}=t.div;return Dr(t.div,"dblclick",s=>{if(!(s.button||!(s.target instanceof Element))&&!(!e||!n)){for(const r of n.querySelectorAll("[data-drag]"))if(r instanceof HTMLElement&&(r===s.target||r.contains(s.target))){r.dataset.drag="move",t.list.map.focus(t.rect.value);return}}})}),hT=t=>de(()=>{const{current:e}=t.ref,{current:n}=t.div,{map:s,x:r,y:i}=t,o=zr(({start:a,current:l,meta:u})=>{const c=s.offset(a),h=$.fromSignals(r,i).minus(c),d=[...t.selection.items].filter(v=>v!==t),p=d.map(v=>$.fromSignals(v.x,v.y).minus(c)),m=Wn((v,x)=>{s.calcViewTransitionVec(l,x).toSignals(s.x,s.y);const f=s.offset(l);h.cplus(f).toSignals(r,i),p.forEach((g,_)=>{const{x:C,y:w}=d[_];g.cplus(f).toSignals(C,w)})});return({current:v})=>(l.set(v),()=>{m(),u&&(u.dataset.drag="true")})});return Dr(t.div,"mousedown",a=>{if(!(a.button||!(a.target instanceof Element))&&!(!e||!n)){t.focus(),a.ctrlKey||a.metaKey?t.selection.toggleInSelection(t):t.selection.toSelection(t);for(const l of n.querySelectorAll("[data-drag]"))if(l instanceof HTMLElement&&(l===a.target||l.contains(a.target)))return l.dataset.drag="move",o(a,l)}})}),dT=t=>de(()=>{const{current:e}=t.ref,{value:n}=t.rect;e&&(e.x.baseVal.value=n.x,e.y.baseVal.value=n.y,e.width.baseVal.value=n.width,e.height.baseVal.value=n.height)}),fT=t=>de(()=>t.div.current&&lm(t.div.current,({contentRect:e})=>Ns(()=>{t.width.value=e.width,t.height.value=e.height})));function pT(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}const mT=20;class ua{id;map;list;selection;ref;div;x;y;color;width;height;move;rect;input;output;focus(){this.list.focus(this)}constructor(e,n,s,r){this.id=e,this.map=n,this.list=s,this.selection=r,this.ref=rn(),this.div=rn(),this.x=Lo(0,i=>vc(i,this.map.xLimit,.5)|0),this.y=Lo(0,i=>vc(i,this.map.yLimit,.5)|0),this.color=te(""),this.width=te(0),this.height=te(0),this.move=te(!1),this.rect=Ft(()=>uT(this)),this.input=new Fi,this.output=new Fi,this.Portal=um(this.div)}Portal}ua=pT([Ds([fT,dT,hT,cT])],ua);const[gT,cm]=Ms(ua),vT="_foregin_14lel_1",_T="_container_14lel_9",yT="_resizer_14lel_13",Rd={foregin:vT,container:_T,resizer:yT},wT=({ctx:t})=>(Ss(t),y.jsx("foreignObject",{id:t.id,ref:t.ref,className:Rd.foregin,children:y.jsx("div",{className:Rd.container,children:y.jsx("div",{ref:t.div,className:Rd.resizer})})})),xT=t=>({id:e,x:n=0,y:s=0,color:r="#999",...i})=>{const o=yu().useItem(e);return b.useEffect(()=>Ns(()=>{o.x.value=n,o.y.value=s,o.color.value=r}),[n,s,r]),y.jsx(gT,{value:o,children:y.jsx(o.Portal,{children:y.jsx(t,{...i})})})};class ST extends b.Component{map;ctx=new Hc(this);render(){const{ctx:e,props:n}=this,{children:s}=n;return y.jsx(zT,{value:e,children:Q(()=>(this.map=Wr(),Ss(e),y.jsxs(y.Fragment,{children:[s,y.jsx("g",{ref:e.ref,children:Q(()=>{sn(e.list);var r;return y.jsxs(y.Fragment,{children:[e.list.map((i,o)=>(r=i,y.jsx(wT,{ctx:i},o))),y.jsx(fm,{title:"Active Item",children:r?{Id:r.id,PosX:y.jsx(y.Fragment,{children:Qt(r.x)}),PosY:y.jsx(y.Fragment,{children:Qt(r.y)}),Width:y.jsx(y.Fragment,{children:Qt(r.width)}),Height:y.jsx(y.Fragment,{children:Qt(r.height)})}:{Id:"None",PosX:"None",PosY:"None",Width:"None",Height:"None"}})]})})})]})))})}}const I0=(t,e,n,s=[])=>(b.useEffect(()=>(t.set(e,n),()=>{t.delete(e)}),s),n),CT=["x","y","width","height"],TT={linear:t=>t,"easy-in":t=>t*t,"ease-out":t=>t*(2-t),"ease-in-out":t=>t<.5?2*t*t:-1+(4-2*t)*t,"cubic-ease-in":t=>t*t*t,"cubic-ease-out":t=>--t*t*t+1,ease:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},lv=t=>{const e=t[0];if(e instanceof $&&t[1]instanceof $){const n=e.toRect(t[1]);return[n.x,n.y,n.width,n.height]}if(e instanceof DOMRect)return[e.x,e.y,e.width,e.height];if(t.filter(n=>typeof n=="number").length===4)return t;if(t.filter(n=>n instanceof xe).length===4)return t.map(s=>s.peek());if(typeof e=="object"&&Object.keys(e).filter(n=>CT.includes(n)).length===4)return Object.values(e);throw new Error("Unknown format")};class ci extends DOMRect{constructor(...e){super(...lv(e))}*[Symbol.iterator](){yield this.x,yield this.y,yield this.width,yield this.height}get start(){return new $(this.left,this.top)}get end(){return new $(this.right,this.bottom)}get size(){return new $(this.width,this.height)}get topLeft(){return new $(this.left,this.top)}get topRight(){return new $(this.right,this.top)}get bottomLeft(){return new $(this.left,this.bottom)}get bottomRight(){return new $(this.right,this.bottom)}get tuple(){return lv([this])}get vecTuple(){return[this.topLeft,this.bottomRight]}_checkInRect(e,n,s){const[r,i]=n?[this,e]:[e,this],{left:o,top:a,bottom:l,right:u}=i,{left:c,top:h,bottom:d,right:p}=r,m=s?.margin||0;return o+m>=c&&a+m>=h&&l-m<=d&&u-m<=p}inRect(e,n){return this._checkInRect(e,!1,n)}wrapRect(e,n){return this._checkInRect(e,!0,n)}toString(){`${this.x}${this.y}${this.width}${this.height}`}center(){return $.fromSize(this).div(2).plus(this)}iterTo(e,n,s={timeFunction:"linear"}){n=zo(n,0,1);const r=TT[s.timeFunction];return n=r(n),new ci(Qr(this.x,e.x,n),Qr(this.y,e.y,n),Qr(this.width,e.width,n),Qr(this.height,e.height,n))}intersectRect(e){const n=Math.max(this.left,e.left),s=Math.max(this.top,e.top),r=Math.min(this.right,e.right),i=Math.min(this.bottom,e.bottom),o=Math.max(0,r-n),a=Math.max(0,i-s);return new ci(n,s,o,a)}intersects(e){return!(e.left>this.right||e.right<this.left||e.top>this.bottom||e.bottom<this.top)}distanceTo(e){const n=Math.max(e.left-this.right,this.left-e.right,0),s=Math.max(e.top-this.bottom,this.top-e.bottom,0);return new $(n,s)}unionRect(e){const n=Math.min(this.left,e.left),s=Math.min(this.top,e.top),r=Math.max(this.right,e.right),i=Math.max(this.bottom,e.bottom),o=r-n,a=i-s;return new ci(n,s,o,a)}scale(e,n=e){const{x:s,y:r}=this.center(),i=this.width*e,o=this.height*n;return new ci(s-i/2,r-o/2,i,o)}static fromParams(...e){return new this(...e)}}const kT=t=>de(()=>{const{selectFrom:e,selectTo:n,list:s}=t,{map:r}=s,i=zr(({start:o,current:a})=>{r.animation.value=void 0,e.value=r.offset(o);const l=Wn((u,c)=>{r.calcViewTransitionVec(a,c).toSignals(r.x,r.y),n.value=r.offset(a)});return({current:u})=>(a.set(u),()=>{if(e.value&&n.value){const c=new ci(e.value,n.value);s.list.forEach(h=>{c.wrapRect(h.rect.value,{margin:mT})&&t.toSelection(h,!0)})}l(),n.value=void 0,e.value=void 0})},0);return mn("mousedown",o=>{!(o.target instanceof Element)||o.target!==r.svg.current||(o.shiftKey||t.clearSelection(),i(o))})});class Li extends Set{add(e){var n=this.size;try{return super.add(e)}finally{n!==this.size&&Ys(this)}}delete(e){var n=this.size;try{return super.delete(e)}finally{n!==this.size&&Ys(this)}}clear(){var e=this.size;try{return super.clear()}finally{e!==this.size&&Ys(this)}}map(e){var n=0,s=new Array(this.size);return this.forEach(r=>s[n]=e(r,n++,this)),s}}function NT(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}class qc{list;items=new Li;selectFrom=te(void 0);selectTo=te(void 0);constructor(){}toSelection(e,n=!1){!n&&!this.items.has(e)&&this.items.clear(),this.items.add(e)}toggleInSelection(e){this.items.has(e)?this.items.delete(e):this.items.add(e)}clearSelection(){this.items.clear()}}qc=NT([Ds([kT])],qc);const[ET,P0]=Ms(qc),b0=(...t)=>b.forwardRef(...t),AT=b0(({from:t,to:e},n)=>{const{Portal:s}=V0();return y.jsx(s,{children:Q(()=>{const r=t.value,i=e.value,o=r.clone().cropMax(i),l=r.clone().cropMin(i).cminus(o).abs();return y.jsx(y.Fragment,{children:y.jsx("rect",{x:o.x,y:o.y,width:l.x,height:l.y,rx:5,ry:5,ref:n,stroke:"hsla(0, 0%, 100%, .5)",fill:"hsla(0, 0%, 50%, .5)",strokeWidth:1})})})})});class OT extends b.Component{ctx=new qc;render(){const{ctx:e}=this;return y.jsxs(ET,{value:e,children:[Q(()=>(e.list=yu(),Ss(e),null)),this.props.children,Q(()=>e.selectFrom.value&&e.selectTo.value&&y.jsx(AT,{from:e.selectFrom,to:e.selectTo}))]})}}const DT=t=>{const{value:e}=t.x,{value:n}=t.y,{value:s}=t.width,{value:r}=t.height;return new DOMRect(e,n,s,r)};var MT=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,r,i;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(r=s;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=s;r--!==0;){var o=i[r];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const RT=gw(MT);class IT{#e=new Map;#n;#t;constructor(e,n,s,r){this.#n=i=>{var o=[];this.#e.forEach((a,l)=>{const u=e(l);n(a,u)||(o.push(s(u,l,i)),this.#e.set(l,u))}),o.length&&r(o)}}observe(e){return this.#e.set(e,null),la(this.#n),this.#t||(this.#t=Wn(this.#n)),()=>{this.unobserve(e)}}unobserve(e){this.#e.delete(e),this.#t&&this.#e.size&&this.disconnect()}disconnect(){this.#e.clear(),this.#t?.(),this.#t=void 0}}class PT extends DOMRect{target;time;constructor({x:e,y:n,width:s,height:r},i,o){super(e,n,s,r),this.target=i,this.time=o}}class bT extends IT{constructor(e){super(n=>n.getBoundingClientRect(),(n,s)=>RT(n?.toJSON(),s.toJSON()),(...n)=>new PT(...n),e)}}const Wf=new Set,uv=new bT(t=>t.forEach(e=>Wf.forEach(n=>n(e)))),FT=(t,e)=>{const n=s=>{t===s.target&&e(s)};return Wf.add(n),uv.observe(t),()=>{Wf.delete(n),uv.unobserve(t)}},LT=t=>de(()=>{if(t.ref.current)return FT(t.ref.current,()=>{Ns(()=>{const e=t.ref.current?.getBBox();t.x.value=e.x??0,t.y.value=e.y??0,t.width.value=e.width??0,t.height.value=e.height??0})})}),jT=t=>(t.itemsCount.value=t.list.size,_u(t.list,()=>t.itemsCount.value=t.list.size));function VT(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}class Hc{listElem;ref;get map(){return this.listElem.map}list;itemsCount;x;y;width;height;rect;constructor(e){this.listElem=e,this.ref=rn(),this.list=new Fi,this.itemsCount=te(0),this.x=te(0),this.y=te(0),this.width=te(0),this.height=te(0),this.rect=Ft(()=>DT(this))}focus(e){e instanceof ua&&(e=e.id);const n=this.list.get(e);n&&Ns(()=>{this.list.delete(e)&&this.list.set(e,n)})}useItem(e){const n=b.useId(),s=P0();e=e??n;const r=xs(ua,e,this.map,this,s);return I0(this.list,e,r,[e,r])}}Hc=VT([Ds([LT,jT])],Hc);const[zT,yu]=Ms(Hc),WT="_hud_103fo_1",BT="_item_103fo_6",$T="_container_103fo_11",Id={hud:WT,item:BT,container:$T};class UT extends b.Component{ctx=new L0;render(){const{ctx:e,props:n}=this,{children:s}=n;return y.jsx(HT,{value:e,children:y.jsxs("div",{ref:e.ref,className:Id.container,children:[s,y.jsx("div",{className:Id.hud,children:Q(()=>sn(e.list).map((r,i)=>b.createElement(()=>(dp(),y.jsx("div",{className:Id.item,ref:r.ref,hidden:!r.show.value},i)),{key:i})))})]})})}}const F0=(t,e,n=[])=>(b.useEffect(()=>(t.add(e),()=>{t.delete(e)}),n),e);class qT{hud;ref;show;constructor(e){this.hud=e,this.ref=rn(),this.show=te(!0),this.Portal=um(this.ref)}Portal}class L0{ref=rn();list=new Li;useItem(){const e=xs(qT,this);return F0(this.list,e,[e])}Portal=e=>{const n=this.useItem();return b.createElement(n.Portal,e)}}const[HT,wu]=Ms(L0);class GT extends b.Component{ctx=new j0;renderItem(e){return y.jsx("g",{ref:e.ref},e.id)}render(){const{props:{children:e}}=this,{before:n,after:s}=this.ctx;return y.jsxs(XT,{value:this.ctx,children:[Q(()=>sn(n).map(this.renderItem)),e,Q(()=>sn(s).map(this.renderItem))]})}}const hm=(t=0)=>e=>(typeof e=="number"&&(t=e),t++),KT=hm();class YT{id=KT();ref=rn();Portal=um(this.ref)}class j0{before=new Li;after=new Li;useItem(e=!1){const{before:n,after:s}=this,r=e?n:s,i=xs(YT);return F0(r,i)}Portal=({isBefore:e=!1,...n})=>{const s=this.useItem(e);return b.createElement(s.Portal,n)}}const[XT,V0]=Ms(j0);class QT{map=new Map;moveTo(e){return this.map.set("M",e.tuple),this}lineTo(e){return this.map.set("L",e.tuple),this}lineToHorizontal(e){const n=this.map.get("M");if(!n)return this;const s=n[1];return this.map.set("H",[e,s]),this}lineToVertical(e){const n=this.map.get("M");if(!n)return this;const s=n[0];return this.map.set("V",[s,e]),this}cubicBezierCurve(...e){return this.map.set("C",e.map(n=>n.tuple).flat()),this}cubicSmoothBezierCurve(...e){return this.map.set("S",e.map(n=>n.tuple).flat()),this}quadraticBezierCurve(...e){return this.map.set("Q",e.map(n=>n.tuple).flat()),this}quadraticSmoothBezierCurve(...e){return this.map.set("T",e.map(n=>n.tuple).flat()),this}ellipticalArcCurve(...e){return this.map.set("A",e.map(n=>typeof n=="number"?n:n.tuple).flat()),this}closePath(){return this.map.set("Z",[]),this}toString(){const e=[];return this.map.forEach((n,s)=>{e.push(`${s}${n.join(" ")}`)}),e.join(" ")}}const ZT="_line_1oeb3_1",JT={line:ZT},cv=(t,e,n,s=n)=>{const r=new QT,i=t.cminus(e).abs().div(2,4).cropMax(250,50),o=t.cplus(i.ctimes(n,0)),a=e.cminus(i.ctimes(s,0));return r.moveTo(t).cubicBezierCurve(o,a,e.cplus(1e-4)).toString()},hv=b0(({vec:t,from:e,to:n},s)=>{const{Portal:r}=V0();return n?y.jsx(r,{isBefore:!0,children:Q(()=>{const{position:{value:i},color:{value:o},isOutput:a,id:l}=e,{position:{value:u},color:{value:c},id:h}=n,d=`from-${l}-to-${h}`;return y.jsxs(y.Fragment,{children:[y.jsxs("linearGradient",{id:d,x1:`${i.x<u.x?0:100}%`,y1:"0%",x2:`${i.x>u.x?0:100}%`,y2:"0%",children:[y.jsx("stop",{offset:"0%",style:{stopColor:o,stopOpacity:1}}),y.jsx("stop",{offset:"100%",style:{stopColor:c,stopOpacity:1}})]}),y.jsx("path",{d:cv(i,u,a?1:-1),stroke:`url(#${d})`,className:JT.line,ref:s,strokeWidth:5,fill:"transparent"})]})})}):t?y.jsx(r,{isBefore:!0,children:Q(()=>{const{value:i}=e.position,{value:o}=t;return o?y.jsx("path",{d:cv(i,o,e.isOutput?1:-1,0),stroke:"#666",fill:"none",strokeWidth:5}):null})}):null});class ek extends b.Component{ctx=new Gc;render(){const{ctx:e}=this;return y.jsxs(lk,{value:e,children:[Q(()=>(e.map=Wr(),Ss(e),null)),this.props.children,Q(()=>sn(e.list).map((n,s)=>b.createElement(()=>(Ss(n),y.jsx(hv,{...n})),{key:s}))),Q(()=>e.active.value&&y.jsx(hv,{from:e.active.value,vec:e.mouse}))]})}}const tk=t=>de(()=>{const{current:e}=t.ref,{from:n,to:s}=t;if(!e)return;const r=zr(({current:i})=>{i=t.list.nodemap.offset(i);const o=new $(n.position.value).distance(i),a=new $(s.position.value).distance(i),l=o<a?s:n;t.list.delete(t),t.list.lines.active.value=l,t.list.lines.mouse.value=i});return M0(t.ref,"mousedown",r)}),nk=t=>de(()=>{(!t.to.item.ref.current||!t.from.item.ref.current)&&t.list.delete(t)});function sk(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}class Bf{from;to;list;ref;constructor(e,n,s){this.from=e,this.to=n,this.list=s,this.ref=rn()}}Bf=sk([Ds([tk,nk])],Bf);class rk extends Li{lines;get nodemap(){return this.lines.map}constructor(e){super(),this.lines=e}delete(e){const{from:n,to:s}=e;return n.onDisconnect&&!n.onDisconnect?.(s)||s.onDisconnect&&!s.onDisconnect?.(n)?!1:super.delete(e)}connect(e,n){if(e.isOutput!==n.isOutput&&e.item!==n.item){n.isOutput&&([e,n]=[n,e]);for(const s of this)if(s.from===e&&s.to===n)return;try{if(e.onConnect&&!e.onConnect?.(n)||n.onConnect&&!n.onConnect?.(e))return;this.add(new Bf(e,n,this))}catch(s){console.error(s)}}}}const ik=t=>de(()=>{const{value:e}=t.active;if(!e)return;const{map:n}=t;return mn("mousemove",s=>{t.mouse.value=n.offset($.fromPageXY(s))})}),ok=t=>de(()=>{const{value:e}=t.active;if(e)return mn("mouseup",()=>{t.active.value=null,t.mouse.value=null})});function ak(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}class Gc{map;list=new rk(this);mouse=te(null);active=te(null);from(e){this.active.value=e}to(e){const n=this.active.peek();n&&this.list.connect(n,e),this.active.value=null,this.mouse.value=null}}Gc=ak([Ds([ik,ok])],Gc);const[lk,uk]=Ms(Gc),ck=t=>{const{current:e}=t.ref,{item:n}=t,{map:s}=n;return e?(n.width.value,n.height.value,s.offset(aa(e.getBoundingClientRect())).minus(n.x,n.y)):new $},hk=t=>$.fromSignals(t.item.x,t.item.y).plus(t.correct.value),dm=t=>()=>{t.forEach(e=>e?.())},dk=t=>de(()=>{if(!t.ref.current)return;const{lines:e}=t,{map:n}=e,s=zr(({current:r})=>{const i=Wn((o,a)=>{n.calcViewTransitionVec(r,a).toSignals(n.x,n.y),e.mouse.value=n.offset(r)});return({current:o})=>(r.set(o),i)});return dm([Dr(t.ref,"mousedown",r=>(t.lines.from(t),s(r))),Dr(t.ref,"mouseup",()=>{t.lines.to(t)})])});function fk(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}class $f{id;isOutput;item;lines;ref;position;correct;title;color;meta;onConnect;onDisconnect;constructor(e,n=!1,s,r){this.id=e,this.isOutput=n,this.item=s,this.lines=r,this.ref=rn(),this.position=Ft(()=>hk(this)),this.correct=Ft(()=>ck(this)),this.title=te("port"),this.color=te("#999")}static usePort(e,n=!1){const s=cm(),r=uk(),i=xs(this,e,n,s,r),o=n?s.output:s.input;return I0(o,e,i,[e,i,o])}}$f=fk([Ds([dk])],$f);const pk=({id:t,output:e,title:n,color:s,meta:r,onConnect:i,onDisconnect:o})=>{const a=b.useId(),l=$f.usePort(t??a,e);return l.meta=r,l.onConnect=i,l.onDisconnect=o,b.useEffect(()=>{l.title.value=n??l.title.peek(),l.color.value=s??l.color.peek()},[l,n,s]),Ss(l),null},mk="_content_vi8er_1",gk="_debug_vi8er_5",vk="_item_vi8er_27",_k="_head_vi8er_31",yk="_contents_vi8er_34",Ku={content:mk,debug:gk,item:vk,head:_k,contents:yk},z0=b.createContext(null),W0=b.createContext(null),wk=(t,e)=>{const n=b.useId(),s=b.useContext(z0),r=b.useContext(W0);if(!s||!r)throw new Error("Using only in DebugCTX");return b.useLayoutEffect(()=>{s.set(n,t),r.set(n,e??"Unnamed")}),b.useEffect(()=>()=>{s.delete(n),r.delete(n)},[]),null},B0=dC(),xk=({children:t})=>{const e=E0("SHOW_DEBUG",B0,!1),n=xs(Fi),s=xs(Fi),r=wu();return sn(n),sn(s),k0("`",()=>{e.value=!e.value}),y.jsxs(y.Fragment,{children:[y.jsx(z0.Provider,{value:n,children:y.jsx(W0.Provider,{value:s,children:t})}),y.jsx(r.Portal,{children:y.jsx("div",{className:Ku.debug,"data-show":e.value||void 0,children:n.size?n.map((i,o)=>y.jsxs("div",{className:Ku.item,children:[y.jsxs("h4",{className:Ku.head,children:[s.get(o)??"Unnamed",":"]}),y.jsx("div",{className:Ku.contents,children:Object.entries(i).map(([a,l])=>b.createElement(b.Fragment,{key:a},[y.jsxs("span",{children:[a,":"]},a+"key"),y.jsx("span",{children:l},a+"value")]))})]},o)):y.jsx("p",{children:"Debug empty"})},"debug")})]})},fm=({children:t,title:e})=>wk(t,e),Sk=t=>de(()=>{const{current:e}=t.canvas,{list:n,width:s,height:r}=t,{map:i}=n;if(!e)return;const o=zr(({current:a})=>{i.animation.value=void 0;const u=i.xLimit/s,c=new $(s,r).div(2),h=Wn(()=>{a.cminus(c).times(u).toSignals(i.x,i.y)});return({current:d})=>(a.set(d),h)},0,!0);return Dr(t.canvas,"mousedown",a=>{a.button||!(a.target instanceof Element)||o(a)})});function Ck(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}class Kc{list;canvas=rn();width=180;height=180}Kc=Ck([Ds([Sk])],Kc);const[Tk,FR]=Ms(Kc),$0=({children:t})=>{const e=wu();return y.jsx(e.Portal,{children:t})},kk="_map_kpbe5_1",Nk={map:kk},Ek=()=>y.jsx($0,{children:y.jsx(Ak,{})});class Ak extends b.Component{ctx=new Kc;render(){const{ctx:e}=this;return y.jsx(Tk,{value:e,children:Q(()=>(e.list=yu(),Ss(e),y.jsx(Ok,{ctx:e})))})}}const Ok=({ctx:t})=>{const{list:e,canvas:n,height:s,width:r}=t,{map:i}=e,o=E0("SHOW_MAP",B0,!1),a=At(0);return de(()=>{if(!n||!n.current)return;const l=n.current.getContext("2d"),u=i.xLimit,c=i.yLimit,h=r/u,d=new $(u,c).div(2);l.clearRect(0,0,r,s),a.value,e.list.forEach(p=>{l.fillStyle=p.color.value,l.fillRect(d.cplus($.fromPoint(p.rect.value)).times(h),$.fromSize(p.rect.value).times(h))}),l.strokeStyle="hsl(0, 50%, 60%)",l.strokeRect(d.cplus($.fromPoint(i.rect.value)).times(h),$.fromSize(i.viewRect.value).times(h).div(i.scale.value))}),b.useEffect(()=>_u(e.list,()=>{a.value++})),k0("m",()=>{o.value=!o.value}),y.jsx("canvas",{width:r,height:s,className:Nk.map,ref:n,"data-show":o.value||void 0})},U0="14.7.77",dv=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),fv=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Uf=(t,e)=>({startTime:e,type:"setValue",value:t}),q0=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),H0=(t,e,{startTime:n,target:s,timeConstant:r})=>s+(e-s)*Math.exp((n-t)/r),hi=t=>t.type==="exponentialRampToValue",Yc=t=>t.type==="linearRampToValue",Zn=t=>hi(t)||Yc(t),pm=t=>t.type==="setValue",kn=t=>t.type==="setValueCurve",Xc=(t,e,n,s)=>{const r=t[e];return r===void 0?s:Zn(r)||pm(r)?r.value:kn(r)?r.values[r.values.length-1]:H0(n,Xc(t,e-1,r.startTime,s),r)},pv=(t,e,n,s,r)=>n===void 0?[s.insertTime,r]:Zn(n)?[n.endTime,n.value]:pm(n)?[n.startTime,n.value]:kn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Xc(t,e-1,n.startTime,r)],qf=t=>t.type==="cancelAndHold",Hf=t=>t.type==="cancelScheduledValues",Kn=t=>qf(t)||Hf(t)?t.cancelTime:hi(t)||Yc(t)?t.endTime:t.startTime,mv=(t,e,n,{endTime:s,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((t-e)/(s-e)):0,gv=(t,e,n,{endTime:s,value:r})=>n+(t-e)/(s-e)*(r-n),Dk=(t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]},Mk=(t,{duration:e,startTime:n,values:s})=>{const r=(t-n)/e*(s.length-1);return Dk(s,r)},Yu=t=>t.type==="setTarget";class Rk{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Kn(e);if(qf(e)||Hf(e)){const s=this._automationEvents.findIndex(i=>Hf(e)&&kn(i)?i.startTime+i.duration>=n:Kn(i)>=n),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),qf(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Zn(r)){if(i!==void 0&&Yu(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:kn(i)?i.startTime+i.duration:Kn(i),a=i===void 0?this._defaultValue:kn(i)?i.values[i.values.length-1]:i.value,l=hi(r)?mv(n,o,a,r):gv(n,o,a,r),u=hi(r)?dv(l,n,this._currenTime):fv(l,n,this._currenTime);this._automationEvents.push(u)}if(i!==void 0&&Yu(i)&&this._automationEvents.push(Uf(this.getValue(n),n)),i!==void 0&&kn(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,l=Math.max(2,1+Math.ceil(o*a)),u=o/(l-1)*a,c=i.values.slice(0,l);if(u<1)for(let h=1;h<l;h+=1){const d=u*h%1;c[h]=i.values[h-1]*(1-d)+i.values[h]*d}this._automationEvents[this._automationEvents.length-1]=q0(c,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>Kn(o)>n),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&kn(r)&&Kn(r)+r.duration>n)return!1;const i=hi(e)?dv(e.value,e.endTime,this._currenTime):Yc(e)?fv(e.value,n,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(kn(e)&&n+e.duration>Kn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(s=>Kn(s)>e);if(n>1){const s=this._automationEvents.slice(n-1),r=s[0];Yu(r)&&s.unshift(Uf(Xc(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Kn(o)>e),s=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(i!==void 0&&Yu(i)&&(s===void 0||!Zn(s)||s.insertTime>e))return H0(e,Xc(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&pm(i)&&(s===void 0||!Zn(s)))return i.value;if(i!==void 0&&kn(i)&&(s===void 0||!Zn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?Mk(e,i):i.values[i.values.length-1];if(i!==void 0&&Zn(i)&&(s===void 0||!Zn(s)))return i.value;if(s!==void 0&&hi(s)){const[o,a]=pv(this._automationEvents,r,i,s,this._defaultValue);return mv(e,o,a,s)}if(s!==void 0&&Yc(s)){const[o,a]=pv(this._automationEvents,r,i,s,this._defaultValue);return gv(e,o,a,s)}return this._defaultValue}}const Ik=t=>({cancelTime:t,type:"cancelAndHold"}),Pk=t=>({cancelTime:t,type:"cancelScheduledValues"}),bk=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),Fk=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),Lk=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),jk=()=>new DOMException("","AbortError"),Vk=t=>(e,n,[s,r,i],o)=>{t(e[r],[n,s,i],a=>a[0]===n&&a[1]===s,o)},zk=t=>(e,n,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},Wk=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ji=new WeakSet,G0=new WeakMap,mm=new WeakMap,K0=new WeakMap,gm=new WeakMap,Wh=new WeakMap,Y0=new WeakMap,Gf=new WeakMap,Kf=new WeakMap,Yf=new WeakMap,X0={construct(){return X0}},Bk=t=>{try{const e=new Proxy(t,X0);new e}catch{return!1}return!0},vv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,_v=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),r=s.match(vv);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(vv)}return[n.join(";"),s]},yv=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},wv=t=>{if(!Bk(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},$k=(t,e,n,s,r,i,o,a,l,u,c,h,d)=>{let p=0;return(m,v,x={credentials:"omit"})=>{const f=c.get(m);if(f!==void 0&&f.has(v))return Promise.resolve();const g=u.get(m);if(g!==void 0){const w=g.get(v);if(w!==void 0)return w}const _=i(m),C=_.audioWorklet===void 0?r(v).then(([w,T])=>{const[k,S]=_v(w,T),E=`${k};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${S}
})})(window,'_AWGS')`;return n(E)}).then(()=>{const w=d._AWGS.pop();if(w===void 0)throw new SyntaxError;s(_.currentTime,_.sampleRate,()=>w(class{},void 0,(T,k)=>{if(T.trim()==="")throw e();const S=Kf.get(_);if(S!==void 0){if(S.has(T))throw e();wv(k),yv(k.parameterDescriptors),S.set(T,k)}else wv(k),yv(k.parameterDescriptors),Kf.set(_,new Map([[T,k]]))},_.sampleRate,void 0,void 0))}):Promise.all([r(v),Promise.resolve(t(h,h))]).then(([[w,T],k])=>{const S=p+1;p=S;const[E,N]=_v(w,T),L=`${E};((AudioWorkletProcessor,registerProcessor)=>{${N}
})(${k?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${k?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${k?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${S}',class extends AudioWorkletProcessor{process(){return !1}})`,q=new Blob([L],{type:"application/javascript; charset=utf-8"}),W=URL.createObjectURL(q);return _.audioWorklet.addModule(W,x).then(()=>{if(a(_))return _;const B=o(_);return B.audioWorklet.addModule(W,x).then(()=>B)}).then(B=>{if(l===null)throw new SyntaxError;try{new l(B,`__sac${S}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(W))});return g===void 0?u.set(m,new Map([[v,C]])):g.set(v,C),C.then(()=>{const w=c.get(m);w===void 0?c.set(m,new Set([v])):w.add(v)}).finally(()=>{const w=u.get(m);w!==void 0&&w.delete(v)}),C}},on=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Bh=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return t.delete(s),s},Q0=(t,e,n,s)=>{const r=on(t,e),i=Bh(r,o=>o[0]===n&&o[1]===s);return r.size===0&&t.delete(e),i},xu=t=>on(Y0,t),Vi=t=>{if(ji.has(t))throw new Error("The AudioNode is already stored.");ji.add(t),xu(t).forEach(e=>e(!0))},Z0=t=>"port"in t,Su=t=>{if(!ji.has(t))throw new Error("The AudioNode is not stored.");ji.delete(t),xu(t).forEach(e=>e(!1))},Xf=(t,e)=>{!Z0(t)&&e.every(n=>n.size===0)&&Su(t)},Uk=(t,e,n,s,r,i,o,a,l,u,c,h,d)=>{const p=new WeakMap;return(m,v,x,f,g)=>{const{activeInputs:_,passiveInputs:C}=i(v),{outputs:w}=i(m),T=a(m),k=S=>{const E=l(v),N=l(m);if(S){const O=Q0(C,m,x,f);t(_,m,O,!1),!g&&!h(m)&&n(N,E,x,f),d(v)&&Vi(v)}else{const O=s(_,m,x,f);e(C,f,O,!1),!g&&!h(m)&&r(N,E,x,f);const A=o(v);if(A===0)c(v)&&Xf(v,_);else{const F=p.get(v);F!==void 0&&clearTimeout(F),p.set(v,setTimeout(()=>{c(v)&&Xf(v,_)},A*1e3))}}};return u(w,[v,x,f],S=>S[0]===v&&S[1]===x&&S[2]===f,!0)?(T.add(k),c(m)?t(_,m,[x,f,k],!0):e(C,f,[m,x,k],!0),!0):!1}},qk=t=>(e,n,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,n,i]])):t(a,[r,n,i],l=>l[0]===r&&l[1]===n,o)},Hk=t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)},Gk=t=>(e,n)=>{t(e).add(n)},Kk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Yk=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const u=r(a),c={...Kk,...l},h=s(u,c),d=i(u)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},rt=(t,e)=>t.context===e,Xk=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!rt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,u)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Qc=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},yn=()=>new DOMException("","IndexSizeError"),vm=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(s){throw s.code===12?yn():s}})(t.getChannelData)},Qk={numberOfChannels:1},Zk=(t,e,n,s,r,i,o,a)=>{let l=null;return class J0{constructor(c){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:p}={...Qk,...c};l===null&&(l=new r(1,1,44100));const m=s!==null&&e(i,i)?new s({length:h,numberOfChannels:d,sampleRate:p}):l.createBuffer(d,h,p);if(m.numberOfChannels===0)throw n();return typeof m.copyFromChannel!="function"?(o(m),vm(m)):e(Qc,()=>Qc(m))||a(m),t.add(m),m}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===J0.prototype||t.has(c)}}},_t=-34028234663852886e22,ot=-_t,Pn=t=>ji.has(t),Jk={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},eN=(t,e,n,s,r,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...Jk,...c},p=r(h,d),m=o(h),v=m?e():null;super(u,!1,p,v),this._audioBufferSourceNodeRenderer=v,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=n(this,m,p.playbackRate,ot,_t)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const c=typeof u=="function"?a(this,u):null;this._nativeAudioBufferSourceNode.onended=c;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===c?u:h}get playbackRate(){return this._playbackRate}start(u=0,c=0,h){if(this._nativeAudioBufferSourceNode.start(u,c,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[u,c]:[u,c,h]),this.context.state!=="closed"){Vi(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Pn(this)&&Su(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},tN=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(u,c)=>{let h=n(u);const d=rt(h,c);if(!d){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(c,p),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(c,h),d?await t(c,u.playbackRate,h.playbackRate):await s(c,u.playbackRate,h.playbackRate),await r(u,c,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):l(u,c)}}},nN=t=>"playbackRate"in t,sN=t=>"frequency"in t&&"gain"in t,rN=t=>"offset"in t,iN=t=>!("frequency"in t)&&"gain"in t,oN=t=>"detune"in t&&"frequency"in t,aN=t=>"pan"in t,at=t=>on(G0,t),Cu=t=>on(K0,t),Qf=(t,e)=>{const{activeInputs:n}=at(t);n.forEach(r=>r.forEach(([i])=>{e.includes(t)||Qf(i,[...e,t])}));const s=nN(t)?[t.playbackRate]:Z0(t)?Array.from(t.parameters.values()):sN(t)?[t.Q,t.detune,t.frequency,t.gain]:rN(t)?[t.offset]:iN(t)?[t.gain]:oN(t)?[t.detune,t.frequency]:aN(t)?[t.pan]:[];for(const r of s){const i=Cu(r);i!==void 0&&i.activeInputs.forEach(([o])=>Qf(o,e))}Pn(t)&&Su(t)},e1=t=>{Qf(t.destination,[])},lN=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),uN=(t,e,n,s,r,i,o,a,l)=>class extends t{constructor(c={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new l(c)}catch(m){throw m.code===12&&m.message==="sampleRate is not in range"?n():m}if(h===null)throw s();if(!lN(c.latencyHint))throw new TypeError(`The provided value '${c.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(c.sampleRate!==void 0&&h.sampleRate!==c.sampleRate)throw n();super(h,2);const{latencyHint:d}=c,{sampleRate:p}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/p:d==="interactive"||d===void 0?256/p:d==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(d*p/128)))*128/p,this._nativeAudioContext=h,l.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const m=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",m)};h.addEventListener("statechange",m)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),e1(this)}))}createMediaElementSource(c){return new r(this,{mediaElement:c})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(c){return new o(this,{mediaStream:c})}createMediaStreamTrackSource(c){return new a(this,{mediaStreamTrack:c})}resume(){return this._state==="suspended"?new Promise((c,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?c():this.resume().then(c,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(c=>{throw c===void 0||c.code===15?e():c})}suspend(){return this._nativeAudioContext.suspend().catch(c=>{throw c===void 0?e():c})}},cN=(t,e,n,s,r,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d=o(h),p=r(h,c,d),m=d?e(a):null;super(u,!1,p,m),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},hN=t=>{const e=new WeakMap,n=async(s,r)=>{const i=r.destination;return e.set(r,i),await t(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):n(s,r)}}},dN=(t,e,n,s,r,i,o,a)=>(l,u)=>{const c=u.listener,h=()=>{const w=new Float32Array(1),T=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),k=o(u);let S=!1,E=[0,0,-1,0,1,0],N=[0,0,0];const O=()=>{if(S)return;S=!0;const q=s(u,256,9,0);q.onaudioprocess=({inputBuffer:W})=>{const B=[i(W,w,0),i(W,w,1),i(W,w,2),i(W,w,3),i(W,w,4),i(W,w,5)];B.some((I,P)=>I!==E[P])&&(c.setOrientation(...B),E=B);const D=[i(W,w,6),i(W,w,7),i(W,w,8)];D.some((I,P)=>I!==N[P])&&(c.setPosition(...D),N=D)},T.connect(q)},A=q=>W=>{W!==E[q]&&(E[q]=W,c.setOrientation(...E))},F=q=>W=>{W!==N[q]&&(N[q]=W,c.setPosition(...N))},L=(q,W,B)=>{const D=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W});D.connect(T,0,q),D.start(),Object.defineProperty(D.offset,"defaultValue",{get(){return W}});const I=t({context:l},k,D.offset,ot,_t);return a(I,"value",P=>()=>P.call(I),P=>V=>{try{P.call(I,V)}catch(H){if(H.code!==9)throw H}O(),k&&B(V)}),I.cancelAndHoldAtTime=(P=>k?()=>{throw r()}:(...V)=>{const H=P.apply(I,V);return O(),H})(I.cancelAndHoldAtTime),I.cancelScheduledValues=(P=>k?()=>{throw r()}:(...V)=>{const H=P.apply(I,V);return O(),H})(I.cancelScheduledValues),I.exponentialRampToValueAtTime=(P=>k?()=>{throw r()}:(...V)=>{const H=P.apply(I,V);return O(),H})(I.exponentialRampToValueAtTime),I.linearRampToValueAtTime=(P=>k?()=>{throw r()}:(...V)=>{const H=P.apply(I,V);return O(),H})(I.linearRampToValueAtTime),I.setTargetAtTime=(P=>k?()=>{throw r()}:(...V)=>{const H=P.apply(I,V);return O(),H})(I.setTargetAtTime),I.setValueAtTime=(P=>k?()=>{throw r()}:(...V)=>{const H=P.apply(I,V);return O(),H})(I.setValueAtTime),I.setValueCurveAtTime=(P=>k?()=>{throw r()}:(...V)=>{const H=P.apply(I,V);return O(),H})(I.setValueCurveAtTime),I};return{forwardX:L(0,0,A(0)),forwardY:L(1,0,A(1)),forwardZ:L(2,-1,A(2)),positionX:L(6,0,F(0)),positionY:L(7,0,F(1)),positionZ:L(8,0,F(2)),upX:L(3,0,A(3)),upY:L(4,1,A(4)),upZ:L(5,0,A(5))}},{forwardX:d,forwardY:p,forwardZ:m,positionX:v,positionY:x,positionZ:f,upX:g,upY:_,upZ:C}=c.forwardX===void 0?h():c;return{get forwardX(){return d},get forwardY(){return p},get forwardZ(){return m},get positionX(){return v},get positionY(){return x},get positionZ(){return f},get upX(){return g},get upY(){return _},get upZ(){return C}}},Zc=t=>"context"in t,Tu=t=>Zc(t[0]),Br=(t,e,n,s)=>{for(const r of t)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},xv=(t,e,[n,s],r)=>{Br(t,[e,n,s],i=>i[0]===e&&i[1]===n,r)},Sv=(t,[e,n,s],r)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,s]])):Br(i,[n,s],o=>o[0]===n,r)},oo=t=>"inputs"in t,Jc=(t,e,n,s)=>{if(oo(e)){const r=e.inputs[s];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,s),[e,n,s]},t1=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},fN=(t,e,n)=>Bh(t,s=>s[0]===e&&s[1]===n),n1=(t,e)=>{if(!xu(t).delete(e))throw new Error("Missing the expected event listener.")},s1=(t,e,n)=>{const s=on(t,e),r=Bh(s,i=>i[0]===n);return s.size===0&&t.delete(e),r},eh=(t,e,n,s)=>{oo(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},ve=t=>on(mm,t),ca=t=>on(gm,t),Mr=t=>Gf.has(t),fc=t=>!ji.has(t),Cv=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const s=t.createScriptProcessor(256,1,1),r=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(t.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=l=>{const u=l.inputBuffer.getChannelData(0);Array.prototype.some.call(u,c=>c===1)?n(!0):n(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(t.destination)},a.start()}}),Pd=(t,e)=>{const n=new Map;for(const s of t)for(const r of s){const i=n.get(r);n.set(r,i===void 0?1:i+1)}n.forEach((s,r)=>e(r,s))},th=t=>"context"in t,pN=t=>{const e=new Map;t.connect=(n=>(s,r=0,i=0)=>{const o=th(s)?n(s,r,i):n(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(l=>l.input!==i||l.output!==r)&&a.push({input:i,output:r}),o})(t.connect.bind(t)),t.disconnect=(n=>(s,r,i)=>{if(n.apply(t),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const l=a.filter(u=>u.output!==s);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(l=>l.output!==r&&(l.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(l=>{th(o)?t.connect(o,l.output,l.input):t.connect(o,l.output)})})(t.disconnect)},mN=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=Cu(e),{outputs:o}=at(t),a=xu(t),l=u=>{const c=ve(t),h=ca(e);if(u){const d=s1(i,t,n);xv(r,t,d,!1),!s&&!Mr(t)&&c.connect(h,n)}else{const d=fN(r,t,n);Sv(i,d,!1),!s&&!Mr(t)&&c.disconnect(h,n)}};return Br(o,[e,n],u=>u[0]===e&&u[1]===n,!0)?(a.add(l),Pn(t)?xv(r,t,[n,l],!0):Sv(i,[t,n,l],!0),!0):!1},gN=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=at(e),o=t1(r[s],t,n);return o===null?[Q0(i,t,n,s)[2],!1]:[o[2],!0]},vN=(t,e,n)=>{const{activeInputs:s,passiveInputs:r}=Cu(e),i=t1(s,t,n);return i===null?[s1(r,t,n)[1],!1]:[i[2],!0]},_m=(t,e,n,s,r)=>{const[i,o]=gN(t,n,s,r);if(i!==null&&(n1(t,i),o&&!e&&!Mr(t)&&eh(ve(t),ve(n),s,r)),Pn(n)){const{activeInputs:a}=at(n);Xf(n,a)}},ym=(t,e,n,s)=>{const[r,i]=vN(t,n,s);r!==null&&(n1(t,r),i&&!e&&!Mr(t)&&ve(t).disconnect(ca(n),s))},_N=(t,e)=>{const n=at(t),s=[];for(const r of n.outputs)Tu(r)?_m(t,e,...r):ym(t,e,...r),s.push(r[0]);return n.outputs.clear(),s},yN=(t,e,n)=>{const s=at(t),r=[];for(const i of s.outputs)i[1]===n&&(Tu(i)?_m(t,e,...i):ym(t,e,...i),r.push(i[0]),s.outputs.delete(i));return r},wN=(t,e,n,s,r)=>{const i=at(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Tu(o)?_m(t,e,...o):ym(t,e,...o),i.outputs.delete(o),o[0]))},xN=(t,e,n,s,r,i,o,a,l,u,c,h,d,p,m,v)=>class extends u{constructor(f,g,_,C){super(_),this._context=f,this._nativeAudioNode=_;const w=c(f);h(w)&&n(Cv,()=>Cv(w,v))!==!0&&pN(_),mm.set(this,_),Y0.set(this,new Set),f.state!=="closed"&&g&&Vi(this),t(this,C,_)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(f){this._nativeAudioNode.channelCount=f}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(f){this._nativeAudioNode.channelCountMode=f}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(f){this._nativeAudioNode.channelInterpretation=f}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(f,g=0,_=0){if(g<0||g>=this._nativeAudioNode.numberOfOutputs)throw r();const C=c(this._context),w=m(C);if(d(f)||p(f))throw i();if(Zc(f)){const S=ve(f);try{const N=Jc(this._nativeAudioNode,S,g,_),O=fc(this);(w||O)&&this._nativeAudioNode.disconnect(...N),this.context.state!=="closed"&&!O&&fc(f)&&Vi(f)}catch(N){throw N.code===12?i():N}if(e(this,f,g,_,w)){const N=l([this],f);Pd(N,s(w))}return f}const T=ca(f);if(T.name==="playbackRate"&&T.maxValue===1024)throw o();try{this._nativeAudioNode.connect(T,g),(w||fc(this))&&this._nativeAudioNode.disconnect(T,g)}catch(S){throw S.code===12?i():S}if(mN(this,f,g,w)){const S=l([this],f);Pd(S,s(w))}}disconnect(f,g,_){let C;const w=c(this._context),T=m(w);if(f===void 0)C=_N(this,T);else if(typeof f=="number"){if(f<0||f>=this.numberOfOutputs)throw r();C=yN(this,T,f)}else{if(g!==void 0&&(g<0||g>=this.numberOfOutputs)||Zc(f)&&_!==void 0&&(_<0||_>=f.numberOfInputs))throw r();if(C=wN(this,T,f,g,_),C.length===0)throw i()}for(const k of C){const S=l([this],k);Pd(S,a)}}},SN=(t,e,n,s,r,i,o,a,l,u,c,h,d)=>(p,m,v,x=null,f=null)=>{const g=v.value,_=new Rk(g),C=m?s(_):null,w={get defaultValue(){return g},get maxValue(){return x===null?v.maxValue:x},get minValue(){return f===null?v.minValue:f},get value(){return v.value},set value(T){v.value=T,w.setValueAtTime(T,p.context.currentTime)},cancelAndHoldAtTime(T){if(typeof v.cancelAndHoldAtTime=="function")C===null&&_.flush(p.context.currentTime),_.add(r(T)),v.cancelAndHoldAtTime(T);else{const k=Array.from(_).pop();C===null&&_.flush(p.context.currentTime),_.add(r(T));const S=Array.from(_).pop();v.cancelScheduledValues(T),k!==S&&S!==void 0&&(S.type==="exponentialRampToValue"?v.exponentialRampToValueAtTime(S.value,S.endTime):S.type==="linearRampToValue"?v.linearRampToValueAtTime(S.value,S.endTime):S.type==="setValue"?v.setValueAtTime(S.value,S.startTime):S.type==="setValueCurve"&&v.setValueCurveAtTime(S.values,S.startTime,S.duration))}return w},cancelScheduledValues(T){return C===null&&_.flush(p.context.currentTime),_.add(i(T)),v.cancelScheduledValues(T),w},exponentialRampToValueAtTime(T,k){if(T===0)throw new RangeError;if(!Number.isFinite(k)||k<0)throw new RangeError;const S=p.context.currentTime;return C===null&&_.flush(S),Array.from(_).length===0&&(_.add(u(g,S)),v.setValueAtTime(g,S)),_.add(o(T,k)),v.exponentialRampToValueAtTime(T,k),w},linearRampToValueAtTime(T,k){const S=p.context.currentTime;return C===null&&_.flush(S),Array.from(_).length===0&&(_.add(u(g,S)),v.setValueAtTime(g,S)),_.add(a(T,k)),v.linearRampToValueAtTime(T,k),w},setTargetAtTime(T,k,S){return C===null&&_.flush(p.context.currentTime),_.add(l(T,k,S)),v.setTargetAtTime(T,k,S),w},setValueAtTime(T,k){return C===null&&_.flush(p.context.currentTime),_.add(u(T,k)),v.setValueAtTime(T,k),w},setValueCurveAtTime(T,k,S){const E=T instanceof Float32Array?T:new Float32Array(T);if(h!==null&&h.name==="webkitAudioContext"){const N=k+S,O=p.context.sampleRate,A=Math.ceil(k*O),F=Math.floor(N*O),L=F-A,q=new Float32Array(L);for(let B=0;B<L;B+=1){const D=(E.length-1)/S*((A+B)/O-k),I=Math.floor(D),P=Math.ceil(D);q[B]=I===P?E[I]:(1-(D-I))*E[I]+(1-(P-D))*E[P]}C===null&&_.flush(p.context.currentTime),_.add(c(q,k,S)),v.setValueCurveAtTime(q,k,S);const W=F/O;W<N&&d(w,q[q.length-1],W),d(w,E[E.length-1],N)}else C===null&&_.flush(p.context.currentTime),_.add(c(E,k,S)),v.setValueCurveAtTime(E,k,S);return w}};return n.set(w,v),e.set(w,p),t(w,C),w},CN=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:s,value:r}=n;e.exponentialRampToValueAtTime(r,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:r}=n;e.linearRampToValueAtTime(r,s)}else if(n.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=n;e.setTargetAtTime(r,s,i)}else if(n.type==="setValue"){const{startTime:s,value:r}=n;e.setValueAtTime(r,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=n;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class r1{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((s,r)=>e.call(n,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const TN={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},kN=(t,e,n,s,r,i,o,a,l,u,c,h,d,p)=>class extends e{constructor(v,x,f){var g;const _=a(v),C=l(_),w=c({...TN,...f});d(w);const T=Kf.get(_),k=T?.get(x),S=C||_.state!=="closed"?_:(g=o(_))!==null&&g!==void 0?g:_,E=r(S,C?null:v.baseLatency,u,x,k,w),N=C?s(x,w,k):null;super(v,!0,E,N);const O=[];E.parameters.forEach((F,L)=>{const q=n(this,C,F);O.push([L,q])}),this._nativeAudioWorkletNode=E,this._onprocessorerror=null,this._parameters=new r1(O),C&&t(_,this);const{activeInputs:A}=i(this);h(E,A)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(v){const x=typeof v=="function"?p(this,v):null;this._nativeAudioWorkletNode.onprocessorerror=x;const f=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=f!==null&&f===x?v:f}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function nh(t,e,n,s,r){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,r);else{const i=t.getChannelData(s);if(e[n].byteLength===0)e[n]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const i1=(t,e,n,s,r)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],s,r):e[n].byteLength!==0&&t.getChannelData(s).set(e[n],r)},sh=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));n.push(r)}return n},NN=(t,e)=>{const n=on(Yf,t),s=ve(e);return on(n,s)},EN=async(t,e,n,s,r,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=s.channelCount*s.numberOfInputs,u=r.reduce((x,f)=>x+f,0),c=u===0?null:n.createBuffer(u,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=at(t),d=await NN(n,t),p=sh(s.numberOfInputs,s.channelCount),m=sh(s.numberOfOutputs,r),v=Array.from(t.parameters.keys()).reduce((x,f)=>({...x,[f]:new Float32Array(128)}),{});for(let x=0;x<a;x+=128){if(s.numberOfInputs>0&&e!==null)for(let f=0;f<s.numberOfInputs;f+=1)for(let g=0;g<s.channelCount;g+=1)nh(e,p[f],g,g,x);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:f},g)=>{nh(e,v,f,l+g,x)});for(let f=0;f<s.numberOfInputs;f+=1)for(let g=0;g<r[f];g+=1)m[f][g].byteLength===0&&(m[f][g]=new Float32Array(128));try{const f=p.map((_,C)=>h.activeInputs[C].size===0?[]:_),g=o(x/n.sampleRate,n.sampleRate,()=>d.process(f,m,v));if(c!==null)for(let _=0,C=0;_<s.numberOfOutputs;_+=1){for(let w=0;w<r[_];w+=1)i1(c,m[_],w,C+w,x);C+=r[_]}if(!g)break}catch(f){t.dispatchEvent(new ErrorEvent("processorerror",{colno:f.colno,filename:f.filename,lineno:f.lineno,message:f.message}));break}}return c},AN=(t,e,n,s,r,i,o,a,l,u,c,h,d,p,m,v)=>(x,f,g)=>{const _=new WeakMap;let C=null;const w=async(T,k)=>{let S=c(T),E=null;const N=rt(S,k),O=Array.isArray(f.outputChannelCount)?f.outputChannelCount:Array.from(f.outputChannelCount);if(h===null){const A=O.reduce((W,B)=>W+B,0),F=r(k,{channelCount:Math.max(1,A),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,A)}),L=[];for(let W=0;W<T.numberOfOutputs;W+=1)L.push(s(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[W]}));const q=o(k,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1});q.connect=e.bind(null,L),q.disconnect=l.bind(null,L),E=[F,L,q]}else N||(S=new h(k,x));if(_.set(k,E===null?S:E[2]),E!==null){if(C===null){if(g===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const B=T.channelCount*T.numberOfInputs,D=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length,I=B+D;C=EN(T,I===0?null:await(async()=>{const V=new d(I,Math.ceil(T.context.length/128)*128,k.sampleRate),H=[],Ue=[];for(let se=0;se<f.numberOfInputs;se+=1)H.push(o(V,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1})),Ue.push(r(V,{channelCount:f.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:f.channelCount}));const Re=await Promise.all(Array.from(T.parameters.values()).map(async se=>{const je=i(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:se.value});return await p(V,se,je.offset),je})),X=s(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,B+D)});for(let se=0;se<f.numberOfInputs;se+=1){H[se].connect(Ue[se]);for(let je=0;je<f.channelCount;je+=1)Ue[se].connect(X,je,se*f.channelCount+je)}for(const[se,je]of Re.entries())je.connect(X,0,B+se),je.start(0);return X.connect(V.destination),await Promise.all(H.map(se=>m(T,V,se))),v(V)})(),k,f,O,g,u)}const A=await C,F=n(k,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[L,q,W]=E;A!==null&&(F.buffer=A,F.start(0)),F.connect(L);for(let B=0,D=0;B<T.numberOfOutputs;B+=1){const I=q[B];for(let P=0;P<O[B];P+=1)L.connect(I,D+P,P);D+=O[B]}return W}if(N)for(const[A,F]of T.parameters.entries())await t(k,F,S.parameters.get(A));else for(const[A,F]of T.parameters.entries())await p(k,F,S.parameters.get(A));return await m(T,k,S),S};return{render(T,k){a(k,T);const S=_.get(k);return S!==void 0?Promise.resolve(S):w(T,k)}}},ON=(t,e,n,s,r,i,o,a,l,u,c,h,d,p,m,v,x,f,g,_)=>class extends m{constructor(w,T){super(w,T),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(k,S)=>t(this,k,S)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(w,T,k){return new n({length:T,numberOfChannels:w,sampleRate:k})}createBufferSource(){return new s(this)}createChannelMerger(w=6){return new i(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new o(this,{numberOfOutputs:w})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(w=1){return new c(this,{maxDelayTime:w})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(w,T){return new p(this,{feedback:T,feedforward:w})}createOscillator(){return new v(this)}createPanner(){return new x(this)}createPeriodicWave(w,T,k={disableNormalization:!1}){return new f(this,{...k,imag:T,real:w})}createStereoPanner(){return new g(this)}createWaveShaper(){return new _(this)}decodeAudioData(w,T,k){return u(this._nativeContext,w).then(S=>(typeof T=="function"&&T(S),S),S=>{throw typeof k=="function"&&k(S),S})}},DN={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},MN=(t,e,n,s,r,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...DN,...c},p=r(h,d),m=o(h),v=m?n():null;super(u,!1,p,v),this._Q=e(this,m,p.Q,ot,_t),this._detune=e(this,m,p.detune,1200*Math.log2(ot),-1200*Math.log2(ot)),this._frequency=e(this,m,p.frequency,u.sampleRate/2,0),this._gain=e(this,m,p.gain,40*Math.log10(ot),_t),this._nativeBiquadFilterNode=p,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,c,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,c,h)}catch(d){throw d.code===11?s():d}if(u.length!==c.length||c.length!==h.length)throw s()}},RN=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=rt(u,l);if(!c){const h={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(l,h)}return i.set(l,u),c?(await t(l,a.Q,u.Q),await t(l,a.detune,u.detune),await t(l,a.frequency,u.frequency),await t(l,a.gain,u.gain)):(await s(l,a.Q,u.Q),await s(l,a.detune,u.detune),await s(l,a.frequency,u.frequency),await s(l,a.gain,u.gain)),await r(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},IN=(t,e)=>(n,s)=>{const r=e.get(n);if(r!==void 0)return r;const i=t.get(n);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},PN={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},bN=(t,e,n,s,r)=>class extends t{constructor(o,a){const l=s(o),u={...PN,...a},c=n(l,u),h=r(l)?e():null;super(o,!1,c,h)}},FN=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!rt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,u)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},LN={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},jN=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const u=s(a),c=i({...LN,...l}),h=n(u,c),d=r(u)?e():null;super(a,!1,h,d)}},VN=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!rt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,u)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},zN=t=>(e,n,s)=>t(n,e,s),WN=t=>(e,n,s=0,r=0)=>{const i=e[s];if(i===void 0)throw t();return th(n)?i.connect(n,0,r):i.connect(n,0)},BN=t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},$N={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},UN=(t,e,n,s,r,i,o)=>class extends t{constructor(l,u){const c=r(l),h={...$N,...u},d=s(c,h),p=i(c),m=p?n():null;super(l,!1,d,m),this._constantSourceNodeRenderer=m,this._nativeConstantSourceNode=d,this._offset=e(this,p,d.offset,ot,_t),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=u;const c=this._nativeConstantSourceNode.onended;this._onended=c!==null&&c===u?l:c}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Vi(this);const u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),Pn(this)&&Su(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},qN=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(u,c)=>{let h=n(u);const d=rt(h,c);if(!d){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(c,p),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(c,h),d?await t(c,u.offset,h.offset):await s(c,u.offset,h.offset),await r(u,c,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,c){const h=i.get(c);return h!==void 0?Promise.resolve(h):l(u,c)}}},HN=t=>e=>(t[0]=e,t[0]),GN={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},KN=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const u=s(a),c={...GN,...l},h=n(u,c),p=r(u)?e():null;super(a,!1,h,p),this._isBufferNullified=!1,this._nativeConvolverNode=h,c.buffer!==null&&i(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},YN=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!rt(a,o)){const u={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,u)}return s.set(o,a),oo(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},XN=(t,e)=>(n,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,r)}catch(i){throw i.name==="SyntaxError"?t():i}},QN=()=>new DOMException("","DataCloneError"),Tv=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>r();try{e.postMessage(t,[t])}catch{}finally{r()}})},ZN=(t,e,n,s,r,i,o,a,l,u,c)=>(h,d)=>{const p=o(h)?h:i(h);if(r.has(d)){const m=n();return Promise.reject(m)}try{r.add(d)}catch{}return e(l,()=>l(p))?p.decodeAudioData(d).then(m=>(Tv(d).catch(()=>{}),e(a,()=>a(m))||c(m),t.add(m),m)):new Promise((m,v)=>{const x=async()=>{try{await Tv(d)}catch{}},f=g=>{v(g),x()};try{p.decodeAudioData(d,g=>{typeof g.copyFromChannel!="function"&&(u(g),vm(g)),t.add(g),x().then(()=>m(g))},g=>{f(g===null?s():g)})}catch(g){f(g)}})},JN=(t,e,n,s,r,i,o,a)=>(l,u)=>{const c=e.get(l);if(c===void 0)throw new Error("Missing the expected cycle count.");const h=i(l.context),d=a(h);if(c===u){if(e.delete(l),!d&&o(l)){const p=s(l),{outputs:m}=n(l);for(const v of m)if(Tu(v)){const x=s(v[0]);t(p,x,v[1],v[2])}else{const x=r(v[0]);p.connect(x,v[1])}}}else e.set(l,c-u)},eE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},tE=(t,e,n,s,r,i,o)=>class extends t{constructor(l,u){const c=r(l),h={...eE,...u},d=s(c,h),p=i(c),m=p?n(h.maxDelayTime):null;super(l,!1,d,m),this._delayTime=e(this,p,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},nE=(t,e,n,s,r)=>i=>{const o=new WeakMap,a=async(l,u)=>{let c=n(l);const h=rt(c,u);if(!h){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:i};c=e(u,d)}return o.set(u,c),h?await t(u,l.delayTime,c.delayTime):await s(u,l.delayTime,c.delayTime),await r(l,u,c),c};return{render(l,u){const c=o.get(u);return c!==void 0?Promise.resolve(c):a(l,u)}}},sE=t=>(e,n,s,r)=>t(e[r],i=>i[0]===n&&i[1]===s),rE=t=>(e,n)=>{t(e).delete(n)},iE=t=>"delayTime"in t,oE=(t,e,n)=>function s(r,i){const o=Zc(i)?i:n(t,i);if(iE(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>s([...r,o],l[0])).reduce((l,u)=>l.concat(u),[])},Xu=(t,e,n)=>{const s=e[n];if(s===void 0)throw t();return s},aE=t=>(e,n=void 0,s=void 0,r=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Xu(t,e,n).disconnect():th(n)?s===void 0?e.forEach(i=>i.disconnect(n)):r===void 0?Xu(t,e,s).disconnect(n,0):Xu(t,e,s).disconnect(n,0,r):s===void 0?e.forEach(i=>i.disconnect(n)):Xu(t,e,s).disconnect(n,0),lE={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},uE=(t,e,n,s,r,i,o,a)=>class extends t{constructor(u,c){const h=i(u),d={...lE,...c},p=s(h,d),m=o(h),v=m?n():null;super(u,!1,p,v),this._attack=e(this,m,p.attack),this._knee=e(this,m,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,m,p.ratio),this._release=e(this,m,p.release),this._threshold=e(this,m,p.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){const c=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=c,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){const c=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=c,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},cE=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=rt(u,l);if(!c){const h={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(l,h)}return i.set(l,u),c?(await t(l,a.attack,u.attack),await t(l,a.knee,u.knee),await t(l,a.ratio,u.ratio),await t(l,a.release,u.release),await t(l,a.threshold,u.threshold)):(await s(l,a.attack,u.attack),await s(l,a.knee,u.knee),await s(l,a.ratio,u.ratio),await s(l,a.release,u.release),await s(l,a.threshold,u.threshold)),await r(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},hE=()=>new DOMException("","EncodingError"),dE=t=>e=>new Promise((n,s)=>{if(t===null){s(new SyntaxError);return}const r=t.document.head;if(r===null)s(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(c,h,d,p,m)=>{if(h===a||h===t.location.href&&d===1&&p===1)return u(),s(m),!1;if(l!==null)return l(c,h,d,p,m)},i.onerror=()=>{u(),s(new SyntaxError)},i.onload=()=>{u(),n()},i.src=a,i.type="module",r.appendChild(i)}}),fE=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=t(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(n,i,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,r)}},pE=t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},mE=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},gE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},vE=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const u=r(a),c={...gE,...l},h=s(u,c),d=i(u),p=d?n():null;super(a,!1,h,p),this._gain=e(this,d,h.gain,ot,_t)}get gain(){return this._gain}},_E=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=rt(u,l);if(!c){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(l,h)}return i.set(l,u),c?await t(l,a.gain,u.gain):await s(l,a.gain,u.gain),await r(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},yE=(t,e)=>n=>e(t,n),wE=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},xE=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},SE=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},CE=t=>e=>t.get(e),Ge=()=>new DOMException("","InvalidStateError"),TE=t=>e=>{const n=t.get(e);if(n===void 0)throw Ge();return n},kE=(t,e)=>n=>{let s=t.get(n);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s},NE=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},$h=()=>new DOMException("","InvalidAccessError"),EE=t=>{t.getFrequencyResponse=(e=>(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw $h();return e.call(t,n,s,r)})(t.getFrequencyResponse)},AE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},OE=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const u=s(a),c=r(u),h={...AE,...l},d=e(u,c?null:a.baseLatency,h),p=c?n(h.feedback,h.feedforward):null;super(a,!1,d,p),EE(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,l,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,u)}},o1=(t,e,n,s,r,i,o,a,l,u,c)=>{const h=u.length;let d=a;for(let p=0;p<h;p+=1){let m=n[0]*u[p];for(let v=1;v<r;v+=1){const x=d-v&l-1;m+=n[v]*i[x],m-=t[v]*o[x]}for(let v=r;v<s;v+=1)m+=n[v]*i[d-v&l-1];for(let v=r;v<e;v+=1)m-=t[v]*o[d-v&l-1];i[d]=u[p],o[d]=m,d=d+1&l-1,c[p]=m}return d},DE=(t,e,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,l=Math.min(o,a);if(r[0]!==1){for(let m=0;m<o;m+=1)i[m]/=r[0];for(let m=1;m<a;m+=1)r[m]/=r[0]}const u=32,c=new Float32Array(u),h=new Float32Array(u),d=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let m=0;m<p;m+=1){const v=t.getChannelData(m),x=d.getChannelData(m);c.fill(0),h.fill(0),o1(r,o,i,a,l,c,h,0,u,v,x)}return d},ME=(t,e,n,s,r)=>(i,o)=>{const a=new WeakMap;let l=null;const u=async(c,h)=>{let d=null,p=e(c);const m=rt(p,h);if(h.createIIRFilter===void 0?d=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(p=h.createIIRFilter(o,i)),a.set(h,d===null?p:d),d!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new n(c.context.destination.channelCount,c.context.length,h.sampleRate);l=(async()=>{await s(c,x,x.destination);const f=await r(x);return DE(f,h,i,o)})()}const v=await l;return d.buffer=v,d.start(0),d}return await s(c,h,p),p};return{render(c,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):u(c,h)}}},RE=(t,e,n,s,r,i)=>o=>(a,l)=>{const u=t.get(a);if(u===void 0){if(!o&&i(a)){const c=s(a),{outputs:h}=n(a);for(const d of h)if(Tu(d)){const p=s(d[0]);e(c,p,d[1],d[2])}else{const p=r(d[0]);c.disconnect(p,d[1])}}t.set(a,l)}else t.set(a,u+l)},IE=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},PE=(t,e)=>n=>t.has(n)||e(n),bE=(t,e)=>n=>t.has(n)||e(n),FE=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},LE=t=>e=>t!==null&&e instanceof t,jE=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,VE=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,zE=(t,e)=>n=>t(n)||e(n),WE=t=>e=>t!==null&&e instanceof t,BE=t=>t!==null&&t.isSecureContext,$E=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(s(a))throw TypeError();super(i,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},UE={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},qE=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i);if(s(a))throw new TypeError;const l={...UE,...o},u=e(a,l);super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},HE=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(s(a))throw new TypeError;super(i,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},GE=(t,e,n)=>class extends t{constructor(r,i){const o=n(r),a=e(o,i);super(r,!0,a,null)}},KE=(t,e,n,s,r,i)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,Wh.set(this,a),s(a)&&r.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=l;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===l?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ha=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},YE=(t,e)=>(n,s,r)=>{const i=new Set;return n.connect=(o=>(a,l=0,u=0)=>{const c=i.size===0;if(e(a))return o.call(n,a,l,u),t(i,[a,l,u],h=>h[0]===a&&h[1]===l&&h[2]===u,!0),c&&s(),a;o.call(n,a,l),t(i,[a,l],h=>h[0]===a&&h[1]===l,!0),c&&s()})(n.connect),n.disconnect=(o=>(a,l,u)=>{const c=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(n,a,l,u):o.call(n,a,l);for(const d of i)d[0]===a&&(l===void 0||d[1]===l)&&(u===void 0||d[2]===u)&&i.delete(d)}const h=i.size===0;c&&h&&r()})(n.disconnect),n},ye=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n]&&(t[n]=s)},$e=(t,e)=>{ye(t,e,"channelCount"),ye(t,e,"channelCountMode"),ye(t,e,"channelInterpretation")},kv=t=>typeof t.getFloatTimeDomainData=="function",XE=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let r=0;r<s;r+=1)e[r]=(n[r]-128)*.0078125;return e}},QE=(t,e)=>(n,s)=>{const r=n.createAnalyser();if($e(r,s),!(s.maxDecibels>s.minDecibels))throw e();return ye(r,s,"fftSize"),ye(r,s,"maxDecibels"),ye(r,s,"minDecibels"),ye(r,s,"smoothingTimeConstant"),t(kv,()=>kv(r))||XE(r),r},ZE=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,De=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n].value&&(t[n].value=s)},JE=t=>{t.start=(e=>{let n=!1;return(s=0,r=0,i)=>{if(n)throw Ge();e.call(t,s,r,i),n=!0}})(t.start)},wm=t=>{t.start=(e=>(n=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,r)})(t.start)},xm=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},e2=(t,e,n,s,r,i,o,a,l,u,c)=>(h,d)=>{const p=h.createBufferSource();return $e(p,d),De(p,d,"playbackRate"),ye(p,d,"buffer"),ye(p,d,"loop"),ye(p,d,"loopEnd"),ye(p,d,"loopStart"),e(n,()=>n(h))||JE(p),e(s,()=>s(h))||l(p),e(r,()=>r(h))||u(p,h),e(i,()=>i(h))||wm(p),e(o,()=>o(h))||c(p,h),e(a,()=>a(h))||xm(p),t(h,p),p},t2=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,n2=(t,e)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{i.channelCount=l}catch(u){if(l>i.maxChannelCount)throw u}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},s2=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,r2=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},i2=(t,e,n,s,r)=>(i,o,a,l,u,c)=>{if(a!==null)try{const h=new a(i,l,c),d=new Map;let p=null;if(Object.defineProperties(h,{channelCount:{get:()=>c.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>p,set:m=>{typeof p=="function"&&h.removeEventListener("processorerror",p),p=typeof m=="function"?m:null,typeof p=="function"&&h.addEventListener("processorerror",p)}}}),h.addEventListener=(m=>(...v)=>{if(v[0]==="processorerror"){const x=typeof v[1]=="function"?v[1]:typeof v[1]=="object"&&v[1]!==null&&typeof v[1].handleEvent=="function"?v[1].handleEvent:null;if(x!==null){const f=d.get(v[1]);f!==void 0?v[1]=f:(v[1]=g=>{g.type==="error"?(Object.defineProperties(g,{type:{value:"processorerror"}}),x(g)):x(new ErrorEvent(v[0],{...g}))},d.set(x,v[1]))}}return m.call(h,"error",v[1],v[2]),m.call(h,...v)})(h.addEventListener),h.removeEventListener=(m=>(...v)=>{if(v[0]==="processorerror"){const x=d.get(v[1]);x!==void 0&&(d.delete(v[1]),v[1]=x)}return m.call(h,"error",v[1],v[2]),m.call(h,v[0],v[1],v[2])})(h.removeEventListener),c.numberOfOutputs!==0){const m=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(m).connect(i.destination),r(h,()=>m.disconnect(),()=>m.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(u===void 0)throw s();return r2(c),e(i,o,u,c)},a1=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),o2=t=>new Promise((e,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),n(i)},r.postMessage(t)}),a2=async(t,e)=>{const n=await o2(e);return new t(n)},l2=(t,e,n,s)=>{let r=Yf.get(t);r===void 0&&(r=new WeakMap,Yf.set(t,r));const i=a2(n,s);return r.set(e,i),i},u2=(t,e,n,s,r,i,o,a,l,u,c,h,d)=>(p,m,v,x)=>{if(x.numberOfInputs===0&&x.numberOfOutputs===0)throw l();const f=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(f.some(j=>j<1))throw l();if(f.length!==x.numberOfOutputs)throw e();if(x.channelCountMode!=="explicit")throw l();const g=x.channelCount*x.numberOfInputs,_=f.reduce((j,G)=>j+G,0),C=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length;if(g+C>6||_>6)throw l();const w=new MessageChannel,T=[],k=[];for(let j=0;j<x.numberOfInputs;j+=1)T.push(o(p,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),k.push(r(p,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const S=[];if(v.parameterDescriptors!==void 0)for(const{defaultValue:j,maxValue:G,minValue:ze,name:Se}of v.parameterDescriptors){const re=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:x.parameterData[Se]!==void 0?x.parameterData[Se]:j===void 0?0:j});Object.defineProperties(re.offset,{defaultValue:{get:()=>j===void 0?0:j},maxValue:{get:()=>G===void 0?ot:G},minValue:{get:()=>ze===void 0?_t:ze}}),S.push(re)}const E=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,g+C)}),N=a1(m,p.sampleRate),O=a(p,N,g+C,Math.max(1,_)),A=r(p,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),F=[];for(let j=0;j<x.numberOfOutputs;j+=1)F.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:f[j]}));for(let j=0;j<x.numberOfInputs;j+=1){T[j].connect(k[j]);for(let G=0;G<x.channelCount;G+=1)k[j].connect(E,G,j*x.channelCount+G)}const L=new r1(v.parameterDescriptors===void 0?[]:v.parameterDescriptors.map(({name:j},G)=>{const ze=S[G];return ze.connect(E,0,g+G),ze.start(0),[j,ze.offset]}));E.connect(O);let q=x.channelInterpretation,W=null;const B=x.numberOfOutputs===0?[O]:F,D={get bufferSize(){return N},get channelCount(){return x.channelCount},set channelCount(j){throw n()},get channelCountMode(){return x.channelCountMode},set channelCountMode(j){throw n()},get channelInterpretation(){return q},set channelInterpretation(j){for(const G of T)G.channelInterpretation=j;q=j},get context(){return O.context},get inputs(){return T},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get onprocessorerror(){return W},set onprocessorerror(j){typeof W=="function"&&D.removeEventListener("processorerror",W),W=typeof j=="function"?j:null,typeof W=="function"&&D.addEventListener("processorerror",W)},get parameters(){return L},get port(){return w.port2},addEventListener(...j){return O.addEventListener(j[0],j[1],j[2])},connect:t.bind(null,B),disconnect:u.bind(null,B),dispatchEvent(...j){return O.dispatchEvent(j[0])},removeEventListener(...j){return O.removeEventListener(j[0],j[1],j[2])}},I=new Map;w.port1.addEventListener=(j=>(...G)=>{if(G[0]==="message"){const ze=typeof G[1]=="function"?G[1]:typeof G[1]=="object"&&G[1]!==null&&typeof G[1].handleEvent=="function"?G[1].handleEvent:null;if(ze!==null){const Se=I.get(G[1]);Se!==void 0?G[1]=Se:(G[1]=re=>{c(p.currentTime,p.sampleRate,()=>ze(re))},I.set(ze,G[1]))}}return j.call(w.port1,G[0],G[1],G[2])})(w.port1.addEventListener),w.port1.removeEventListener=(j=>(...G)=>{if(G[0]==="message"){const ze=I.get(G[1]);ze!==void 0&&(I.delete(G[1]),G[1]=ze)}return j.call(w.port1,G[0],G[1],G[2])})(w.port1.removeEventListener);let P=null;Object.defineProperty(w.port1,"onmessage",{get:()=>P,set:j=>{typeof P=="function"&&w.port1.removeEventListener("message",P),P=typeof j=="function"?j:null,typeof P=="function"&&(w.port1.addEventListener("message",P),w.port1.start())}}),v.prototype.port=w.port1;let V=null;l2(p,D,v,x).then(j=>V=j);const Ue=sh(x.numberOfInputs,x.channelCount),Re=sh(x.numberOfOutputs,f),X=v.parameterDescriptors===void 0?[]:v.parameterDescriptors.reduce((j,{name:G})=>({...j,[G]:new Float32Array(128)}),{});let se=!0;const je=()=>{x.numberOfOutputs>0&&O.disconnect(A);for(let j=0,G=0;j<x.numberOfOutputs;j+=1){const ze=F[j];for(let Se=0;Se<f[j];Se+=1)A.disconnect(ze,G+Se,Se);G+=f[j]}},U=new Map;O.onaudioprocess=({inputBuffer:j,outputBuffer:G})=>{if(V!==null){const ze=h(D);for(let Se=0;Se<N;Se+=128){for(let re=0;re<x.numberOfInputs;re+=1)for(let Ae=0;Ae<x.channelCount;Ae+=1)nh(j,Ue[re],Ae,Ae,Se);v.parameterDescriptors!==void 0&&v.parameterDescriptors.forEach(({name:re},Ae)=>{nh(j,X,re,g+Ae,Se)});for(let re=0;re<x.numberOfInputs;re+=1)for(let Ae=0;Ae<f[re];Ae+=1)Re[re][Ae].byteLength===0&&(Re[re][Ae]=new Float32Array(128));try{const re=Ue.map((It,qn)=>{if(ze[qn].size>0)return U.set(qn,N/128),It;const Jh=U.get(qn);return Jh===void 0?[]:(It.every(lw=>lw.every(uw=>uw===0))&&(Jh===1?U.delete(qn):U.set(qn,Jh-1)),It)});se=c(p.currentTime+Se/p.sampleRate,p.sampleRate,()=>V.process(re,Re,X));for(let It=0,qn=0;It<x.numberOfOutputs;It+=1){for(let ho=0;ho<f[It];ho+=1)i1(G,Re[It],ho,qn+ho,Se);qn+=f[It]}}catch(re){se=!1,D.dispatchEvent(new ErrorEvent("processorerror",{colno:re.colno,filename:re.filename,lineno:re.lineno,message:re.message}))}if(!se){for(let re=0;re<x.numberOfInputs;re+=1){T[re].disconnect(k[re]);for(let Ae=0;Ae<x.channelCount;Ae+=1)k[Se].disconnect(E,Ae,re*x.channelCount+Ae)}if(v.parameterDescriptors!==void 0){const re=v.parameterDescriptors.length;for(let Ae=0;Ae<re;Ae+=1){const It=S[Ae];It.disconnect(E,0,g+Ae),It.stop()}}E.disconnect(O),O.onaudioprocess=null,Ps?je():Hr();break}}}};let Ps=!1;const bs=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),qr=()=>O.connect(bs).connect(p.destination),Hr=()=>{O.disconnect(bs),bs.disconnect()},ow=()=>{if(se){Hr(),x.numberOfOutputs>0&&O.connect(A);for(let j=0,G=0;j<x.numberOfOutputs;j+=1){const ze=F[j];for(let Se=0;Se<f[j];Se+=1)A.connect(ze,G+Se,Se);G+=f[j]}}Ps=!0},aw=()=>{se&&(qr(),je()),Ps=!1};return qr(),d(D,ow,aw)},l1=(t,e)=>{const n=t.createBiquadFilter();return $e(n,e),De(n,e,"Q"),De(n,e,"detune"),De(n,e,"frequency"),De(n,e,"gain"),ye(n,e,"type"),n},c2=(t,e)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,r),$e(r,s),r},h2=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Ge()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Ge()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Ge()}})},ku=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return $e(n,e),h2(n),n},d2=(t,e,n,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return $e(a,o),De(a,o,"offset"),e(s,()=>s(i))||wm(a),e(r,()=>r(i))||xm(a),t(i,a),a},ao=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),f2=(t,e,n,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),l=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(r,{...o,gain:i}),c=a.getChannelData(0);c[0]=1,c[1]=1,l.buffer=a,l.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(m){u.channelCount=m},get channelCountMode(){return u.channelCountMode},set channelCountMode(m){u.channelCountMode=m},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(m){u.channelInterpretation=m},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return l.onended},set onended(m){l.onended=m},addEventListener(...m){return l.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return l.dispatchEvent(m[0])},removeEventListener(...m){return l.removeEventListener(m[0],m[1],m[2])},start(m=0){l.start.call(l,m)},stop(m=0){l.stop.call(l,m)}},d=()=>l.connect(u),p=()=>l.disconnect(u);return t(r,l),s(ao(h,u),d,p)},p2=(t,e)=>(n,s)=>{const r=n.createConvolver();if($e(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),ye(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw t();return i.call(r,o)}),s.channelCountMode==="max"))throw t();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw t();return i.call(r,o)}),r},u1=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return $e(n,e),De(n,e,"delayTime"),n},m2=t=>(e,n)=>{const s=e.createDynamicsCompressor();if($e(s,n),n.channelCount>2||n.channelCountMode==="max")throw t();return De(s,n,"attack"),De(s,n,"knee"),De(s,n,"ratio"),De(s,n,"release"),De(s,n,"threshold"),s},Tt=(t,e)=>{const n=t.createGain();return $e(n,e),De(n,e,"gain"),n},g2=t=>(e,n,s)=>{if(e.createIIRFilter===void 0)return t(e,n,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return $e(r,s),r};function v2(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function _2(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Nv(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=_2(n,e),n[0]+=t[s];return n}const y2=(t,e,n,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:u,feedforward:c})=>{const h=a1(i,r.sampleRate),d=u instanceof Float64Array?u:new Float64Array(u),p=c instanceof Float64Array?c:new Float64Array(c),m=d.length,v=p.length,x=Math.min(m,v);if(m===0||m>20)throw s();if(d[0]===0)throw e();if(v===0||v>20)throw s();if(p[0]===0)throw e();if(d[0]!==1){for(let S=0;S<v;S+=1)p[S]/=d[0];for(let S=1;S<m;S+=1)d[S]/=d[0]}const f=n(r,h,o,o);f.channelCount=o,f.channelCountMode=a,f.channelInterpretation=l;const g=32,_=[],C=[],w=[];for(let S=0;S<o;S+=1){_.push(0);const E=new Float32Array(g),N=new Float32Array(g);E.fill(0),N.fill(0),C.push(E),w.push(N)}f.onaudioprocess=S=>{const E=S.inputBuffer,N=S.outputBuffer,O=E.numberOfChannels;for(let A=0;A<O;A+=1){const F=E.getChannelData(A),L=N.getChannelData(A);_[A]=o1(d,m,p,v,x,C[A],w[A],_[A],g,F,L)}};const T=r.sampleRate/2;return ao({get bufferSize(){return h},get channelCount(){return f.channelCount},set channelCount(S){f.channelCount=S},get channelCountMode(){return f.channelCountMode},set channelCountMode(S){f.channelCountMode=S},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(S){f.channelInterpretation=S},get context(){return f.context},get inputs(){return[f]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},addEventListener(...S){return f.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return f.dispatchEvent(S[0])},getFrequencyResponse(S,E,N){if(S.length!==E.length||E.length!==N.length)throw t();const O=S.length;for(let A=0;A<O;A+=1){const F=-Math.PI*(S[A]/T),L=[Math.cos(F),Math.sin(F)],q=Nv(p,L),W=Nv(d,L),B=v2(q,W);E[A]=Math.sqrt(B[0]*B[0]+B[1]*B[1]),N[A]=Math.atan2(B[1],B[0])}},removeEventListener(...S){return f.removeEventListener(S[0],S[1],S[2])}},f)},w2=(t,e)=>t.createMediaElementSource(e.mediaElement),x2=(t,e)=>{const n=t.createMediaStreamDestination();return $e(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},S2=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},C2=(t,e)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=n.createMediaStreamSource(r);if(s.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},T2=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,k2=(t,e,n,s,r,i)=>(o,a)=>{const l=o.createOscillator();return $e(l,a),De(l,a,"detune"),De(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):ye(l,a,"type"),e(n,()=>n(o))||wm(l),e(s,()=>s(o))||i(l,o),e(r,()=>r(o))||xm(l),t(o,l),l},N2=t=>(e,n)=>{const s=e.createPanner();return s.orientationX===void 0?t(e,n):($e(s,n),De(s,n,"orientationX"),De(s,n,"orientationY"),De(s,n,"orientationZ"),De(s,n,"positionX"),De(s,n,"positionY"),De(s,n,"positionZ"),ye(s,n,"coneInnerAngle"),ye(s,n,"coneOuterAngle"),ye(s,n,"coneOuterGain"),ye(s,n,"distanceModel"),ye(s,n,"maxDistance"),ye(s,n,"panningModel"),ye(s,n,"refDistance"),ye(s,n,"rolloffFactor"),s)},E2=(t,e,n,s,r,i,o,a,l,u)=>(c,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:p,distanceModel:m,maxDistance:v,orientationX:x,orientationY:f,orientationZ:g,panningModel:_,positionX:C,positionY:w,positionZ:T,refDistance:k,rolloffFactor:S,...E})=>{const N=c.createPanner();if(E.channelCount>2||E.channelCountMode==="max")throw o();$e(N,E);const O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},A=n(c,{...O,channelInterpretation:"speakers",numberOfInputs:6}),F=s(c,{...E,gain:1}),L=s(c,{...O,gain:1}),q=s(c,{...O,gain:0}),W=s(c,{...O,gain:0}),B=s(c,{...O,gain:0}),D=s(c,{...O,gain:0}),I=s(c,{...O,gain:0}),P=r(c,256,6,1),V=i(c,{...O,curve:new Float32Array([1,1]),oversample:"none"});let H=[x,f,g],Ue=[C,w,T];const Re=new Float32Array(1);P.onaudioprocess=({inputBuffer:U})=>{const Ps=[l(U,Re,0),l(U,Re,1),l(U,Re,2)];Ps.some((qr,Hr)=>qr!==H[Hr])&&(N.setOrientation(...Ps),H=Ps);const bs=[l(U,Re,3),l(U,Re,4),l(U,Re,5)];bs.some((qr,Hr)=>qr!==Ue[Hr])&&(N.setPosition(...bs),Ue=bs)},Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0});const X={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(U){if(U>2)throw o();F.channelCount=U,N.channelCount=U},get channelCountMode(){return N.channelCountMode},set channelCountMode(U){if(U==="max")throw o();F.channelCountMode=U,N.channelCountMode=U},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(U){F.channelInterpretation=U,N.channelInterpretation=U},get coneInnerAngle(){return N.coneInnerAngle},set coneInnerAngle(U){N.coneInnerAngle=U},get coneOuterAngle(){return N.coneOuterAngle},set coneOuterAngle(U){N.coneOuterAngle=U},get coneOuterGain(){return N.coneOuterGain},set coneOuterGain(U){if(U<0||U>1)throw e();N.coneOuterGain=U},get context(){return N.context},get distanceModel(){return N.distanceModel},set distanceModel(U){N.distanceModel=U},get inputs(){return[F]},get maxDistance(){return N.maxDistance},set maxDistance(U){if(U<0)throw new RangeError;N.maxDistance=U},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get orientationX(){return L.gain},get orientationY(){return q.gain},get orientationZ(){return W.gain},get panningModel(){return N.panningModel},set panningModel(U){N.panningModel=U},get positionX(){return B.gain},get positionY(){return D.gain},get positionZ(){return I.gain},get refDistance(){return N.refDistance},set refDistance(U){if(U<0)throw new RangeError;N.refDistance=U},get rolloffFactor(){return N.rolloffFactor},set rolloffFactor(U){if(U<0)throw new RangeError;N.rolloffFactor=U},addEventListener(...U){return F.addEventListener(U[0],U[1],U[2])},dispatchEvent(...U){return F.dispatchEvent(U[0])},removeEventListener(...U){return F.removeEventListener(U[0],U[1],U[2])}};h!==X.coneInnerAngle&&(X.coneInnerAngle=h),d!==X.coneOuterAngle&&(X.coneOuterAngle=d),p!==X.coneOuterGain&&(X.coneOuterGain=p),m!==X.distanceModel&&(X.distanceModel=m),v!==X.maxDistance&&(X.maxDistance=v),x!==X.orientationX.value&&(X.orientationX.value=x),f!==X.orientationY.value&&(X.orientationY.value=f),g!==X.orientationZ.value&&(X.orientationZ.value=g),_!==X.panningModel&&(X.panningModel=_),C!==X.positionX.value&&(X.positionX.value=C),w!==X.positionY.value&&(X.positionY.value=w),T!==X.positionZ.value&&(X.positionZ.value=T),k!==X.refDistance&&(X.refDistance=k),S!==X.rolloffFactor&&(X.rolloffFactor=S),(H[0]!==1||H[1]!==0||H[2]!==0)&&N.setOrientation(...H),(Ue[0]!==0||Ue[1]!==0||Ue[2]!==0)&&N.setPosition(...Ue);const se=()=>{F.connect(N),t(F,V,0,0),V.connect(L).connect(A,0,0),V.connect(q).connect(A,0,1),V.connect(W).connect(A,0,2),V.connect(B).connect(A,0,3),V.connect(D).connect(A,0,4),V.connect(I).connect(A,0,5),A.connect(P).connect(c.destination)},je=()=>{F.disconnect(N),a(F,V,0,0),V.disconnect(L),L.disconnect(A),V.disconnect(q),q.disconnect(A),V.disconnect(W),W.disconnect(A),V.disconnect(B),B.disconnect(A),V.disconnect(D),D.disconnect(A),V.disconnect(I),I.disconnect(A),A.disconnect(P),P.disconnect(c.destination)};return u(ao(X,N),se,je)},A2=t=>(e,{disableNormalization:n,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a},Nu=(t,e,n,s)=>t.createScriptProcessor(e,n,s),O2=(t,e)=>(n,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,s);const i=n.createStereoPanner();return $e(i,s),De(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},D2=(t,e,n,s,r,i)=>{const a=new Float32Array([1,1]),l=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c={...u,oversample:"none"},h=(m,v,x,f)=>{const g=new Float32Array(16385),_=new Float32Array(16385);for(let E=0;E<16385;E+=1){const N=E/16384*l;g[E]=Math.cos(N),_[E]=Math.sin(N)}const C=n(m,{...u,gain:0}),w=s(m,{...c,curve:g}),T=s(m,{...c,curve:a}),k=n(m,{...u,gain:0}),S=s(m,{...c,curve:_});return{connectGraph(){v.connect(C),v.connect(T.inputs===void 0?T:T.inputs[0]),v.connect(k),T.connect(x),x.connect(w.inputs===void 0?w:w.inputs[0]),x.connect(S.inputs===void 0?S:S.inputs[0]),w.connect(C.gain),S.connect(k.gain),C.connect(f,0,0),k.connect(f,0,1)},disconnectGraph(){v.disconnect(C),v.disconnect(T.inputs===void 0?T:T.inputs[0]),v.disconnect(k),T.disconnect(x),x.disconnect(w.inputs===void 0?w:w.inputs[0]),x.disconnect(S.inputs===void 0?S:S.inputs[0]),w.disconnect(C.gain),S.disconnect(k.gain),C.disconnect(f,0,0),k.disconnect(f,0,1)}}},d=(m,v,x,f)=>{const g=new Float32Array(16385),_=new Float32Array(16385),C=new Float32Array(16385),w=new Float32Array(16385),T=Math.floor(16385/2);for(let B=0;B<16385;B+=1)if(B>T){const D=(B-T)/(16384-T)*l;g[B]=Math.cos(D),_[B]=Math.sin(D),C[B]=0,w[B]=1}else{const D=B/(16384-T)*l;g[B]=1,_[B]=0,C[B]=Math.cos(D),w[B]=Math.sin(D)}const k=e(m,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),S=n(m,{...u,gain:0}),E=s(m,{...c,curve:g}),N=n(m,{...u,gain:0}),O=s(m,{...c,curve:_}),A=s(m,{...c,curve:a}),F=n(m,{...u,gain:0}),L=s(m,{...c,curve:C}),q=n(m,{...u,gain:0}),W=s(m,{...c,curve:w});return{connectGraph(){v.connect(k),v.connect(A.inputs===void 0?A:A.inputs[0]),k.connect(S,0),k.connect(N,0),k.connect(F,1),k.connect(q,1),A.connect(x),x.connect(E.inputs===void 0?E:E.inputs[0]),x.connect(O.inputs===void 0?O:O.inputs[0]),x.connect(L.inputs===void 0?L:L.inputs[0]),x.connect(W.inputs===void 0?W:W.inputs[0]),E.connect(S.gain),O.connect(N.gain),L.connect(F.gain),W.connect(q.gain),S.connect(f,0,0),F.connect(f,0,0),N.connect(f,0,1),q.connect(f,0,1)},disconnectGraph(){v.disconnect(k),v.disconnect(A.inputs===void 0?A:A.inputs[0]),k.disconnect(S,0),k.disconnect(N,0),k.disconnect(F,1),k.disconnect(q,1),A.disconnect(x),x.disconnect(E.inputs===void 0?E:E.inputs[0]),x.disconnect(O.inputs===void 0?O:O.inputs[0]),x.disconnect(L.inputs===void 0?L:L.inputs[0]),x.disconnect(W.inputs===void 0?W:W.inputs[0]),E.disconnect(S.gain),O.disconnect(N.gain),L.disconnect(F.gain),W.disconnect(q.gain),S.disconnect(f,0,0),F.disconnect(f,0,0),N.disconnect(f,0,1),q.disconnect(f,0,1)}}},p=(m,v,x,f,g)=>{if(v===1)return h(m,x,f,g);if(v===2)return d(m,x,f,g);throw r()};return(m,{channelCount:v,channelCountMode:x,pan:f,...g})=>{if(x==="max")throw r();const _=t(m,{...g,channelCount:1,channelCountMode:x,numberOfInputs:2}),C=n(m,{...g,channelCount:v,channelCountMode:x,gain:1}),w=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:f});let{connectGraph:T,disconnectGraph:k}=p(m,v,C,w,_);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const S={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(A){C.channelCount!==A&&(E&&k(),{connectGraph:T,disconnectGraph:k}=p(m,A,C,w,_),E&&T()),C.channelCount=A},get channelCountMode(){return C.channelCountMode},set channelCountMode(A){if(A==="clamped-max"||A==="max")throw r();C.channelCountMode=A},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(A){C.channelInterpretation=A},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get pan(){return w.gain},addEventListener(...A){return C.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return C.dispatchEvent(A[0])},removeEventListener(...A){return C.removeEventListener(A[0],A[1],A[2])}};let E=!1;const N=()=>{T(),E=!0},O=()=>{k(),E=!1};return i(ao(S,_),N,O)}},M2=(t,e,n,s,r,i,o)=>(a,l)=>{const u=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);$e(u,l);const c=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(c!==null&&c.length<2)throw e();ye(u,{curve:c},"curve"),ye(u,l,"oversample");let h=null,d=!1;return o(u,"curve",v=>()=>v.call(u),v=>x=>(v.call(u,x),d&&(s(x)&&h===null?h=t(a,u):!s(x)&&h!==null&&(h(),h=null)),x)),r(u,()=>{d=!0,s(u.curve)&&(h=t(a,u))},()=>{d=!1,h!==null&&(h(),h=null)})},R2=(t,e,n,s,r)=>(i,{curve:o,oversample:a,...l})=>{const u=i.createWaveShaper(),c=i.createWaveShaper();$e(u,l),$e(c,l);const h=n(i,{...l,gain:1}),d=n(i,{...l,gain:-1}),p=n(i,{...l,gain:1}),m=n(i,{...l,gain:-1});let v=null,x=!1,f=null;const g={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(w){h.channelCount=w,d.channelCount=w,u.channelCount=w,p.channelCount=w,c.channelCount=w,m.channelCount=w},get channelCountMode(){return u.channelCountMode},set channelCountMode(w){h.channelCountMode=w,d.channelCountMode=w,u.channelCountMode=w,p.channelCountMode=w,c.channelCountMode=w,m.channelCountMode=w},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(w){h.channelInterpretation=w,d.channelInterpretation=w,u.channelInterpretation=w,p.channelInterpretation=w,c.channelInterpretation=w,m.channelInterpretation=w},get context(){return u.context},get curve(){return f},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)u.curve=w,c.curve=w;else{const T=w.length,k=new Float32Array(T+2-T%2),S=new Float32Array(T+2-T%2);k[0]=w[0],S[0]=-w[T-1];const E=Math.ceil((T+1)/2),N=(T+1)/2-1;for(let O=1;O<E;O+=1){const A=O/E*N,F=Math.floor(A),L=Math.ceil(A);k[O]=F===L?w[F]:(1-(A-F))*w[F]+(1-(L-A))*w[L],S[O]=F===L?-w[T-1-F]:-((1-(A-F))*w[T-1-F])-(1-(L-A))*w[T-1-L]}k[E]=T%2===1?w[E-1]:(w[E-2]+w[E-1])/2,u.curve=k,c.curve=S}f=w,x&&(s(f)&&v===null?v=t(i,h):v!==null&&(v(),v=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(w){u.oversample=w,c.oversample=w},addEventListener(...w){return h.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return h.dispatchEvent(w[0])},removeEventListener(...w){return h.removeEventListener(w[0],w[1],w[2])}};o!==null&&(g.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==g.oversample&&(g.oversample=a);const _=()=>{h.connect(u).connect(p),h.connect(d).connect(c).connect(m).connect(p),x=!0,s(f)&&(v=t(i,h))},C=()=>{h.disconnect(u),u.disconnect(p),h.disconnect(d),d.disconnect(c),c.disconnect(m),m.disconnect(p),x=!1,v!==null&&(v(),v=null)};return r(ao(g,p),_,C)},ft=()=>new DOMException("","NotSupportedError"),I2={numberOfChannels:1},P2=(t,e,n,s,r)=>class extends t{constructor(o,a,l){let u;if(typeof o=="number"&&a!==void 0&&l!==void 0)u={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")u=o;else throw new Error("The given parameters are not valid.");const{length:c,numberOfChannels:h,sampleRate:d}={...I2,...u},p=s(h,c,d);e(ha,()=>ha(p))||p.addEventListener("statechange",(()=>{let m=0;const v=x=>{this._state==="running"&&(m>0?(p.removeEventListener("statechange",v),x.stopImmediatePropagation(),this._waitForThePromiseToSettle(x)):m+=1)};return v})()),super(p,h),this._length=c,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,e1(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},b2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},F2=(t,e,n,s,r,i,o)=>class extends t{constructor(l,u){const c=r(l),h={...b2,...u},d=n(c,h),p=i(c),m=p?s():null,v=l.sampleRate/2;super(l,!1,d,m),this._detune=e(this,p,d.detune,153600,-153600),this._frequency=e(this,p,d.frequency,v,-v),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=m,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=u;const c=this._nativeOscillatorNode.onended;this._onended=c!==null&&c===u?l:c}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Vi(this);const u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),Pn(this)&&Su(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},L2=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;const u=async(c,h)=>{let d=n(c);const p=rt(d,h);if(!p){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,m),a!==null&&d.start(a),l!==null&&d.stop(l)}return i.set(h,d),p?(await t(h,c.detune,d.detune),await t(h,c.frequency,d.frequency)):(await s(h,c.detune,d.detune),await s(h,c.frequency,d.frequency)),await r(c,h,d),d};return{set periodicWave(c){o=c},set start(c){a=c},set stop(c){l=c},render(c,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):u(c,h)}}},j2={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},V2=(t,e,n,s,r,i,o)=>class extends t{constructor(l,u){const c=r(l),h={...j2,...u},d=n(c,h),p=i(c),m=p?s():null;super(l,!1,d,m),this._nativePannerNode=d,this._orientationX=e(this,p,d.orientationX,ot,_t),this._orientationY=e(this,p,d.orientationY,ot,_t),this._orientationZ=e(this,p,d.orientationZ,ot,_t),this._positionX=e(this,p,d.positionX,ot,_t),this._positionY=e(this,p,d.positionY,ot,_t),this._positionZ=e(this,p,d.positionZ,ot,_t),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},z2=(t,e,n,s,r,i,o,a,l,u)=>()=>{const c=new WeakMap;let h=null;const d=async(p,m)=>{let v=null,x=i(p);const f={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation},g={...f,coneInnerAngle:x.coneInnerAngle,coneOuterAngle:x.coneOuterAngle,coneOuterGain:x.coneOuterGain,distanceModel:x.distanceModel,maxDistance:x.maxDistance,panningModel:x.panningModel,refDistance:x.refDistance,rolloffFactor:x.rolloffFactor},_=rt(x,m);if("bufferSize"in x)v=s(m,{...f,gain:1});else if(!_){const C={...g,orientationX:x.orientationX.value,orientationY:x.orientationY.value,orientationZ:x.orientationZ.value,positionX:x.positionX.value,positionY:x.positionY.value,positionZ:x.positionZ.value};x=r(m,C)}if(c.set(m,v===null?x:v),v!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const O=new o(6,p.context.length,m.sampleRate),A=e(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});A.connect(O.destination),h=(async()=>{const F=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(L,q)=>{const W=n(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q===0?1:0});return await a(O,L,W.offset),W}));for(let L=0;L<6;L+=1)F[L].connect(A,0,L),F[L].start(0);return u(O)})()}const C=await h,w=s(m,{...f,gain:1});await l(p,m,w);const T=[];for(let O=0;O<C.numberOfChannels;O+=1)T.push(C.getChannelData(O));let k=[T[0][0],T[1][0],T[2][0]],S=[T[3][0],T[4][0],T[5][0]],E=s(m,{...f,gain:1}),N=r(m,{...g,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:S[0],positionY:S[1],positionZ:S[2]});w.connect(E).connect(N.inputs[0]),N.connect(v);for(let O=128;O<C.length;O+=128){const A=[T[0][O],T[1][O],T[2][O]],F=[T[3][O],T[4][O],T[5][O]];if(A.some((L,q)=>L!==k[q])||F.some((L,q)=>L!==S[q])){k=A,S=F;const L=O/m.sampleRate;E.gain.setValueAtTime(0,L),E=s(m,{...f,gain:0}),N=r(m,{...g,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:S[0],positionY:S[1],positionZ:S[2]}),E.gain.setValueAtTime(1,L),w.connect(E).connect(N.inputs[0]),N.connect(v)}}return v}return _?(await t(m,p.orientationX,x.orientationX),await t(m,p.orientationY,x.orientationY),await t(m,p.orientationZ,x.orientationZ),await t(m,p.positionX,x.positionX),await t(m,p.positionY,x.positionY),await t(m,p.positionZ,x.positionZ)):(await a(m,p.orientationX,x.orientationX),await a(m,p.orientationY,x.orientationY),await a(m,p.orientationZ,x.orientationZ),await a(m,p.positionX,x.positionX),await a(m,p.positionY,x.positionY),await a(m,p.positionZ,x.positionZ)),oo(x)?await l(p,m,x.inputs[0]):await l(p,m,x),x};return{render(p,m){const v=c.get(m);return v!==void 0?Promise.resolve(v):d(p,m)}}},W2={disableNormalization:!1},B2=(t,e,n,s)=>class c1{constructor(i,o){const a=e(i),l=s({...W2,...o}),u=t(a,l);return n.add(u),u}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===c1.prototype||n.has(i)}},$2=(t,e)=>(n,s,r)=>(t(s).replay(r),e(s,n,r)),U2=(t,e,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([u,c])=>{const d=await e(u).render(u,r),p=s.context.destination;!n(u)&&(s!==p||!n(s))&&d.connect(i,c,l)})).reduce((a,l)=>[...a,...l],[]))},q2=(t,e,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const c=await t(a).render(a,r);n(a)||c.connect(i,l)}))},H2=(t,e,n,s)=>r=>t(ha,()=>ha(r))?Promise.resolve(t(s,s)).then(i=>{if(!i){const o=n(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),G2=t=>(e,n)=>{t.set(e,n)},K2=t=>(e,n)=>t.set(e,n),Y2=(t,e,n,s,r,i,o,a)=>(l,u)=>n(l).render(l,u).then(()=>Promise.all(Array.from(s(u)).map(c=>n(c).render(c,u)))).then(()=>r(u)).then(c=>(typeof c.copyFromChannel!="function"?(o(c),vm(c)):e(i,()=>i(c))||a(c),t.add(c),c)),X2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Q2=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const u=r(a),c={...X2,...l},h=n(u,c),d=i(u),p=d?s():null;super(a,!1,h,p),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},Z2=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let u=n(a);const c=rt(u,l);if(!c){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(l,h)}return i.set(l,u),c?await t(l,a.pan,u.pan):await s(l,a.pan,u.pan),oo(u)?await r(a,l,u.inputs[0]):await r(a,l,u),u};return{render(a,l){const u=i.get(l);return u!==void 0?Promise.resolve(u):o(a,l)}}},J2=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},eA=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new t(s,"a",{numberOfOutputs:0}),l=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await s.startRendering(),await new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},tA=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{s.disconnect(),r(n.currentTime!==0)},n.startRendering()})},nA=()=>new DOMException("","UnknownError"),sA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},rA=(t,e,n,s,r,i,o)=>class extends t{constructor(l,u){const c=r(l),h={...sA,...u},d=n(c,h),m=i(c)?s():null;super(l,!0,d,m),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},iA=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!rt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,u)}return s.set(o,a),oo(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},oA=()=>typeof window>"u"?null:window,aA=(t,e)=>n=>{n.copyFromChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=s.length;for(let h=o<0?-o:0;h+o<l&&h<c;h+=1)s[h]=u[h+o]},n.copyToChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=s.length;for(let h=o<0?-o:0;h+o<l&&h<c;h+=1)u[h+o]=s[h]}},lA=t=>e=>{e.copyFromChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyToChannel)},uA=t=>(e,n)=>{const s=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),t(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},cA=(t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=n.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let l=0;l<a;l+=1)r.connect(s,0,l)},()=>r.disconnect(s))},h1=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),d1=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Eu=(t,e,n,s)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(i),set:s(o)})},hA=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),dA=t=>({...t,channelCount:t.numberOfOutputs}),fA=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},f1=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(s.code!==9)throw s;f1(t,e,n+1e-7)}},pA=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},mA=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},gA=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Sm=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},p1=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Cm=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},vA=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},_A=t=>{t.start=(e=>(n=0,s=0,r)=>{const i=t.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)})(t.start)},m1=(t,e)=>{const n=e.createGain();t.connect(n);const s=(r=>()=>{r.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),ao(t,n),t.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else r.call(t,o),i=!0}})(t.stop)},lo=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},yA=Vk(Br),wA=qk(Br),xA=sE(Bh),g1=new WeakMap,SA=xE(g1),an=IN(new Map,new WeakMap),gn=oA(),v1=QE(an,yn),Tm=wE(at),Qe=U2(at,Tm,Mr),CA=Xk(v1,ve,Qe),pe=TE(Wh),Bn=T2(gn),ue=WE(Bn),_1=new WeakMap,y1=fE(lo),Au=t2(gn),km=LE(Au),Nm=jE(gn),w1=VE(gn),da=s2(gn),Le=xN(zk(G0),Uk(yA,wA,Jc,xA,eh,at,SA,xu,ve,Br,Pn,Mr,fc),an,RE(Gf,eh,at,ve,ca,Pn),yn,$h,ft,JN(Jc,Gf,at,ve,ca,pe,Pn,ue),oE(_1,at,on),y1,pe,km,Nm,w1,ue,da),TA=Yk(Le,CA,yn,v1,pe,ue),Em=new WeakSet,Ev=ZE(gn),x1=HN(new Uint32Array(1)),Am=aA(x1,yn),Om=lA(x1),kA=Zk(Em,an,ft,Ev,Bn,J2(Ev),Am,Om),Uh=Hk(Tt),S1=q2(Tm,Cu,Mr),wn=zN(S1),uo=e2(Uh,an,pA,mA,gA,Sm,p1,Cm,_A,uA(Eu),m1),xn=$2(SE(Cu),S1),NA=tN(wn,uo,ve,xn,Qe),ln=SN(Wk(K0),_1,gm,CN,Ik,Pk,bk,Fk,Lk,Uf,q0,Au,f1),EA=eN(Le,NA,ln,Ge,uo,pe,ue,lo),AA=cN(Le,hN,yn,Ge,n2(Tt,Eu),pe,ue,Qe),OA=RN(wn,l1,ve,xn,Qe),$r=K2(g1),DA=MN(Le,ln,OA,$h,l1,pe,ue,$r),Rs=YE(Br,Nm),MA=cA(Ge,Rs),Is=c2(Au,MA),RA=FN(Is,ve,Qe),IA=bN(Le,RA,Is,pe,ue),PA=VN(ku,ve,Qe),bA=jN(Le,PA,ku,pe,ue,dA),FA=f2(Uh,uo,Tt,Rs),co=d2(Uh,an,FA,Sm,Cm),LA=qN(wn,co,ve,xn,Qe),jA=UN(Le,ln,LA,co,pe,ue,lo),C1=p2(ft,Eu),VA=YN(C1,ve,Qe),zA=KN(Le,VA,C1,pe,ue,$r),WA=nE(wn,u1,ve,xn,Qe),BA=tE(Le,ln,WA,u1,pe,ue,$r),T1=m2(ft),$A=cE(wn,T1,ve,xn,Qe),UA=uE(Le,ln,$A,T1,ft,pe,ue,$r),qA=_E(wn,Tt,ve,xn,Qe),HA=vE(Le,ln,qA,Tt,pe,ue),GA=y2($h,Ge,Nu,ft),qh=H2(an,Tt,Nu,tA(Tt,Bn)),KA=ME(uo,ve,Bn,Qe,qh),YA=g2(GA),XA=OE(Le,YA,KA,pe,ue,$r),QA=dN(ln,Is,co,Nu,ft,h1,ue,Eu),k1=new WeakMap,ZA=KE(AA,QA,y1,ue,k1,lo),N1=k2(Uh,an,Sm,p1,Cm,m1),JA=L2(wn,N1,ve,xn,Qe),eO=F2(Le,ln,N1,JA,pe,ue,lo),E1=BN(uo),tO=R2(E1,Ge,Tt,d1,Rs),Hh=M2(E1,Ge,tO,d1,Rs,Au,Eu),nO=E2(Jc,Ge,Is,Tt,Nu,Hh,ft,eh,h1,Rs),A1=N2(nO),sO=z2(wn,Is,co,Tt,A1,ve,Bn,xn,Qe,qh),rO=V2(Le,ln,A1,sO,pe,ue,$r),iO=A2(yn),oO=B2(iO,pe,new WeakSet,fA),aO=D2(Is,ku,Tt,Hh,ft,Rs),O1=O2(aO,ft),lO=Z2(wn,O1,ve,xn,Qe),uO=Q2(Le,ln,O1,lO,pe,ue),cO=iA(Hh,ve,Qe),hO=rA(Le,Ge,Hh,cO,pe,ue,$r),D1=BE(gn),Dm=pE(gn),M1=new WeakMap,dO=kE(M1,Bn),fO=D1?$k(an,ft,dE(gn),Dm,mE(jk),pe,dO,ue,da,new WeakMap,new WeakMap,eA(da,Bn),gn):void 0,pO=zE(km,ue),mO=ZN(Em,an,QN,hE,new WeakSet,pe,pO,Qc,ha,Am,Om),R1=ON(fO,TA,kA,EA,DA,IA,bA,jA,zA,mO,BA,UA,HA,XA,ZA,eO,rO,oO,uO,hO),gO=$E(Le,w2,pe,ue),vO=qE(Le,x2,pe,ue),_O=HE(Le,S2,pe,ue),yO=C2(Ge,ue),wO=GE(Le,yO,pe),xO=uN(R1,Ge,ft,nA,gO,vO,_O,wO,Au),Mm=NE(k1),SO=Gk(Mm),I1=WN(yn),CO=rE(Mm),P1=aE(yn),b1=new WeakMap,TO=yE(b1,on),kO=u2(I1,yn,Ge,Is,ku,co,Tt,Nu,ft,P1,Dm,TO,Rs),NO=i2(Ge,kO,Tt,ft,Rs),EO=AN(wn,I1,uo,Is,ku,co,Tt,CO,P1,Dm,ve,da,Bn,xn,Qe,qh),AO=CE(M1),OO=G2(b1),Av=D1?kN(SO,Le,ln,EO,NO,at,AO,pe,ue,da,hA,OO,vA,lo):void 0,DO=XN(ft,Bn),MO=Y2(Em,an,Tm,Mm,qh,Qc,Am,Om),RO=P2(R1,an,Ge,DO,MO),IO=IE(Wh,km),PO=PE(mm,Nm),bO=bE(gm,w1),FO=FE(Wh,ue);function Y(t,e){if(!t)throw new Error(e)}function vn(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function F1(t){!t.isOffline&&t.state!=="running"&&j1('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let L1=console;function LO(...t){L1.log(...t)}function j1(...t){L1.warn(...t)}function Wt(t){return typeof t>"u"}function J(t){return!Wt(t)}function jO(t){return typeof t=="function"}function Rr(t){return typeof t=="number"}function Xs(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function VO(t){return typeof t=="boolean"}function tn(t){return Array.isArray(t)}function _n(t){return typeof t=="string"}function Qu(t){return _n(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function zO(t){return new xO(t)}function WO(t,e,n){return new RO(t,e,n)}const Qs=typeof self=="object"?self:null,BO=Qs&&(Qs.hasOwnProperty("AudioContext")||Qs.hasOwnProperty("webkitAudioContext"));function $O(t,e,n){return Y(J(Av),"This node only works in a secure context (https or localhost)"),new Av(t,e,n)}function un(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function Fe(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(s.next(c))}catch(h){o(h)}}function l(c){try{u(s.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((s=s.apply(t,e||[])).next())})}class UO{constructor(e,n,s){this._callback=e,this._type=n,this._updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ir(t){return bO(t)}function vs(t){return PO(t)}function pc(t){return FO(t)}function Xr(t){return IO(t)}function V1(t){return t instanceof AudioBuffer}function qO(t,e){return t==="value"||Ir(e)||vs(e)||V1(e)}function _i(t,...e){if(!e.length)return t;const n=e.shift();if(Xs(t)&&Xs(n))for(const s in n)qO(s,n[s])?t[s]=n[s]:Xs(n[s])?(t[s]||Object.assign(t,{[s]:{}}),_i(t[s],n[s])):Object.assign(t,{[s]:n[s]});return _i(t,...e)}function HO(t,e){return t.length===e.length&&t.every((n,s)=>e[s]===n)}function R(t,e,n=[],s){const r={},i=Array.from(e);if(Xs(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(_i(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())),i.length===1&&Xs(i[0]))_i(r,i[0]);else for(let o=0;o<n.length;o++)J(i[o])&&(r[n[o]]=i[o]);return _i(t,r)}function GO(t){return t.constructor.getDefaults()}function yi(t,e){return Wt(t)?e:t}function Ov(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class $n{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Qs&&this.toString()===Qs.TONE_DEBUG_CLASS)&&LO(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}$n.version=U0;const Rm=1e-6;function rh(t,e){return t>e+Rm}function Zf(t,e){return rh(t,e)||Xt(t,e)}function z1(t,e){return t+Rm<e}function Xt(t,e){return Math.abs(t-e)<Rm}function KO(t,e,n){return Math.max(Math.min(t,n),e)}class Sn extends $n{constructor(){super(),this.name="Timeline",this._timeline=[];const e=R(Sn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Y(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];Y(Zf(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const s=this._search(e,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const s=this._search(e,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Xt(this._timeline[n].time,e)){for(let s=n;s>=0&&Xt(this._timeline[s].time,e);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Zf(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][n]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],l=this._timeline[o+1];if(Xt(a[n],e)){for(let u=o;u<this._timeline.length;u++){const c=this._timeline[u];if(Xt(c[n],e))o=u;else break}return o}else{if(z1(a[n],e)&&rh(l[n],e))return o;rh(a[n],e)?i=o:s=o+1}}return-1}_iterate(e,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const s=this._search(e);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(e,n){const s=this._search(e);return this._iterate(n,s+1),this}forEachBetween(e,n,s){let r=this._search(e),i=this._search(n);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===n&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,n){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(n,s+1),this}forEachAtTime(e,n){const s=this._search(e);if(s!==-1&&Xt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Xt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{n(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const W1=[];function Gh(t){W1.push(t)}function YO(t){W1.forEach(e=>e(t))}const B1=[];function Kh(t){B1.push(t)}function XO(t){B1.forEach(e=>e(t))}class Ou extends $n{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(r=>{Wt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(e,n){const s=(...r)=>{n(...r),this.off(e,s)};return this.on(e,s),this}off(e,n){return e.split(/\W+/).forEach(r=>{if(Wt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Wt(n))this._events[e]=[];else{const i=this._events[e];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(Ou.prototype,n);Object.defineProperty(e.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class $1 extends Ou{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Du extends $1{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Sn,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=R(Du.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=zO({latencyHint:e.latencyHint}),this._ticker=new UO(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(YO(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,s){return this._context.createBuffer(e,n,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,s){return this._context.createPeriodicWave(e,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Y(Xr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Y(Xr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Y(Xr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Y(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Y(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Y(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Y(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return $O(this.rawContext,e,n)}addAudioWorkletModule(e,n){return Fe(this,void 0,void 0,function*(){Y(J(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(n)})}workletsAreReady(){return Fe(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(n=>e.push(n)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let n=0;if(this._latencyHint=e,_n(e))switch(e){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Xr(this._context)?this._context.resume():Promise.resolve()}close(){return Fe(this,void 0,void 0,function*(){Xr(this._context)&&(yield this._context.close()),this._initialized&&XO(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+n})};return r(),s}}class QO extends $1{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e,n){return Fe(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function ce(t,e){tn(e)?e.forEach(n=>ce(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function U1(t,e){tn(e)?e.forEach(n=>U1(t,n)):Object.defineProperty(t,e,{writable:!0})}const le=()=>{};class oe extends $n{constructor(){super(),this.name="ToneAudioBuffer",this.onload=le;const e=R(oe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&V1(e.url)||e.url instanceof oe?this.set(e.url):_n(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:le,onload:le,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:jt().sampleRate}set(e){return e instanceof oe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Fe(this,void 0,void 0,function*(){const n=oe.load(e).then(s=>{this.set(s),this.onload(this)});oe.downloads.push(n);try{yield n}finally{const s=oe.downloads.indexOf(n);oe.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=tn(e)&&e[0].length>0,s=n?e.length:1,r=n?e[0].length:e.length,i=jt(),o=i.createBuffer(s,r,i.sampleRate),a=!n&&s===1?[e]:e;for(let l=0;l<s;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(Rr(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(r=>r/s),this.fromArray(n)}return this}toArray(e){if(Rr(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){const s=Math.floor(e*this.sampleRate),r=Math.floor(n*this.sampleRate);Y(s<r,"The start time must be less than the end time");const i=r-s,o=jt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new oe(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new oe().fromArray(e)}static fromUrl(e){return Fe(this,void 0,void 0,function*(){return yield new oe().load(e)})}static load(e){return Fe(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const a=n[1].split("|");let l=a[0];for(const u of a)if(oe.supportsType(u)){l=u;break}e=e.replace(n[0],l)}const s=oe.baseUrl===""||oe.baseUrl.endsWith("/")?oe.baseUrl:oe.baseUrl+"/",r=yield fetch(s+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const i=yield r.arrayBuffer();return yield jt().decodeAudioData(i)})}static supportsType(e){const n=e.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Fe(this,void 0,void 0,function*(){for(yield Promise.resolve();oe.downloads.length;)yield oe.downloads[0]})}}oe.baseUrl="";oe.downloads=[];class Yh extends Du{constructor(){super({clockSource:"offline",context:pc(arguments[0])?arguments[0]:WO(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:pc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=pc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Fe(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);e&&n%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return Fe(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new oe(n)})}close(){return Promise.resolve()}}const q1=new QO;let jo=q1;function jt(){return jo===q1&&BO&&ZO(new Du),jo}function ZO(t){Xr(t)?jo=new Du(t):pc(t)?jo=new Yh(t):jo=t}if(Qs&&!Qs.TONE_SILENCE_LOGGING){const e=` * Tone.js v${U0} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function JO(t){return Math.pow(10,t/20)}function eD(t){return 20*(Math.log(t)/Math.LN10)}function ih(t){return Math.pow(2,t/12)}let Xh=440;function tD(){return Xh}function nD(t){Xh=t}function Jf(t){return Math.round(H1(t))}function H1(t){return 69+12*Math.log2(t/Xh)}function sD(t){return Xh*Math.pow(2,(t-69)/12)}class Im extends $n{constructor(e,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const s=parseInt(e,10),r=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Im&&this.fromType(this._val),Wt(this._val))return this._noArg();if(_n(this._val)&&Wt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Xs(this._val)){let e=0;for(const n in this._val)if(J(this._val[n])){const s=this._val[n],r=new this.constructor(this.context,n).valueOf()*s;e+=r}return e}if(J(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return _n(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Zt extends Im{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Zt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let s=n[0],r=new Zt(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new Zt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,n,r].join(":")}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Jf(this.toFrequency())}_now(){return this.context.now()}}class Vt extends Zt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return tD()}static set A4(e){nD(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Vt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,n){const r=rD[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:Vt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new Vt(this.context,this.valueOf()*ih(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Jf(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Vt.A4);let s=Math.round(12*n)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),iD[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return sD(e)}static ftom(e){return Jf(e)}}const rD={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},iD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Vo extends Zt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ct extends $n{constructor(){super();const e=R(Ct.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:jt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new Zt(this.context,e).toSeconds()}toFrequency(e){return new Vt(this.context,e).toFrequency()}toTicks(e){return new Vo(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(s=>{Wt(e[s])&&delete n[s]}),n}get(){const e=GO(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];J(s)&&J(s.value)&&J(s.setValueAtTime)?e[n]=s.value:s instanceof Ct?e[n]=s._getPartialProperties(e[n]):tn(s)||Rr(s)||_n(s)||VO(s)?e[n]=s:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&J(this[n])&&(this[n]&&J(this[n].value)&&J(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Ct?this[n].set(e[n]):this[n]=e[n])}),this}}class Pm extends Sn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,s){return vn(n,0),this.add(Object.assign({},s,{state:e,time:n})),this}getLastState(e,n){const s=this._search(n);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,n){const s=this._search(n);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class ie extends Ct{constructor(){super(R(ie.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=R(ie.getDefaults(),arguments,["param","units","convert"]);for(Y(J(e.param)&&(Ir(e.param)||e.param instanceof ie),"param must be an AudioParam");!Ir(e.param);)e.param=e.param._param;this._swappable=J(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Sn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,J(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ct.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return J(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return J(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return J(this.maxValue)&&J(this.minValue)&&vn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?JO(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?eD(e):e}setValueAtTime(e,n){const s=this.toSeconds(n),r=this._fromType(e);return Y(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),s=this._events.getAfter(n),r=this._events.get(n);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,n))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,n):i=this._exponentialInterpolate(r.time,o,s.time,s.value,n)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const s=this._fromType(e),r=this.toSeconds(n);return Y(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,n){let s=this._fromType(e);s=Xt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(n);return Y(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(n)),this}linearRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(n)),this}targetRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,n),this}exponentialApproachValueAtTime(e,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,n,r),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(e,n+s),this}setTargetAtTime(e,n,s){const r=this._fromType(e);Y(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(r),Y(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,n,s,r=1){s=this.toSeconds(s),n=this.toSeconds(n);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),n);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(l),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return Y(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),s=this._fromType(this.getValueAtTime(n));Y(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const r=this._events.get(n),i=this._events.getAfter(n);return r&&Xt(r.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(e,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,s):this.linearRampTo(e,n,s),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){Y(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,s,r,i){return s+(n-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,n,s,r,i){return n+(r-n)*((i-e)/(s-e))}_exponentialInterpolate(e,n,s,r,i){return n*Math.pow(r/n,(i-e)/(s-e))}}class K extends Ct{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return J(this.input)?Ir(this.input)||this.input instanceof ie?1:this.input.numberOfInputs:0}get numberOfOutputs(){return J(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return J(e)&&(e instanceof K||vs(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Y(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,s=0){return Ut(this,e,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return j1("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,s=0){return G1(this,e,n,s),this}chain(...e){return oh(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),J(this.input)&&(this.input instanceof K?this.input.dispose():vs(this.input)&&this.input.disconnect()),J(this.output)&&(this.output instanceof K?this.output.dispose():vs(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function oh(...t){const e=t.shift();t.reduce((n,s)=>(n instanceof K?n.connect(s):vs(n)&&Ut(n,s),s),e)}function Ut(t,e,n=0,s=0){for(Y(J(t),"Cannot connect from undefined node"),Y(J(e),"Cannot connect to undefined node"),(e instanceof K||vs(e))&&Y(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Y(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof K||e instanceof ie;)J(e.input)&&(e=e.input);for(;t instanceof K;)J(t.output)&&(t=t.output);Ir(e)?t.connect(e,n):t.connect(e,n,s)}function G1(t,e,n=0,s=0){if(J(e))for(;e instanceof K;)e=e.input;for(;!vs(t);)J(t.output)&&(t=t.output);Ir(e)?t.disconnect(e,n):vs(e)?t.disconnect(e,n,s):t.disconnect()}let Ne=class ep extends K{constructor(){super(R(ep.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=R(ep.getDefaults(),arguments,["gain","units"]);this.gain=new ie({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),ce(this,"gain")}static getDefaults(){return Object.assign(K.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};class zi extends K{constructor(e){super(e),this.onended=le,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ne({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(K.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:le})}_startGain(e,n=1){Y(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+s):this._gainNode.gain.exponentialApproachValueAtTime(n,e,s)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Y(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==le&&(this.onended(this),this.onended=le,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Y(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ah extends zi{constructor(){super(R(ah.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=R(ah.getDefaults(),arguments,["offset"]);Ut(this._source,this._gainNode),this.offset=new ie({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(zi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class _e extends K{constructor(){super(R(_e.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=R(_e.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ah({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(K.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,s=0){return Qh(this,e,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,s){return this._param.exponentialRampTo(e,n,s),this}linearRampTo(e,n,s){return this._param.linearRampTo(e,n,s),this}targetRampTo(e,n,s){return this._param.targetRampTo(e,n,s),this}exponentialApproachValueAtTime(e,n,s){return this._param.exponentialApproachValueAtTime(e,n,s),this}setTargetAtTime(e,n,s){return this._param.setTargetAtTime(e,n,s),this}setValueCurveAtTime(e,n,s,r){return this._param.setValueCurveAtTime(e,n,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,s){return this._param.rampTo(e,n,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Qh(t,e,n,s){(e instanceof ie||Ir(e)||e instanceof _e&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof _e&&(e.overridden=!0)),Ut(t,e,n,s)}class lh extends ie{constructor(){super(R(lh.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Sn(1/0),this._multiplier=1;const e=R(lh.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ie.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,s){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const l=s*a+n,u=this._exponentialApproach(i.time,i.value,r,s,l);this.linearRampToValueAtTime(this._toType(u),l)}return this}setValueAtTime(e,n){const s=this.toSeconds(n);super.setValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const s=this._fromType(e),r=this._events.get(n),i=Math.round(Math.max((n-r.time)*10,1)),o=(n-r.time)/i;for(let a=0;a<=i;a++){const l=o*a+r.time,u=this._exponentialInterpolate(r.time,r.value,n,s,l);this.linearRampToValueAtTime(this._toType(u),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Wt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const n=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const r=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*o*(n.ticks-e)),l=(-r+a)/o,u=(-r-a)/o;return(l>0?l:u)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const s=this.toSeconds(n),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class uh extends _e{constructor(){super(R(uh.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=R(uh.getDefaults(),arguments,["value"]);this.input=this._param=new lh({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(_e.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class ch extends Ct{constructor(){super(R(ch.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Pm,this._tickOffset=new Sn;const e=R(ch.getDefaults(),arguments,["frequency"]);this.frequency=new uh({context:this.context,units:e.units,value:e.frequency}),ce(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ct.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),J(n)&&this.setTicksAtTime(n,s)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),s=this._state.getLastState("stopped",n),r={state:"paused",time:n};this._state.add(r);let i=s,o=0;return this._state.forEachBetween(s.time,n+this.sampleTime,a=>{let l=i.time;const u=this._tickOffset.get(a.time);u&&u.time>=i.time&&(o=u.ticks,l=u.time),i.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(l)),i=a}),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),s=this.frequency.timeToTicks(e,n);this.setTicksAtTime(s,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let r=n,i=0;return this._state.forEachBetween(n.time,e+this.sampleTime,o=>{let a=r.time;const l=this._tickOffset.get(o.time);l&&l.time>=r.time&&(i=l.seconds,a=l.time),r.state==="started"&&o.state!=="started"&&(i+=o.time-a),r=o}),this._state.remove(s),i}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const s=this._tickOffset.get(n),r=this._state.get(n),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,s){let r=this._state.get(e);this._state.forEachBetween(e,n,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(r.time),u=a-l;let c=Math.ceil(u)-u;c=Xt(c,1)?0:c;let h=this.frequency.getTimeOfTick(a+c);for(;h<n;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class fa extends Ct{constructor(){super(R(fa.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=le,this._lastUpdate=0,this._state=new Pm("stopped"),this._boundLoop=this._loop.bind(this);const e=R(fa.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new ch({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ce(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ct.getDefaults(),{callback:le,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){F1(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,n,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ou.mixin(fa);let bd=class tp extends K{constructor(){super(R(tp.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const e=R(tp.getDefaults(),arguments,["delayTime","maxDelay"]),n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new ie({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),ce(this,"delayTime")}static getDefaults(){return Object.assign(K.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}};class bm extends $n{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=R(bm.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const s=e.urls[n];this.add(n,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:le,onload:le,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Y(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,s=le,r=le){return _n(n)?this._buffers.set(e.toString(),new oe(this.baseUrl+n,s,r)):this._buffers.set(e.toString(),new oe(n,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Dn extends Vo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class oD extends Ct{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Sn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Gh(t=>{t.draw=new oD({context:t})});Kh(t=>{t.draw.dispose()});class aD extends $n{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Y(J(e.time),"Events must have a time property"),Y(J(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new lD(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const s of n)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let s,r=null;if(n>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const n=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(e){const n=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let s=n[0];for(let r=1;r<n.length;r++)n[r].low>s.low&&(s=n[r]);return s.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(e,n){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class lD{constructor(e,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Pr extends K{constructor(){super(R(Pr.getDefaults(),arguments,["volume"])),this.name="Volume";const e=R(Pr.getDefaults(),arguments,["volume"]);this.input=this.output=new Ne({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ce(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(K.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let uD=class np extends K{constructor(){super(R(np.getDefaults(),arguments)),this.name="Destination",this.input=new Pr({context:this.context}),this.output=new Ne({context:this.context}),this.volume=this.input.volume;const e=R(np.getDefaults(),arguments);oh(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(K.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),oh(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};Gh(t=>{t.destination=new uD({context:t})});Kh(t=>{t.destination.dispose()});class cD extends $n{constructor(e){super(),this.name="TimelineValue",this._timeline=new Sn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Cs{constructor(e,n){this.id=Cs._eventId++;const s=Object.assign(Cs.getDefaults(),n);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=s.time}static getDefaults(){return{callback:le,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Cs._eventId=0;class Fm extends Cs{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Fm.getDefaults(),n);this.duration=new Dn(e.context,s.duration).valueOf(),this._interval=new Dn(e.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Cs.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const n=this.transport.getTicksAtTime(e);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Dn(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const n=this.transport.getTicksAtTime(e);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Dn(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Dn(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class pa extends Ct{constructor(){super(R(pa.getDefaults(),arguments)),this.name="Transport",this._loop=new cD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Sn,this._repeatedEvents=new aD,this._syncedSignals=[],this._swingAmount=0;const e=R(pa.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new fa({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),ce(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ct.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Dn(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(n,s=>s.invoke(e))}schedule(e,n){const s=new Cs(this,{callback:e,time:new Vo(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,n,s,r=1/0){const i=new Fm(this,{callback:e,duration:new Zt(this.context,r).toTicks(),interval:new Zt(this.context,n).toTicks(),time:new Vo(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const s=new Cs(this,{callback:e,once:!0,time:new Vo(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Dn(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){let s;return J(n)&&(s=this.toTicks(n)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){tn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Zt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Zt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Dn(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new Dn(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),s=this._clock.frequency.timeToTicks(e,n);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),i=n+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),r=e-s%e;return this._clock.nextTickTime(r,n)}}syncSignal(e,n){if(!n){const r=this.now();if(e.getValueAtTime(r)!==0){const o=1/(60/this.bpm.getValueAtTime(r)/this.PPQ);n=e.getValueAtTime(r)/o}else n=0}const s=new Ne(n);return this.bpm.connect(s),s.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:s,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===e&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),U1(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ou.mixin(pa);Gh(t=>{t.transport=new pa({context:t})});Kh(t=>{t.transport.dispose()});class ct extends K{constructor(e){super(e),this.input=void 0,this._state=new Pm("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=le,this._syncedStop=le,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Pr({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,ce(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(K.getDefaults(),{mute:!1,onstop:le,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,s){let r=Wt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")Y(rh(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(yi(n,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else F1(this.context),this._start(r,n,s);return this}stop(e){let n=Wt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||J(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(n>0){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const r=n-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=le,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Wi extends zi{constructor(){super(R(Wi.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=R(Wi.getDefaults(),arguments,["url","onload"]);Ut(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ie({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new oe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(zi.getDefaults(),{url:new oe,loop:!1,loopEnd:0,loopStart:0,onload:le,onerror:le,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,s,r=1){Y(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?n=yi(n,this.loopStart):n=yi(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),u=a-l;Zf(o,a)&&(o=(o-l)%u+l),Xt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,z1(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),J(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class ma extends ct{constructor(){super(R(ma.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=R(ma.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ct.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Y(e in Dv,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Dv[this._type];this._source=new Wi({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Kr=44100*5,Fd=2,Cn={brown:null,pink:null,white:null},Dv={get brown(){if(!Cn.brown){const t=[];for(let e=0;e<Fd;e++){const n=new Float32Array(Kr);t[e]=n;let s=0;for(let r=0;r<Kr;r++){const i=Math.random()*2-1;n[r]=(s+.02*i)/1.02,s=n[r],n[r]*=3.5}}Cn.brown=new oe().fromArray(t)}return Cn.brown},get pink(){if(!Cn.pink){const t=[];for(let e=0;e<Fd;e++){const n=new Float32Array(Kr);t[e]=n;let s,r,i,o,a,l,u;s=r=i=o=a=l=u=0;for(let c=0;c<Kr;c++){const h=Math.random()*2-1;s=.99886*s+h*.0555179,r=.99332*r+h*.0750759,i=.969*i+h*.153852,o=.8665*o+h*.3104856,a=.55*a+h*.5329522,l=-.7616*l-h*.016898,n[c]=s+r+i+o+a+l+u+h*.5362,n[c]*=.11,u=h*.115926}}Cn.pink=new oe().fromArray(t)}return Cn.pink},get white(){if(!Cn.white){const t=[];for(let e=0;e<Fd;e++){const n=new Float32Array(Kr);t[e]=n;for(let s=0;s<Kr;s++)n[s]=Math.random()*2-1}Cn.white=new oe().fromArray(t)}return Cn.white}};function Ur(t,e){return Fe(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,s=new Yh(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class hh extends zi{constructor(){super(R(hh.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=R(hh.getDefaults(),arguments,["frequency","type"]);Ut(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ie({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ie({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),ce(this,["frequency","detune"])}static getDefaults(){return Object.assign(zi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let ut=class Yn extends ct{constructor(){super(R(Yn.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=R(Yn.getDefaults(),arguments,["frequency","type"]);this.frequency=new _e({context:this.context,units:"frequency",value:e.frequency}),ce(this,"frequency"),this.detune=new _e({context:this.context,units:"cents",value:e.detune}),ce(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),s=new hh({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Yn._periodicWaveCache.find(n=>n.phase===this._phase&&HO(n.partials,this._partials));{const e=Yn._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(J(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Yn._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Yn._periodicWaveCache.length>100&&Yn._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){vn(e,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,n){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let l=1;l<r;++l){const u=2/(l*Math.PI);let c;switch(e){case"sine":c=l<=a?1:0,this._partials[l-1]=c;break;case"square":c=l&1?2*u:0,this._partials[l-1]=c;break;case"sawtooth":c=u*(l&1?1:-1),this._partials[l-1]=c;break;case"triangle":l&1?c=2*(u*u)*(l-1>>1&1?-1:1):c=0,this._partials[l-1]=c;break;case"custom":c=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}c!==0?(i[l]=-c*Math.sin(n*l),o[l]=c*Math.cos(n*l)):(i[l]=0,o[l]=0)}return[i,o]}_inverseFFT(e,n,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+n[o]*Math.sin(o*s);return r}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,n,o/i*r),s);return KO(-this._inverseFFT(e,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Fe(this,void 0,void 0,function*(){return Ur(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}};ut._periodicWaveCache=[];class Ts extends K{constructor(){super(Object.assign(R(Ts.getDefaults(),arguments,["context"])))}connect(e,n=0,s=0){return Qh(this,e,n,s),this}}class br extends Ts{constructor(){super(Object.assign(R(br.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=R(br.getDefaults(),arguments,["mapping","length"]);tn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):jO(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(_e.getDefaults(),{length:1024})}setMap(e,n=1024){const s=new Float32Array(n);for(let r=0,i=n;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(s=>s.includes(e));Y(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class K1 extends Ts{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new br({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ks extends _e{constructor(){super(Object.assign(R(ks.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=R(ks.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ne({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(_e.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ga extends ct{constructor(){super(R(ga.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new K1({context:this.context}),this._modulationNode=new Ne({context:this.context});const e=R(ga.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ut({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ks({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ce(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ut.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Fe(this,void 0,void 0,function*(){return Ur(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class va extends ct{constructor(){super(R(va.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ne({context:this.context,gain:0});const e=R(va.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new ut({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new _e({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new ut({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ks({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ks({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ce(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ut.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Fe(this,void 0,void 0,function*(){return Ur(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Bi extends ct{constructor(){super(R(Bi.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ne({context:this.context,gain:0}),this._thresh=new br({context:this.context,mapping:n=>n<=0?-1:1});const e=R(Bi.getDefaults(),arguments,["frequency","width"]);this.width=new _e({context:this.context,units:"audioRange",value:e.width}),this._triangle=new ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ce(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Fe(this,void 0,void 0,function*(){return Ur(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class _a extends ct{constructor(){super(R(_a.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=R(_a.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new _e({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _e({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,ce(this,["frequency","detune"])}static getDefaults(){return Object.assign(ut.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=n+s*i)}}get count(){return this._oscillators.length}set count(e){if(vn(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const s=new ut({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):le});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Fe(this,void 0,void 0,function*(){return Ur(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class ya extends ct{constructor(){super(R(ya.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ks({context:this.context,value:2});const e=R(ya.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Bi({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ce(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Fe(this,void 0,void 0,function*(){return Ur(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Mv={am:ga,fat:_a,fm:va,oscillator:ut,pulse:Bi,pwm:ya};class wa extends ct{constructor(){super(R(wa.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=R(wa.getDefaults(),arguments,["frequency","type"]);this.frequency=new _e({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _e({context:this.context,units:"cents",value:e.detune}),ce(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(ut.getDefaults(),va.getDefaults(),ga.getDefaults(),_a.getDefaults(),Bi.getDefaults(),ya.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=Mv[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof Mv[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Rr(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Rr(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&_n(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Fe(this,void 0,void 0,function*(){return Ur(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Lm extends _e{constructor(){super(Object.assign(R(Lm.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Ne({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,oh(this._constantSource,this._sum)}static getDefaults(){return Object.assign(_e.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class dh extends Ts{constructor(){super(Object.assign(R(dh.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=R(dh.getDefaults(),arguments,["min","max"]);this._mult=this.input=new ks({context:this.context,value:e.max-e.min}),this._add=this.output=new Lm({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Ts.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class jm extends Ts{constructor(){super(Object.assign(R(jm.getDefaults(),arguments))),this.name="Zero",this._gain=new Ne({context:this.context}),this.output=this._gain,this.input=void 0,Ut(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),G1(this.context.getConstant(0),this._gain),this}}class wi extends K{constructor(){super(R(wi.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ie.prototype._fromType,this._toType=ie.prototype._toType,this._is=ie.prototype._is,this._clampValue=ie.prototype._clampValue;const e=R(wi.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new ut(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Ne({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new _e({context:this.context,units:"audioRange",value:0}),this._zeros=new jm({context:this.context}),this._a2g=new K1({context:this.context}),this._scaler=this.output=new dh({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),ce(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(ut.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,s=this.max;this._units=e,this.min=n,this.max=s}get state(){return this._oscillator.state}connect(e,n,s){return(e instanceof ie||e instanceof _e)&&(this.convert=e.convert,this.units=e.units),Qh(this,e,n,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Y1(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){vn(i,t,e),n.set(this,i)}})}}function Un(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){vn(this.toSeconds(i),t,e),n.set(this,i)}})}}class xa extends ct{constructor(){super(R(xa.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=R(xa.getDefaults(),arguments,["url","onload"]);this._buffer=new oe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ct.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:le,onerror:le,playbackRate:1,reverse:!1})}load(e){return Fe(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=le){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,s){return super.start(e,n,s),this}_start(e,n,s){this._loop?n=yi(n,this._loopStart):n=yi(n,0);const r=this.toSeconds(n),i=s;s=yi(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Wi({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Wt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(n))}restart(e,n,s){return super.restart(e,n,s),this}_restart(e,n,s){this._stop(e),this._start(e,n,s)}seek(e,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&vn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&vn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}un([Un(0)],xa.prototype,"fadeIn",void 0);un([Un(0)],xa.prototype,"fadeOut",void 0);class hD extends Ts{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new br({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Vn extends K{constructor(){super(R(Vn.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new _e({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=R(Vn.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(K.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(_n(e))return e;{let s;for(s in Zu)if(Zu[s][n]===e)return s;return e}}_setCurve(e,n,s){if(_n(s)&&Reflect.has(Zu,s)){const r=Zu[s];Xs(r)?e!=="_decayCurve"&&(this[e]=r[n]):this[e]=r}else if(tn(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){Y(["linear","exponential"].some(n=>n===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,n)}if(i&&this.sustain<1){const a=n*this.sustain,l=e+r;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+l):this._sig.exponentialApproachValueAtTime(a,l,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Y(tn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,s=0){return Qh(this,e,n,s),this}asArray(e=1024){return Fe(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,s=new Yh(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:s}));return l._sig.toDestination(),l.triggerAttackRelease(n*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}un([Un(0)],Vn.prototype,"attack",void 0);un([Un(0)],Vn.prototype,"decay",void 0);un([Y1(0,1)],Vn.prototype,"sustain",void 0);un([Un(0)],Vn.prototype,"release",void 0);const Zu=(()=>{let e,n;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const r=[],i=6.4;for(e=0;e<127;e++){n=e/127;const d=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;r[e]=d/10+n*.83}r[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const l=[];for(e=0;e<128;e++)n=e/127,l[e]=.5*(1-Math.cos(Math.PI*n));const u=[];for(e=0;e<128;e++){n=e/127;const d=Math.pow(n,3)*4+.2,p=Math.cos(d*Math.PI*2*n);u[e]=Math.abs(p*(1-n))}function c(d){const p=new Array(d.length);for(let m=0;m<d.length;m++)p[m]=1-d[m];return p}function h(d){return d.slice(0).reverse()}return{bounce:{In:c(u),Out:u},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:c(r)},sine:{In:l,Out:c(l)},step:{In:o,Out:c(o)}}})();class Fr extends K{constructor(){super(R(Fr.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=R(Fr.getDefaults(),arguments);this._volume=this.output=new Pr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ce(this,"volume")}static getDefaults(){return Object.assign(K.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[n],o=this.context.transport.schedule(a=>{r[n]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,n,s,r){const i=this.toSeconds(s),o=this.toSeconds(n);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Lr extends Fr{constructor(){super(R(Lr.getDefaults(),arguments));const e=R(Lr.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Fr.getDefaults(),{detune:0,onsilence:le,portamento:0})}triggerAttack(e,n,s=1){this.log("triggerAttack",e,n,s);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const s=this.toSeconds(n),r=e instanceof Vt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}un([Un(0)],Lr.prototype,"portamento",void 0);class Vm extends Vn{constructor(){super(R(Vm.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ne({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Sa extends Lr{constructor(){super(R(Sa.getDefaults(),arguments)),this.name="Synth";const e=R(Sa.getDefaults(),arguments);this.oscillator=new wa(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Vm(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),ce(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Lr.getDefaults(),{envelope:Object.assign(Ov(Vn.getDefaults(),Object.keys(K.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Ov(wa.getDefaults(),[...Object.keys(ct.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ca extends Sa{constructor(){super(R(Ca.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=R(Ca.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,ce(this,["oscillator","envelope"])}static getDefaults(){return _i(Lr.getDefaults(),Sa.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const s=this.toSeconds(n),r=this.toFrequency(e instanceof Vt?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}un([Y1(0)],Ca.prototype,"octaves",void 0);un([Un(0)],Ca.prototype,"pitchDecay",void 0);const X1=new Set;function zm(t){X1.add(t)}function Q1(t,e){const n=`registerProcessor("${t}", ${e})`;X1.add(n)}const dD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;zm(dD);const fD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;zm(fD);const pD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;zm(pD);const mD="feedback-comb-filter",gD=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Q1(mD,gD);class Ta extends Fr{constructor(){super(R(Ta.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=R(Ta.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(Y(Qu(s)||Rr(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Qu(s)){const i=new Vt(this.context,s).toMidi();n[i]=e.urls[s]}else Rr(r)&&isFinite(r)&&(n[r]=e.urls[r])}),this._buffers=new bm({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Fr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:le,onerror:le,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,s=1){return this.log("triggerAttack",e,n,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=H1(new Vt(this.context,r).toFrequency()),o=Math.round(i),a=i-o,l=this._findClosest(o),u=o-l,c=this._buffers.get(u),h=ih(l+a),d=new Wi({url:c,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(n,0,c.duration/h,s),tn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const p=this._activeSources.get(o),m=p.indexOf(d);m!==-1&&p.splice(m,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new Vt(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),tn(n)?(Y(tn(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(l))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,s){if(Y(Qu(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Qu(e)){const r=new Vt(this.context,e).toMidi();this._buffers.add(r,n,s)}else this._buffers.add(e,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}un([Un(0)],Ta.prototype,"attack",void 0);un([Un(0)],Ta.prototype,"release",void 0);class ka extends K{constructor(){super(Object.assign(R(ka.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new hD({context:this.context}),this.a=new Ne({context:this.context,gain:0}),this.b=new Ne({context:this.context,gain:0}),this.output=new Ne({context:this.context}),this._internalChannels=[this.a,this.b];const e=R(ka.getDefaults(),arguments,["fade"]);this.fade=new _e({context:this.context,units:"normalRange",value:e.fade}),ce(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Ut(this._split,this.a.gain,0),Ut(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(K.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class $i extends K{constructor(e){super(e),this.name="Effect",this._dryWet=new ka({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ne({context:this.context}),this.effectReturn=new Ne({context:this.context}),this.input=new Ne({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],ce(this,"wet")}static getDefaults(){return Object.assign(K.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class fh extends K{constructor(){super(Object.assign(R(fh.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=R(fh.getDefaults(),arguments,["pan"]);this.pan=new ie({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ce(this,"pan")}static getDefaults(){return Object.assign(K.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const vD="bit-crusher",_D=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Q1(vD,_D);class ph extends K{constructor(){super(R(ph.getDefaults(),arguments,["channels"])),this.name="Merge";const e=R(ph.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(K.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}let yD=class sp extends $i{constructor(){super(R(sp.getDefaults(),arguments,["distortion"])),this.name="Distortion";const e=R(sp.getDefaults(),arguments,["distortion"]);this._shaper=new br({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign($i.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const n=e*100,s=Math.PI/180;this._shaper.setMap(r=>Math.abs(r)<.001?0:(3+n)*r*20*s/(Math.PI+n*Math.abs(r)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}};class Rv extends $i{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new Ne({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,ce(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign($i.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}let wD=class rp extends Rv{constructor(){super(R(rp.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const e=R(rp.getDefaults(),arguments,["pitch"]);this._frequency=new _e({context:this.context}),this._delayA=new bd({maxDelay:1,context:this.context}),this._lfoA=new wi({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new bd({maxDelay:1,context:this.context}),this._lfoB=new wi({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new ka({context:this.context}),this._crossFadeLFO=new wi({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new bd({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,ce(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Rv.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let n=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,n=ih(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,n=ih(e)-1),this._frequency.value=n*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}},xD=class ip extends $i{constructor(){super(R(ip.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=R(ip.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign($i.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),vn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),vn(e,0),this._preDelay=e,this.generate()}generate(){return Fe(this,void 0,void 0,function*(){const e=this.ready,n=new Yh(2,this._decay+this._preDelay,this.context.sampleRate),s=new ma({context:n}),r=new ma({context:n}),i=new ph({context:n});s.connect(i,0,0),r.connect(i,0,1);const o=new Ne({context:n}).toDestination();i.connect(o),s.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=n.render();return this.ready=a.then(le),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}};class Ie extends K{constructor(){super(R(Ie.getDefaults(),arguments,["solo"])),this.name="Solo";const e=R(Ie.getDefaults(),arguments,["solo"]);this.input=this.output=new Ne({context:this.context}),Ie._allSolos.has(this.context)||Ie._allSolos.set(this.context,new Set),Ie._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(K.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Ie._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Ie._soloed.has(this.context)||Ie._soloed.set(this.context,new Set),Ie._soloed.get(this.context).add(this)}_removeSolo(){Ie._soloed.has(this.context)&&Ie._soloed.get(this.context).delete(this)}_isSoloed(){return Ie._soloed.has(this.context)&&Ie._soloed.get(this.context).has(this)}_noSolos(){return!Ie._soloed.has(this.context)||Ie._soloed.has(this.context)&&Ie._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ie._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ie._allSolos=new Map;Ie._soloed=new Map;class mh extends K{constructor(){super(R(mh.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=R(mh.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new fh({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Pr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ce(this,["pan","volume"])}static getDefaults(){return Object.assign(K.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class zs extends K{constructor(){super(R(zs.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=R(zs.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Ie({solo:e.solo,context:this.context}),this._panVol=this.output=new mh({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ce(this,["pan","volume"])}static getDefaults(){return Object.assign(K.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return zs.buses.has(e)||zs.buses.set(e,new Ne({context:this.context})),zs.buses.get(e)}send(e,n=0){const s=this._getBus(e),r=new Ne({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}zs.buses=new Map;class SD extends K{constructor(){super(...arguments),this.name="Listener",this.positionX=new ie({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ie({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ie({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ie({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ie({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ie({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ie({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ie({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ie({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(K.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Gh(t=>{t.listener=new SD({context:t})});Kh(t=>{t.listener.dispose()});jt().transport;jt().destination;jt().destination;jt().listener;jt().draw;const as=jt(),Me=jt();let Iv=!1;onmousedown=onmouseup=onfocus=onblur=onkeydown=onkeyup=()=>{Iv||Me.resume().then(()=>{Iv=!0,onmousedown=onmouseup=onfocus=onblur=onkeydown=onkeyup=null})};const CD=()=>{const t=cm(),{items:e}=P0(),n=At(e.has(t));return _u(e,()=>{n.value=e.has(t)}),n},Z1=t=>"--"+t.join(""),TD="_port_l5wr0_1",kD="_circle_l5wr0_12",Pv={port:TD,circle:kD},bv=({ctx:t})=>{const{color:e,title:n,isOutput:s}=t;return y.jsx(y.Fragment,{children:Q(()=>y.jsxs("div",{className:Pv.port,"data-output":s||void 0,style:{[Z1`color`]:e.value},children:[y.jsx("span",{ref:t.ref,className:Pv.circle}),y.jsx("span",{children:n})]},"port"))})},ND="_node_1tv47_1",ED="_content_1tv47_13",AD="_pins_1tv47_21",OD="_input_1tv47_26",DD="_output_1tv47_26",MD="_center_1tv47_37",RD="_head_1tv47_42",ID="_text_1tv47_49",Fs={node:ND,content:ED,pins:AD,input:OD,output:DD,center:MD,head:RD,text:ID},PD=xT(({title:t="Unnamed",children:e})=>{const n=cm(),s=CD(),r=_s(()=>s.value?{borderColor:"#08f"}:{});return Q(()=>y.jsxs("div",{className:Fs.node,style:{[Z1`color`]:n.color.value,...r.value},children:[y.jsx("div",{"data-drag":!0,className:Fs.head,children:y.jsx("span",{className:Fs.text,children:t})}),y.jsxs("div",{className:Fs.content,children:[y.jsx("div",{className:Fs.input,children:Q(()=>sn(n.input).map(i=>y.jsx(bv,{ctx:i},i.id)))},"input"),y.jsx("div",{className:Fs.center,children:e}),y.jsx("div",{className:Fs.output,children:Q(()=>sn(n.output).map(i=>y.jsx(bv,{ctx:i},i.id)))},"output")]})]},"node"))}),gh=({port:t})=>y.jsx(pk,{id:t.id,output:t.output,title:t.title,color:t.color,meta:t,onConnect:e=>t.onConnect(e.meta),onDisconnect:e=>t.onDisconnect(e.meta)}),bD="_menu_1lzk7_1",FD="_btn_1lzk7_13",LD="_sub_1lzk7_25",Ld={menu:bD,btn:FD,sub:LD},J1=({head:t,menu:e})=>{const n=b.useMemo(()=>e.toSorted((s,r)=>+!!r.children-+!!s.children),[]);return y.jsxs("div",{className:Ld.menu,children:[t&&y.jsx("h5",{children:t}),n.map((s,r)=>y.jsxs("div",{className:Ld.btn,onClick:s.onClick,children:[y.jsx("span",{children:s.name}),y.jsx("span",{children:s.children?">":""}),s.children&&y.jsx("div",{className:Ld.sub,children:y.jsx(J1,{menu:s.children??[]})})]},r))]})},jD={delete:"_delete_18gta_1"},VD=t=>y.jsx("a",{...t,className:jD.delete,children:"ⓧ"}),zD="_line_1f425_1",WD="_block_1f425_7",Ju={line:zD,block:WD},BD=({item:t})=>{const e=At(1),n=At(0),s=At(!1);return Si(()=>{t.output.gain.value=e.value,t.pan.pan.value=n.value,t.mute.gain.value=s.value?0:1}),y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Ju.line,children:[y.jsx("div",{className:Ju.block,children:Q(()=>y.jsx("input",{type:"range",min:-1,max:1,value:n.value,disabled:s.value,step:.001,onChange:r=>{const i=+r.currentTarget.value;isNaN(i)||(n.value=i)},onContextMenu:r=>{r.preventDefault(),n.value=0},"data-small":!0}))}),y.jsxs("div",{className:Ju.block,children:[Q(()=>y.jsx("input",{type:"range",min:0,max:1.4,value:e.value,disabled:s.value,step:.001,onChange:r=>{const i=+r.currentTarget.value;isNaN(i)||(e.value=i)},onContextMenu:r=>{r.preventDefault(),e.value=1},"data-vertical":!0})),y.jsx("span",{children:Qt(e,2)})]}),y.jsx("div",{className:Ju.block,children:y.jsx("button",{onClick:()=>s.value=!s.value,children:Q(()=>s.value?"Unmute":"Mute")})})]}),t.ports.map(r=>y.jsx(gh,{port:r},r.id))]})},$D=hm();class kt{#e;id=`#${$D()}`;color="#999";single=!1;start=new $;static showName="BaseNode";get title(){const e=Object.getPrototypeOf(this).constructor;return e.showName??e.name}ports=[];render(){return null}mount(){}destroy(){}get Render(){return this.#e??(this.#e=b.memo(()=>this.render(),()=>!0))}}const UD=hm();class qD{id=`#${UD()}`;output=!1;get title(){return"port"}color="#999";multy=!1}class ee extends qD{type;node;name;color;multy;get title(){return this.name??"audio"}constructor(e,n,s){super(),this.type=e,this.node=n,this.name=s,this.color="#4444aa",this.multy=!0,e==="out"&&(this.output=!0)}onConnect(e){if(this.type==="in")return!0;if(!(e instanceof ee))return!1;try{return this.node.connect(e.node),!0}catch(n){return console.error(n),!1}}onDisconnect(e){if(this.type==="in")return!0;if(!(e instanceof ee))return!1;try{return this.node.disconnect(e.node),!0}catch(n){return console.error(n),!1}}}const HD="_mixer_1gmaj_1",GD="_btns_1gmaj_5",Fv={mixer:HD,btns:GD};class jd{num;mixer;constructor(e,n){this.num=e,this.mixer=n,this.input=as.createGain(),this.output=as.createGain(),this.pan=as.createStereoPanner(),this.mute=as.createGain(),this.ports=[new ee("in",this.input),new ee("out",this.output)];for(const s of this.ports)s.name=`#${e}`;this.mixer.mixIn.connect(this.input),this.input.connect(this.pan),this.pan.connect(this.mute),this.mute.connect(this.output),this.output.connect(this.mixer.mixOut)}input;output;pan;mute;ports}class KD extends kt{static showName="Mixer";mixIn=as.createGain();mixOut=as.createGain();mixInPort=new ee("in",this.mixIn,"mixIn");mixOutPort=new ee("out",this.mixOut,"mixOut");maxLines=8;lines=te([new jd(0,this),new jd(1,this)]);append(){this.lines.value.length!==this.maxLines&&(this.lines.value=[...this.lines.value,new jd(this.lines.value.length,this)])}remove(){this.lines.value.splice(-1).forEach(n=>n.output.disconnect(this.mixOut)),this.lines.value=[...this.lines.value]}render(){return y.jsxs(y.Fragment,{children:[y.jsx(gh,{port:this.mixInPort}),y.jsx(gh,{port:this.mixOutPort}),y.jsxs("div",{className:Fv.mixer,children:[Q(()=>this.lines.value.map((e,n)=>y.jsx(BD,{item:e},n))),Q(()=>this.lines.value.length<this.maxLines&&y.jsx("div",{className:Fv.btns,children:y.jsx("button",{onClick:()=>this.append(),children:"Append"})}))]})]})}}class YD extends kt{static showName="Destination";color="#33f";single=!0;dest=Me.createGain();ports=[new ee("in",this.dest)];test=[Ut(this.dest,Me.destination)];render(){return null}}const XD=(t,e=!1)=>{const n=At(0),s=At(0);return b.useEffect(()=>t.current?lm(t.current,({contentRect:r,target:i})=>{Ns(()=>{n.value=r.width,s.value=r.height,e&&i instanceof HTMLElement&&(n.value=i.offsetWidth,s.value=i.offsetHeight)})}):void 0),b.useMemo(()=>({get width(){return n.value},peekWidth(){return n.peek()},get height(){return s.value},peekHeight(){return s.peek()}}),[])},QD=t=>{const e=At(t);return b.useMemo(()=>({get current(){return e.value},set current(n){e.value=n}}),[e])},ew=(t,e=0)=>e<=0?t:(t=Array.from({length:t.length+t.length-1},(n,s)=>s&1?(t[Math.floor(s/2)]+t[Math.ceil(s/2)])/2:t[Math.floor(s/2)]),ew(t,e-1)),Jn=[0,32,64,128,256,512,1024,2048,4090,8192,16384,22e3],ZD="_visual_g6b8d_1",JD={visual:ZD};function eM(t){return t>=1e3?(t/1e3|0)+"k":t+""}const tM=b.forwardRef(({node:t},e)=>{const n=QD(null),s=At(0),{can:r,ctx:i}=b.useMemo(()=>{const h=document.createElement("canvas"),d=h.getContext("2d");return{can:h,ctx:d}},[]),o=new Float32Array(ew(Jn,4)),a=new Float32Array(o.length),l=new Float32Array(o.length),u=XD(n),c=(h,d)=>(h+.5)*(r.width/d);return b.useEffect(()=>{if(e)return Object.assign(e,{current:{render(){s.value++}}}),()=>{Object.assign(e,{current:null})}},[]),Si(()=>{if(n.current){n.current.appendChild(r),s.value,r.width=u.width*2,r.height=u.height*2,i.clearRect(0,0,r.width,r.height),t.getFrequencyResponse(o,a,l),i.textAlign="center",i.textBaseline="top",i.font="14px Arial",i.strokeStyle="#333",i.lineWidth=1;for(let h=0;h<Jn.length;h++)i.strokeText(eM(Jn[h]),c(h,Jn.length),2);i.lineWidth=.5,i.strokeStyle="#999",i.beginPath();for(let h=0;h<Jn.length;h++){const d=c(h,Jn.length);i.moveTo(d,10),i.lineTo(d,r.height-10)}i.stroke(),i.closePath(),i.lineWidth=3,i.strokeStyle="#1d0a8e",i.beginPath();for(let h=0;h<o.length;h++){const d=c(h,o.length);i[h===0?"moveTo":"lineTo"](d,r.height+-a[h]*r.height*.5)}return i.stroke(),i.closePath(),()=>{r.remove()}}}),y.jsx("div",{className:JD.visual,ref:n})}),nM="_range_ug42l_1",sM="_label_ug42l_5",Lv={range:nM,label:sM},be=t=>{const e="defaultValue"in t.param?t.param.defaultValue:t.param.value,n=At(e),s=t.accuracy??0,r=1/10**s,i=b.useRef(null),o=b.useRef(setTimeout(()=>{}));Si(()=>{typeof t.batch=="number"?(clearTimeout(o.current),Object.assign(o,{current:setTimeout(()=>{t.param.value=n.value},t.batch)})):t.param.value=n.value,i.current&&(i.current.innerText=n.value.toFixed(s))});const a=u=>{u.setAttribute("contenteditable",""),u.focus()},l=u=>{u.removeAttribute("contenteditable");const c=+u.innerText;isNaN(c)||(n.value=c,t.onChange?.())};return y.jsxs("div",{className:Lv.range,children:[y.jsxs("div",{className:Lv.label,children:[y.jsx("span",{children:t.label??"Label"}),y.jsx("span",{"data-grow":!0}),y.jsx("span",{ref:i,onKeyDown:u=>{u.code==="Enter"&&(u.preventDefault(),u.stopPropagation(),l(u.currentTarget))},onBlur:u=>{l(u.currentTarget)},onMouseDown:u=>{a(u.currentTarget)}}),y.jsx("span",{children:t.postfix})]}),Q(()=>y.jsx("input",{type:"range",value:n.value,onChange:({currentTarget:u})=>{n.value=+u.value,t.onChange?.()},onContextMenu:u=>{u.preventDefault(),u.stopPropagation(),n.value=e,t.onChange?.()},step:r,style:{width:"200px"},min:t.minValue??t.param.minValue,max:t.maxValue??t.param.maxValue}))]})},rM=["allpass","bandpass","highpass","highshelf","lowpass","lowshelf","notch","peaking"];class iM extends kt{static showName="BQuadFilter";color="#195e40";ref=b.createRef();node=Me.createBiquadFilter();ports=[new ee("in",this.node),new ee("out",this.node)];render(){return y.jsxs(y.Fragment,{children:[y.jsx(tM,{ref:this.ref,node:this.node}),y.jsx("select",{defaultValue:this.node.type,onChange:e=>{this.node.type=e.currentTarget.value,this.ref.current?.render()},children:rM.map(e=>y.jsx("option",{value:e,children:e},e))}),y.jsx(be,{param:this.node.frequency,label:"Frequency",postfix:"HZ",onChange:()=>this.ref.current?.render()}),y.jsx(be,{param:this.node.Q,label:"Q",minValue:-100,maxValue:100,accuracy:1,onChange:()=>this.ref.current?.render()}),y.jsx(be,{param:this.node.detune,label:"Detune",postfix:"cents",minValue:-1200,maxValue:1200,onChange:()=>this.ref.current?.render()}),y.jsx(be,{param:this.node.gain,label:"Gain",minValue:-10,maxValue:10,accuracy:2,onChange:()=>{this.ref.current?.render()}})]})}}const oM="modulepreload",aM=function(t,e){return new URL(t,e).href},jv={},lM=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=Promise.all(n.map(l=>{if(l=aM(l,s),l in jv)return;jv[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(!!s)for(let p=i.length-1;p>=0;p--){const m=i[p];if(m.href===l&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":oM,u||(d.as="script",d.crossOrigin=""),d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},tw=(t,e)=>new Promise(n=>{const s=document.createElement("input");s.type="file",s.accept=t,s.multiple=!1,s.onchange=()=>{n([...s.files??[]]),s.remove()},s.click()});class uM extends kt{static showName="Convolver";ref=b.createRef();node=Me.createConvolver();sounds=new Fi([["irHall.ogg",lM(()=>import("./irHall-DmbdI3HS.js"),[],import.meta.url).then(e=>fetch(e.default)).then(e=>e.arrayBuffer()).then(e=>Me.decodeAudioData(e))]]);value=te(this.sounds.keys().next().value);ports=[new ee("in",this.node),new ee("out",this.node)];render(){return Si(()=>{this.sounds.get(this.value.value)?.then(e=>this.node.buffer=e),this.ref.current&&(this.ref.current.value=this.value.value)}),y.jsxs(y.Fragment,{children:[y.jsx("select",{ref:this.ref,defaultValue:this.value.value,onChange:e=>{this.value.value=e.currentTarget.value},children:Q(()=>(sn(this.sounds),[...this.sounds].map(([e])=>y.jsx("option",{value:e,children:e}))))}),y.jsx("button",{onClick:()=>{tw("audio/*").then(([e])=>{e&&this.sounds.set(e.name,e.arrayBuffer().then(n=>Me.decodeAudioData(n)).then(n=>(this.value.value=e.name,n)))})},children:"Upload file"})]})}}class cM extends kt{static showName="Delay";color="#f33";node=Me.createDelay(10);ports=[new ee("in",this.node),new ee("out",this.node)];render(){return y.jsx(y.Fragment,{children:y.jsx(be,{param:this.node.delayTime,label:"Delay Time",postfix:"sec",accuracy:3})})}}class hM extends kt{static showName="DynamicsCompressor";color="#0f6f8c";node=Me.createDynamicsCompressor();ports=[new ee("in",this.node),new ee("out",this.node)];render(){return y.jsxs(y.Fragment,{children:[y.jsx(be,{param:this.node.threshold,label:"Trashold",postfix:"DB",accuracy:2}),y.jsx(be,{param:this.node.knee,label:"KNEE",postfix:"DB",accuracy:2}),y.jsx(be,{param:this.node.ratio,label:"Ratio",accuracy:2}),y.jsx(be,{param:this.node.attack,label:"Attack",postfix:"sec",accuracy:2}),y.jsx(be,{param:this.node.release,label:"Release",postfix:"sec",accuracy:2})]})}}class dM extends kt{static showName="Gain";color="#0f0";node=Me.createGain();ports=[new ee("in",this.node),new ee("out",this.node)];render(){return y.jsx(y.Fragment,{children:y.jsx(be,{param:this.node.gain,minValue:0,maxValue:10,accuracy:2,label:"Gain"})})}}class fM extends kt{static showName="StereoPanner";color="#aa5858";node=Me.createStereoPanner();ports=[new ee("in",this.node),new ee("out",this.node)];render(){return y.jsx(y.Fragment,{children:y.jsx(be,{param:this.node.pan,label:"Pan",accuracy:3})})}}const mc=t=>{const e=At(la(t));return b.useLayoutEffect(()=>Wn(()=>{const n=la(t);n!==e.value&&(e.value=n)})),e},nw=t=>t instanceof xe?t.value:t,pM="_pb_fzotj_1",mM="_player_fzotj_10",gM="_buttons_fzotj_21",vM="_check_fzotj_40",_M="_progress_fzotj_45",yM="_marquee_fzotj_1",es={pb:pM,"pb-stop":"_pb-stop_fzotj_1","pb-pause":"_pb-pause_fzotj_1","pb-play":"_pb-play_fzotj_1",player:mM,buttons:gM,check:vM,progress:_M,marquee:yM},wM=({children:t})=>b.createElement("marquee",{className:es.marquee},t),sw=t=>{const e=b.useRef(t);return e.current=t,e.current=t,b.useCallback((...n)=>{const{current:s}=e;return s(...n)},[])},rw=(t,e=0)=>{const n=sw(t);return b.useCallback(zr(n,e),[])},xM=({audio:t,file:e})=>{const n=mc(()=>t.currentTime),s=mc(()=>isNaN(t.duration)?0:t.duration),r=mc(()=>nw(e)?s.value?n.value/s.value:0:void 0),i=rw(({target:o})=>{if(o instanceof HTMLProgressElement)return a=>{const{x:l,width:u}=o.getBoundingClientRect(),c=a.current.x-l;t.currentTime=c/u*t.duration}});return Q(()=>y.jsx("progress",{value:r.value,className:es.progress,onMouseDown:i}))},SM=t=>{const e=b.useMemo(()=>t.audio??new Audio,[t.audio]),n=_s(()=>nw(t.file)??null),s=_s(()=>{const i=n.value?.name;return i?`🎵${i}`:"No select file"}),r=mc(()=>!e.paused);return y.jsxs("div",{className:es.player,children:[y.jsx(wM,{children:s}),y.jsxs("div",{className:es.buttons,children:[Q(()=>y.jsxs(y.Fragment,{children:[y.jsx("button",{disabled:!n.value,onClick:()=>{e.paused?e.play():e.pause()},children:y.jsx("i",{className:es[r.value?"pb-pause":"pb-play"]})}),y.jsx("button",{disabled:!n.value,onClick:()=>{e.paused||e.pause(),e.currentTime=0},children:y.jsx("i",{className:es["pb-stop"]})})]})),y.jsx(xM,{audio:e,file:n})]}),y.jsx("div",{className:es.buttons,children:y.jsxs("label",{className:es.check,children:[y.jsx("input",{defaultChecked:e.loop,type:"checkbox",onChange:i=>{e.loop=i.currentTarget.checked}}),"Loop"]})})]})};class CM extends kt{static showName="AudioPlayer";color="#fff";audio=new Audio;node=Me.createMediaElementSource(this.audio);file=te(null);ports=[new ee("out",this.node)];constructor(){super(),de(()=>{this.file.value&&(this.audio.src=URL.createObjectURL(this.file.value))})}render(){return y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>{tw("audio/*").then(([e])=>{e&&(this.file.value=e)})},children:"Browse file"}),y.jsx(SM,{audio:this.audio,file:this.file})]})}}const Vv={"bind-value"(t){return{value:t.value,onChange(e){t.value=e.currentTarget.value}}},"bind-checked"(t){return{checked:t.value,onChange(e){t.value=e.currentTarget.checked}}}},TM=(t,e)=>({[e](...n){return t(...n)}})[e],{assign:gc,entries:kM}=Object,NM=(t,e)=>kM(t).reduce((n,[s,r])=>/(key|ref|children)/.test(s)?n:s in Vv?(gc(n,{[s]:void 0,...r instanceof xe?Vv[s](r):{}}),n):(r instanceof xe&&gc(n,{[s]:r.value}),n),gc({ref:e},t)),Vd=new Proxy({},{get(t,e){return t[e]??gc(t,{[e]:b.forwardRef(TM((n,s)=>(dp(),b.createElement(e,NM(n,s))),e))})[e]}}),EM=["custom","sawtooth","sine","square","triangle"],zv=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];function AM(t){const n=Math.pow(2,.08333333333333333);return 440*Math.pow(n,t)}const iw=Array.from({length:4*12},(t,e)=>({freq:AM(e-36),name:zv[e%zv.length]+`(${(e/12|0)+2})`}));console.log(JSON.stringify(iw,null,2));class OM extends kt{static showName="Oscillator";color="#df3";gain=Me.createGain();node=Me.createOscillator();playing=te(!1);activate=te(!1);keydown=te("");register=!1;freq=te("");baseFreq=te(0);ports=[new ee("out",this.gain)];keyDown(e){if(this.register){this.playing.value=!1,this.keydown.value=e.code,this.register=!1;return}this.activate.peek()&&e.code===this.keydown.value&&(e.preventDefault(),this.playing.value=!0)}keyUp(e){e.code===this.keydown.value&&(e.preventDefault(),this.playing.value=!1)}mount(){return this.node.start(),this.gain.gain.value=0,this.node.connect(this.gain),dm([()=>{this.node.disconnect(this.gain)},de(()=>{this.activate.value,this.playing.peek()&&(this.playing.value=!1)}),de(()=>{this.playing.value?this.gain.gain.value=1:this.gain.gain.value=0}),de(()=>{this.freq.value!==""&&(this.node.frequency.value=+this.freq.value,this.node.detune.value=0)}),mn("keydown",e=>this.keyDown(e)),mn("keyup",e=>this.keyUp(e))])}toggle(){this.playing.value=!this.playing.value}render(){return y.jsxs(y.Fragment,{children:[y.jsx("select",{defaultValue:this.node.type,onChange:e=>{this.node.type=e.currentTarget.value},children:EM.map(e=>y.jsx("option",{value:e,children:e},e))}),y.jsxs(Vd.select,{"bind-value":this.freq,children:[y.jsx("option",{value:"",children:"Manual settings"}),iw.map((e,n)=>y.jsx("option",{value:e.freq,children:e.name},n))]}),Q(()=>this.freq.value===""&&y.jsxs(y.Fragment,{children:[y.jsx(be,{param:this.node.frequency,label:"Frequency",postfix:"HZ",accuracy:2,minValue:Jn.at(0),maxValue:Jn.at(-1)}),y.jsx(be,{param:this.node.detune,label:"Detune",postfix:"cents",minValue:-1200,maxValue:1200})]})),Q(()=>y.jsx(Vd.button,{disabled:this.activate,onClick:()=>this.toggle(),children:this.playing.value?"Stop":"Start"})),y.jsxs("label",{children:[y.jsx(Vd.input,{type:"checkbox","bind-checked":this.activate})," ",'Key activate: "',Q(()=>this.keydown.value||"Unknow"),'"']}),y.jsx("button",{onClick:()=>{this.register=!0},children:"Change"})]})}}class DM extends kt{static showName="ChannelMerger";color="#632470";node=Me.createChannelMerger(2);left=Me.createGain();right=Me.createGain();ports=[new ee("out",this.node),new ee("in",this.left,"left"),new ee("in",this.right,"right")];test=[this.left.connect(this.node,0,0),this.right.connect(this.node,0,1)];render(){return null}}class MM extends kt{static showName="ChannelSplitter";color="#748320";node=Me.createChannelSplitter(2);left=Me.createGain();right=Me.createGain();ports=[new ee("in",this.node),new ee("out",this.left,"left"),new ee("out",this.right,"right")];test=[this.node.connect(this.left,0,0),this.node.connect(this.right,1,0)];render(){return null}}class RM extends kt{static showName="ChannelSwapper";color="#631547";input=Me.createChannelSplitter(2);output=Me.createChannelMerger();ports=[new ee("in",this.input),new ee("out",this.output)];test=[this.input.connect(this.output,0,1),this.input.connect(this.output,1,0)];render(){return null}}class IM extends kt{node;input;output;constructor(e){super(),this.node=e,this.input=as.createGain(),this.output=as.createGain(),Ut(this.input,e),Ut(e,this.output)}}const Wm=(t,...e)=>class extends IM{constructor(){super(new t(...e))}};class vh{target;key;minValue;maxValue;defaultValue;constructor(e,n,s=0,r=0,i=e[n]??e[`_${n}`]){this.target=e,this.key=n,this.minValue=s,this.maxValue=r,this.defaultValue=i,this.value=i}get value(){return Reflect.get(this.target,this.key)}set value(e){Reflect.set(this.target,this.key,e)}}class PM extends Wm(yD){static showName="Distortion";distortion=new vh(this.node,"distortion",0,1);ports=[new ee("in",this.input),new ee("out",this.output)];render(){return y.jsxs(y.Fragment,{children:[y.jsx(be,{param:this.distortion,label:"Discortion",accuracy:3}),y.jsx(be,{param:this.node.wet,label:"Wet",accuracy:3})]})}}class bM extends Wm(wD){static showName="PitchShift";pitch=new vh(this.node,"pitch",-14,14);ports=[new ee("in",this.input),new ee("out",this.output)];render(){return y.jsxs(y.Fragment,{children:[y.jsx(be,{param:this.pitch,label:"Pitch",accuracy:2}),y.jsx(be,{param:this.node.wet,label:"Wet",accuracy:3})]})}}class FM extends Wm(xD){static showName="Reverb";decay=new vh(this.node,"decay",.001,50);preDelay=new vh(this.node,"preDelay",0,10);ports=[new ee("in",this.input),new ee("out",this.output)];render(){return y.jsxs(y.Fragment,{children:[y.jsx(be,{param:this.decay,accuracy:2,label:"Decay",batch:50}),y.jsx(be,{param:this.preDelay,accuracy:2,label:"Pre Delay",batch:50}),y.jsx(be,{param:this.node.wet,accuracy:3,label:"Wet"})]})}}const Wv=[{name:"Append node",children:[{name:"Source",children:[CM,OM]},{name:"Effect",children:[dM,cM,hM,iM,uM,fM]},{name:"Splitting",children:[MM,DM,RM]},{name:"Tone.js",children:[bM,FM,PM]},{name:"Controlls",children:[KD]},YD]}],LM=({node:t,children:e})=>(b.useEffect(()=>dm([t.mount(),()=>t.destroy()]),[]),e),jM=()=>{const t=xs(Li),e=wu().useItem(),n=Wr(),s=b.useMemo(()=>{const r=i=>i.map(o=>({name:"showName"in o?o.showName:o.name,...typeof o=="function"?{onClick(){for(const l of t)if(l.single&&l instanceof o)return;const a=new o;a.start.set(n.x.value,n.y.value),t.add(a)}}:{children:r(o.children)}}));return r(Wv)},[Wv]);return y.jsxs(y.Fragment,{children:[y.jsx(e.Portal,{children:y.jsx(J1,{menu:[...s,{name:"Open GitHub",onClick(){window.open("https://github.com/vicimpa/node-editor")}}]})}),Q(()=>(sn(t),[...t].map(r=>y.jsx(LM,{node:r,children:y.jsxs(PD,{id:r.id,x:r.start.x,y:r.start.y,color:r.color,title:`${r.id} ${r.title}`,children:[y.jsx(VD,{onClick:()=>t.delete(r)}),y.jsx(r.Render,{}),r.ports.map(i=>y.jsx(gh,{port:i},i.id))]},r.id)},r.id))))]})},VM="_top_1a1g3_1",zM="_left_1a1g3_1",WM="_right_1a1g3_1",BM="_bottom_1a1g3_1",$M="_item_1a1g3_13",ec={top:VM,left:zM,right:WM,bottom:BM,item:$M},UM=()=>{const t=yu(),e=_s(()=>{const{value:n}=t.rect,s=t.map.rect.value,r=$.fromSize(s),i=$.fromSize(n).plus(n).minus(r.cplus(s)).cropMin(0),o=new $(s).minus(n).cropMin(0),a=r.cplus(i).plus(o);return r.div(a).times(100),o.div(a).times(100),i.div(a).times(100),{viewSize:r,lowerSize:o,biggerSize:i}});return y.jsxs(y.Fragment,{children:[y.jsx($0,{children:y.jsx(qM,{sizes:e})}),y.jsx(fm,{title:"Scroll",children:{lowX:y.jsxs(y.Fragment,{children:[Ft(()=>e.value.lowerSize.x.toFixed(2)),"%"]}),lowY:y.jsxs(y.Fragment,{children:[Ft(()=>e.value.lowerSize.y.toFixed(2)),"%"]}),bigX:y.jsxs(y.Fragment,{children:[Ft(()=>e.value.biggerSize.x.toFixed(2)),"%"]}),bigY:y.jsxs(y.Fragment,{children:[Ft(()=>e.value.biggerSize.y.toFixed(2)),"%"]})}})]})},qM=({sizes:t})=>{const e=Wr(),n=rw(({delta:a,meta:l})=>{e.animation.value=void 0;const u=Wn(()=>{const c=aa(e.rect.value),h=a.cdiv(-20).plus(c);l==="x"&&(e.x.value=h.x),l==="y"&&(e.y.value=h.y)});return({delta:c})=>(a.set(c),u)}),s=b.useCallback((a,l)=>{n(a,l)},[]),r=_s(()=>{const a=t.value.viewSize.x,l=t.value.lowerSize.x+"%",u=t.value.biggerSize.x+"%";return y.jsx("div",{onMouseDown:c=>s(c,"x"),className:ec.item,"data-show":a!==100||void 0,style:{left:l,right:u}})}),i=_s(()=>{const a=t.value.viewSize.y,l=t.value.lowerSize.y+"%",u=t.value.biggerSize.y+"%";return y.jsx("div",{onMouseDown:c=>s(c,"y"),className:ec.item,"data-show":a!==100||void 0,style:{bottom:u,top:l}})});return[{className:ec.bottom,elt:r},{className:ec.left,elt:i}].map(({className:a,elt:l},u)=>y.jsx("div",{className:a,children:l},u))},HM="_control_1lv0l_1",GM="_item_1lv0l_11",Zh={control:HM,item:GM},KM=()=>{const t=yu(),e=Wr(),n=()=>{e.focus(t.rect.value,500)};return Q(()=>y.jsx("button",{className:Zh.item,onClick:n,disabled:!t.itemsCount.value,children:y.jsx("span",{className:"icon-radio-checked"})}))},YM=()=>{const t=At(0);return R0("fullscreenchange",()=>{document.fullscreenElement?t.value=1:t.value=0}),t},XM=()=>{const t=YM(),e=wu(),n=async()=>{typeof document.fullscreenEnabled!==void 0&&(document.fullscreenElement?await document.exitFullscreen():await e.ref.current?.requestFullscreen())},s=_s(()=>{const r=t.value;return y.jsx("span",{className:r?"icon-shrink":"icon-enlarge"})});return y.jsx("div",{className:Zh.item,onClick:n,children:s})},QM=(t,e)=>{const n=sw(e);b.useLayoutEffect(()=>mn(t,n),[])},Bv=({handler:t,disabled:e,isZoomIn:n})=>y.jsx("button",{className:Zh.item,onMouseDown:t,disabled:e,children:y.jsx("span",{className:n?"icon-zoom-in":"icon-zoom-out"})}),ZM=()=>{const t=Wr(),e=At(0),n=_s(()=>({zoomInDisabled:t.scale.value===t.scaleMax,zoomOutDisabled:t.scale.value===t.scaleMin})),s=r=>i=>{if(i.button!==0)return;const o=r?1:-1;e.value+=o};return QM(["mouseup","blur"],()=>{e.value=0}),Si(()=>{(n.value.zoomInDisabled||n.value.zoomOutDisabled)&&(e.value=0)}),Si(()=>{if(e.value)return Wn((r,i)=>{t.toScale(o=>o+e.peek()*i*o*.002)})}),y.jsxs(y.Fragment,{children:[Q(()=>y.jsx(Bv,{isZoomIn:!0,disabled:n.value.zoomInDisabled,handler:s(!0)})),Q(()=>y.jsx(Bv,{isZoomIn:!1,disabled:n.value.zoomOutDisabled,handler:s(!1)}))]})},JM=()=>{const t=wu();return y.jsx(t.Portal,{children:y.jsxs("div",{className:Zh.control,children:[y.jsx(ZM,{}),y.jsx(XM,{}),y.jsx(KM,{})]})})},eR=()=>y.jsx(UT,{children:y.jsx(xk,{children:y.jsxs(lT,{children:[y.jsx(GC,{type:"circle",fill:"#555",r:4,back:{fill:"#333",stroke:"#555"}}),y.jsx(GT,{children:y.jsx(ek,{children:y.jsx(ST,{children:y.jsxs(OT,{children:[y.jsx(UM,{}),y.jsx(JM,{}),y.jsx(Ek,{}),y.jsx(jM,{})]})})})})]})})});p0(document.getElementById("root")).render(y.jsx(eR,{}));
